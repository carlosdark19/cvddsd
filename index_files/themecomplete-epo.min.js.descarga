(function(e,t,n){"use strict";var m,N,H,o={},s=e.TMEPOJS,f=e.wp,St=e.TMEPOQTRANSLATEXJS,ce=e.noUiSlider,E=e.ClipboardEvent,A=e.DataTransfer,w=[],re=[],p=!1,xe=!1,y=n("body"),i=n(e),l=n(t),S=n(e),Ot=e.tcmexp,W=e._,j=!1,yt=function(){return s.tm_epo_global_input_decimal_separator===""?s.currency_format_decimal_sep:n.epoAPI.locale.getSystemDecimalSeparator()},jt=function(){return s.tm_epo_global_displayed_decimal_separator===""?s.currency_format_decimal_sep:n.epoAPI.locale.getSystemDecimalSeparator()},bt=function(){return s.tm_epo_global_displayed_decimal_separator===""?s.currency_format_thousand_sep:n.epoAPI.locale.getSystemDecimalSeparator()},ft=function(){return s.tm_epo_start_animation_delay?s.tm_epo_start_animation_delay:e.tc_epo_delay?e.tc_epo_delay:500},ct=function(){return s.tm_epo_animation_delay?s.tm_epo_start_animation_delay:e.tc_epo_animation_delay?e.tc_epo_animation_delay:500},at=n.fn.val;if(!s||!f)return;n.fn.val=function(){var e=at.apply(this,arguments);return arguments.length>0&&n(this).is(".input-text.qty")&&n(this).trigger("change.cpf"),e},s.tm_epo_no_lazy_load==="no"&&n.lazyLoadXT&&n.extend(n.lazyLoadXT,{autoInit:!1,updateEvent:n.lazyLoadXT.updateEvent+" tmlazy"}),o.localInputDecimalSeparator=yt(),o.localDecimalSeparator=jt(),o.localThousandSeparator=bt(),o.epoDelay=ft(),o.epoAnimationDelay=ct(),o.getElementFromFieldCache=[],o.epoSelector=".tc-extra-product-options",o.associatedEpoSelector=".tc-extra-product-options-inline",o.associatedEpoCart=".tc-epo-element-product-container-cart",o.addToCartSelector="input[name='add-to-cart']",o.tcAddToCartSelector="input.tc-add-to-cart",o.qtySelector="input.qty,input[name='quantity'],select.qty,.drop-down-button #qty,.plus-minus-button #qty,.slider-input #amount",o.associateQtySelector="input.tm-qty-alt",o.addToCartButtonSelector=".add_to_cart_button, .single_add_to_cart_button",o.compositeSelector=".bto_item,.component",o.nativeProductPriceSelector=".woocommerce .product p.price",o.associatedNativeProductPriceSelector=".product-price .associated-price",o.templateEngine=n.epoAPI.applyFilter("tc_adjust_templateEngine",{price:f.template("tc-price"),sale_price:f.template("tc-sale-price"),tc_chars_remanining:f.template("tc-chars-remanining"),tc_final_totals:f.template("tc-final-totals"),tc_floating_box:f.template("tc-floating-box"),tc_floating_box_nks:f.template("tc-floating-box-nks"),tc_formatted_price:f.template("tc-formatted-price"),tc_formatted_sale_price:f.template("tc-formatted-sale-price"),tc_lightbox:f.template("tc-lightbox"),tc_lightbox_zoom:f.template("tc-lightbox-zoom"),tc_section_pop_link:f.template("tc-section-pop-link"),tc_upload_messages:f.template("tc-upload-messages")}),n.tcAPI=function(){return o},n.tcAPIGet=function(e){return o[e]},n.tcAPISet=function(e,t){o[e]=t},n.tc_validator&&(n.extend(n.tc_validator.messages,{required:s.tm_epo_global_validator_messages.required,email:s.tm_epo_global_validator_messages.email,url:s.tm_epo_global_validator_messages.url,number:s.tm_epo_global_validator_messages.number,digits:s.tm_epo_global_validator_messages.digits,maxlengthsingle:n.tc_validator.format(s.tm_epo_global_validator_messages.maxlengthsingle),maxlength:n.tc_validator.format(s.tm_epo_global_validator_messages.maxlength),minlengthsingle:n.tc_validator.format(s.tm_epo_global_validator_messages.minlengthsingle),minlength:n.tc_validator.format(s.tm_epo_global_validator_messages.minlength),max:n.tc_validator.format(s.tm_epo_global_validator_messages.max),min:n.tc_validator.format(s.tm_epo_global_validator_messages.min),step:n.tc_validator.format(s.tm_epo_global_validator_messages.step),lettersonly:n.tc_validator.format(s.tm_epo_global_validator_messages.lettersonly),lettersspaceonly:n.tc_validator.format(s.tm_epo_global_validator_messages.lettersspaceonly),alphanumeric:n.tc_validator.format(s.tm_epo_global_validator_messages.alphanumeric),alphanumericunicode:n.tc_validator.format(s.tm_epo_global_validator_messages.alphanumericunicode),alphanumericunicodespace:n.tc_validator.format(s.tm_epo_global_validator_messages.alphanumericunicodespace),repeaterminrows:n.tc_validator.format(s.tm_epo_global_validator_messages.repeaterminrows),repeatermaxrows:n.tc_validator.format(s.tm_epo_global_validator_messages.repeatermaxrows)}),n.tc_validator.addMethod("alphanumeric",function(e,t){return this.optional(t)||/^[a-zA-Z0-9.-]+$/i.test(e)},n.tc_validator.messages.alphanumeric),n.tc_validator.addMethod("lettersonly",function(e,t){return this.optional(t)||/^[a-z]+$/i.test(e)},n.tc_validator.messages.lettersonly),n.tc_validator.addMethod("lettersspaceonly",function(e,t){return this.optional(t)||/^[a-z,\u0020]+$/i.test(e)},n.tc_validator.messages.lettersspaceonly),n.tc_validator.addMethod("alphanumericunicode",function(e,t){return this.optional(t)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf\u3400-\u4dbf\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\u10E60-\u10E7F\u1EC70-\u1ECBF\u1ED00-\u1ED4F\u1EE00-\u1EEFF\u0530-\u1058F]+$/i.test(e)},n.tc_validator.messages.alphanumericunicode),n.tc_validator.addMethod("alphanumericunicodespace",function(e,t){return this.optional(t)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF\u0500-\u052F\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf\u3400-\u4dbf\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF\u10E60-\u10E7F\u1EC70-\u1ECBF\u1ED00-\u1ED4F\u1EE00-\u1EEFF\u0530-\u1058F,\u0020]+$/i.test(e)},n.tc_validator.messages.alphanumericunicodespace),n.tc_validator.addMethod("repeaterminrows",function(e,t,s){return n.epoAPI.math.toInt(n(t).closest(".tc-element-inner-wrap").find(".tc-repeater-element").length)>=n.epoAPI.math.toInt(s)},n.tc_validator.messages.repeaterminrows),n.tc_validator.addMethod("repeatermaxrows",function(e,t,s){return n.epoAPI.math.toInt(n(t).closest(".tc-element-inner-wrap").find(".tc-repeater-element").length)<=n.epoAPI.math.toInt(s)},n.tc_validator.messages.repeatermaxrows),n.tc_validator.addMethod("product_element_radio_qty",function(e,t){var s=n(t).closest(".tm-element-ul-product").find("input.tc-epo-field-product.tmcp-radio:checked").closest(".tc-epo-element-product-holder").find(".tm-qty").first().val();return s>0},n.tc_validator.messages.required),n.tc_validator.addMethod("product_element_select_qty",function(e,t){var s=n(t).closest(".tm-element-ul-product").find("select.tc-epo-field-product.tmcp-select").closest(".tc-epo-element-product-holder").find(".tm-qty").first().val();return s>0},n.tc_validator.messages.required)),n.epoAPI.util.escapeSelector=function(){var e=/([!"$%&'()*+,/:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}(),n.epoAPI.util.unformat=function(e){var t=n.epoAPI.math.unformat(e,o.localInputDecimalSeparator),s=parseFloat(t);return Number.isFinite(s)?s:t},n.epoAPI.util.parseParams=function(e,t){return typeof e!="string"||e.split===void 0?[]:e.split("&").map(function(e){var n={};return t===!0&&(e=decodeURIComponent(e.replace(/\+/g,"%20"))),e=e.split("=").map(function(e){var t=e.split("?");return t.length>1?t[1]:e}),e.length>1&&(n[e[0]]=e[1]),n}).filter(function(e){return e!==null}).reduce(function(e,t){return Object.assign({},e,t)},{})},n.tmempty||(n.tmempty=function(e){var n=[void 0,null,!1,0,"","0"],s=n.filter(function(t){return e===t}).length===1,t=!1;return typeof e=="object"?(t=Object.keys(e).filter(function(t){return Object.prototype.hasOwnProperty.call(e,t)}).length===0,t):s||t}),n.tmType||(n.tmType=function(e){return Object.prototype.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}),n.is_on_screen||(n.fn.is_on_screen=function(){var o=n(e),i=n.epoAPI.dom.scroll(),t=this.offset(),s={top:i.top,left:i.left};return s.right=s.left+o.width(),s.bottom=s.top+o.height(),t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(s.right<t.left||s.left>t.right||s.bottom<t.top||s.top>t.bottom)}),n().tmtoggle||(n.fn.tmtoggle=function(){var t=this,s=!1,o=0;if(t.length===0)return;return e.tc_accordion_offset===void 0&&(e.tc_accordion_offset=-100),t.each(function(){var t,r,c,a=n(this);if(!a.data("tm-toggle-init")){if(a.data("tm-toggle-init",1),r=a.find(".tm-toggle"),t=a.find(".tm-collapse-wrap"),c=n(".tm-collapse.tmaccordion").find(".tm-toggle"),r.length===0||t.length===0)return;t.is(".closed")?(n(t).removeClass("closed open").addClass("closed").hide(),n(r).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-down"),n(r).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-closed")):(n(t).removeClass("closed open").addClass("open").show(),n(r).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-up"),n(r).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-open"),s=!0),r.each(function(s,r){n(r).on("closewrap.tmtoggle",function(){if(a.is(".tmaccordion")&&n(t).is(".closed"))return;n(t).removeClass("closed open").addClass("closed"),n(this).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-down"),n(this).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-closed"),n(t).removeClass("tm-animated fadein"),a.is(".tmaccordion")?n(t).animate({height:"toggle"},100,function(){n(t).hide()}):n(t).animate({height:"toggle"},100,function(){n(t).hide()}),i.trigger("tmlazy")}),n(r).on("openwrap.tmtoggle",function(s,l){a.is(".tmaccordion")&&n(c).not(n(this)).trigger("closewrap.tmtoggle"),n(t).removeClass("closed open").addClass("open"),n(this).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-up"),n(this).removeClass("toggle-header-open toggle-header-closed").addClass("toggle-header-open"),n(t).show().removeClass("tm-animated fadein").addClass("tm-animated fadein"),setTimeout(function(){i.trigger("tmlazy")},200),setTimeout(function(){l===void 0&&o&&a.is(".tmaccordion")&&!a.is_on_screen()&&i.tcScrollTo(n(r),10,e.tc_accordion_offset)},110)}),n(r).on("click.tmtoggle",function(e){e.preventDefault(),n(t).is(".closed")?n(this).trigger("openwrap.tmtoggle"):n(this).trigger("closewrap.tmtoggle")}),n(r).find(".tm-qty").closest(".cpf-element").find(".tm-epo-field").on("change.cpf",function(){n(r).trigger("openwrap.tmtoggle")})})}}),void 0===e.tc_accordion_closed_on_page_load&&!s&&t.filter(".tmaccordion").length>0&&t.filter(".tmaccordion").first().find(".tm-toggle").trigger("openwrap.tmtoggle",{nomove:1}),o=1,t}),n().tmpoplink||(n.fn.tmpoplink=function(e){var i,o=this,t={classname:"flasho tc-wrapper cart-popup"};if(o.length===0)return;return e&&(t=n.extend({},t,e)),i=function(e){return n.epoAPI.template.html(f.template("tc-cart-options-popup"),{title:e.title,id:e.id,html:e.html,close:s.i18n_close})},o.each(function(){var e,a,r,c,o=n(this);if(o.is(".tc-poplink"))return;o.addClass("tc-poplink"),a=n(this).attr("href"),e=n(this).attr("data-title"),r=n(a).html(),e||(e=s.i18n_addition_options),c=i({id:"tc-floatbox-content",html:r,title:e}),o.on("click.tmpoplink",function(e){n.tcFloatBox({fps:1,ismodal:!1,refresh:100,width:"80%",height:"80%",classname:t.classname,data:c}),e.preventDefault()})})});function pt(e,t,n,s,o){return t=Math,n=t.log,s=1024,o=n(e)/n(s)|0,(e/t.pow(s,o)).toFixed(o?2:0)+" "+(o?"KMGTPEZY"[--o]+"B":"bytes")}function Be(e,t){e.toArray().forEach(function(e){e=n(e),e.find(":input").prop("disabled",function(e,s){var o=n(this).data("tc-state");return o===void 0?(n(this).data("tc-state",s),t):o===!1?t:o})})}function z(e,t){var o,a,r,c,l,d,i=0;return t&&(c=t.attr("data-taxable"),o=t.attr("data-tax-rate"),d=t.attr("data-prices-include-tax")||s.prices_include_tax,l=t.attr("data-tax-display-mode"),t.data("current_variation")!==void 0&&(a=t.data("current_variation")),a!==void 0&&(a=t.data("current_variation"),c=a.tc_is_taxable,o=a.tc_tax_rate)),c&&(o=parseFloat(o/100),d==="1"?l==="incl"?(e=parseFloat(e),r=e/(1+o),i=e-r):(r=e,i=e*o):l==="incl"&&(r=e/(1+o),i=e-r),i=n.epoAPI.math.toFloat(i)),i}function Ie(e,t,n,o,i,a,r){var c,l,d,u,h,m,f,p,g;return Number.isFinite(parseFloat(e))||(e=0),e=e*1e4,t&&(d=t.attr("data-taxable"),l=t.attr("data-tax-rate"),p=t.attr("data-prices-include-tax")||s.prices_include_tax,g=t.attr("data-is-vat-exempt"),m=t.attr("data-non-base-location-prices"),u=t.attr("data-taxes-of-one"),h=t.attr("data-base-taxes-of-one"),f=t.attr("data-modded-taxes-of-one"),t.data("current_variation")!==void 0?c=t.data("current_variation"):i!==void 0&&(c=i),c!==void 0&&(c=t.data("current_variation"),d=c.tc_is_taxable,l=c.tc_tax_rate,m=c.tc_non_base_location_prices,u=c.tc_taxes_of_one,h=c.tc_base_taxes_of_one,f=c.tc_modded_taxes_of_one),n&&n.data("tax-obj")&&(l=n.data("tax-obj"),l.has_fee==="no"?d=!1:l.has_fee==="yes"&&(d=!0),l=l.tax_rate,u=l/100,h=l/100),d&&(p==="1"&&!o?g==="1"?m==="1"?e=parseFloat(e)-u*e:e=parseFloat(e)-h*e:m==="1"&&(e=parseFloat(e)-h*e+f*e):(n||c===void 0||r)&&(e=parseFloat(e)+parseFloat(e)*u))),e=e/1e4,e}function He(e,t,n,s,o,i,a){var r,c,l,d,u,h,m;return Number.isFinite(parseFloat(e))||(e=0),e=e*1e4,t&&(m=t.attr("data-tax-display-mode"),l=t.attr("data-taxable"),r=t.attr("data-tax-rate"),u=t.attr("data-taxes-of-one"),d=t.attr("data-base-taxes-of-one"),h=t.attr("data-prices-include-tax"),t.data("current_variation")!==void 0?c=t.data("current_variation"):o!==void 0&&(c=o),c!==void 0&&(l=c.tc_is_taxable,r=c.tc_tax_rate,u=c.tc_taxes_of_one,d=c.tc_base_taxes_of_one),n&&n.data("tax-obj")&&(r=n.data("tax-obj"),r.has_fee==="no"?l=!1:r.has_fee==="yes"&&(l=!0),r=r.tax_rate,d=r/100),l&&(h==="1"||s)&&(m==="incl"||(n||c===void 0||s||a)&&(d===u?e=parseFloat(e)-parseFloat(u*e):e=e*(1-parseFloat(d))))),e=e/1e4,e}function c(e,t,n,o,i,a,r){var c;return Number.isFinite(parseFloat(e))||(e=0),t&&(c=t.attr("data-tax-display-mode")||s.tax_display_mode,c==="incl"?e=Ie(e,t,n,i,a,o,r):e=He(e,t,n,i,a,o,r)),e}function g(e,t){var i;return t||(t={}),i=n.extend({symbol:"",format:"",decimal:o.localDecimalSeparator,thousand:o.localThousandSeparator,precision:s.currency_format_num_decimals},t),s.tm_epo_trim_zeros==="yes"&&(e%1).toString()!=="0"===!1&&(i.precision=0),n.epoAPI.applyFilter("tc_formatPrice",n.epoAPI.math.format(e,i),i,e)}function le(e,t,n){return t+g(e,{symbol:s.currency_format_symbol,format:s.currency_format})+n}function h(e,t,n,o,i,a){var d,r="",l=s.option_plus_sign+" ";return n||(e=c(e,t,i,a)),d=Math.abs(e),s.tm_epo_global_options_price_sign==="minus"&&(l=""),e<0&&(l=s.option_minus_sign+" "),t&&o&&(r=t.attr("data-tax-string")),r===void 0&&(r=""),le(d,l,r)}H=function(e,t,n){return this.this_epo_totals_container=e,this.is_quickview=t,this.main_cart=n,!!(!t&&s.floating_totals_box&&s.floating_totals_box!=="disable"&&n&&e.length)&&(this.init(),this)},H.prototype={constructor:H,onUpdate:function(){var i,r,e=this.this_epo_totals_container.data("tm-html"),t=this.this_epo_totals_container.data("tm-floating-box-data"),a=[];t&&t.length&&n.each(t,function(e,t){t.title===""&&(t.title="&nbsp;"),t.value===""&&(t.value="&nbsp;"),t.title?(t.title=n("<div>"+t.title+"</div>"),t.title.find("span").remove(),t.title=t.title.html()):t.title="&nbsp;",this.is_nks&&(t.label_show!==""&&(t.title=""),t.value_show!==""&&(t.value="")),s.tm_epo_auto_hide_price_if_zero==="yes"&&n.tmempty(t.price)===!0?t.price="":t.price=h(t.price,this.this_epo_totals_container,!0,!1),a.push({label_show:t.label_show,value_show:t.value_show,title:t.title,value:t.value,quantity:t.quantity,price:t.price})}),(e&&e===""&&(!t||!t.length)||!(e&&e!==""||this.is_nks))&&(e="",this.floatingBox.hide()),r=n.epoAPI.template.html(this.engineTemplate,{html_before:s.floating_totals_box_html_before,html_after:s.floating_totals_box_html_after,option_label:s.i18n_option_label,option_value:s.i18n_option_value,option_qty:s.i18n_option_qty,option_price:s.i18n_option_price,values:a,totals:e}),this.floatingBox.html(r),this.onUpdateScroll(),s.floating_totals_box_add_button==="yes"&&(i=this.main_cart.find(o.addToCartButtonSelector).first(),i.tcClone().addClass("tc-add-to-cart-button").on("click",function(){i.trigger("click")}).appendTo(this.floatingBox))},onUpdateScroll:function(){if(s.floating_totals_box_visibility==="always"){this.floatingBox.is(":empty")&&!this.is_nks_alt?this.floatingBox.hide():this.floatingBox.show();return}s.floating_totals_box_visibility==="hideafterscroll"&&(i.scrollTop()>n.epoAPI.math.toFloat(s.floating_totals_box_pixels)&&!this.is_nks_alt?this.floatingBox.is(":hidden")||(this.is_nks===!1?this.floatingBox.fadeOut():this.floatingBox.hide()):(this.floatingBox.is(":hidden")||this.is_nks_alt)&&(!this.floatingBox.is(":empty")||this.is_nks_alt)&&(this.is_nks===!1?this.floatingBox.fadeIn():this.floatingBox.show())),s.floating_totals_box_visibility==="afterscroll"&&(i.scrollTop()>n.epoAPI.math.toFloat(s.floating_totals_box_pixels)||this.is_nks_alt?this.floatingBox.is(":hidden")&&!this.floatingBox.is(":empty")||this.is_nks_alt?this.is_nks===!1?this.floatingBox.fadeIn():this.floatingBox.show():!this.floatingBox.is(":hidden")&&this.floatingBox.is(":empty")&&(this.is_nks===!1?this.floatingBox.fadeOut():this.floatingBox.hide()):this.floatingBox.is(":hidden")||(this.is_nks===!1?this.floatingBox.fadeOut():this.floatingBox.hide()))},addEvents:function(){this.onUpdate(),this.main_cart.on("tm-epo-after-update",this.onUpdate.bind(this)),this.main_cart.on("tm-epo-short-update",this.onUpdate.bind(this)),this.is_nks===!1&&i.on("scroll",this.onUpdateScroll.bind(this))},init:function(){this.floatingBox=n('<div class="tm-floating-box '+s.floating_totals_box+'"></div>'),this.nks_selector=n(".tm-floating-box-nks").first(),this.alt_selector=n(".tm-floating-box-alt").first(),this.engineTemplate=o.templateEngine.tc_floating_box,this.is_nks=!1,this.is_nks_alt=!1,this.nks_selector.length>0?(this.is_nks=!0,this.floatingBox.removeClass("top left right bottom").appendTo(this.nks_selector).show()):this.alt_selector.length>0?this.floatingBox.removeClass("top left right bottom").appendTo(this.alt_selector).hide():this.floatingBox.appendTo("body").hide(),(this.nks_selector.length>0||this.alt_selector.length>0)&&(this.is_nks_alt=!0,this.engineTemplate=o.templateEngine.tc_floating_box_nks),this.addEvents()}},n.tcFloatingTotalsBox=function(e,t,n){var s=!1;return e&&e.length&&e.data("tcfloatingtotalsbox")===void 0&&(s=new H(e,t,n),e.data("tcfloatingtotalsbox",s)),s},n.tc_product_image={},n.tc_product_image_store={},n.tc_replace_object_values=function(e,t){return Object.keys(e).forEach(function(n){Object.keys(e[n]).forEach(function(s){void 0!==t[n]&&void 0!==t[n][s]&&Object.prototype.hasOwnProperty.call(t[n],s)&&(e[n][s]=t[n][s])})}),e},n.tc_maybe_copy_object_values=function(e,t){return Object.keys(t).forEach(function(n){Object.keys(t[n]).forEach(function(s){void 0!==t[n]&&Object.prototype.hasOwnProperty.call(t[n],s)&&void 0!==t[n][s]&&(void 0===e[n]||void 0===e[n][s])&&(void 0===e[n]&&(e[n]={}),e[n][s]=t[n][s])})}),e},n.tc_pre_populate_store=function(){var e={};return e[0]={},e[1]={},e[2]={},e[3]={},e[0].src="",e[0].srcset="",e[0].sizes="",e[0].title="",e[0].alt="",e[0]["data-src"]="",e[0]["data-large_image"]="",e[0]["data-large_image_width"]="",e[0]["data-large_image_height"]="",e[1]["data-thumb"]="",e[2].src="",e[3].href="",e[3].title="",e},n.tc_populate_store=function(e,t){var i=t.find(".flex-control-nav li:eq(0) img"),a=t.find(".woocommerce-product-gallery__wrapper "),r=a.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),s=e,o=e.closest("a"),n={};return n[0]={},n[1]={},n[2]={},n[3]={},n[0].src=s.attr("src"),n[0].srcset=s.attr("srcset"),n[0].sizes=s.attr("sizes"),n[0].title=s.attr("title"),n[0].alt=s.attr("alt"),n[0]["data-src"]=s.attr("data-src"),n[0]["data-large_image"]=s.attr("data-large_image"),n[0]["data-large_image_width"]=s.attr("data-large_image_width"),n[0]["data-large_image_height"]=s.attr("data-large_image_height"),n[1]["data-thumb"]=r.attr("data-thumb"),n[2].src=i.attr("src"),n[3].href=o.attr("href"),n[3].title=o.attr("title"),n},n.tc_maybe_copy_object_values_from_img=function(e,t,s){var o,i,r=s.find(".flex-control-nav li:eq(0) img"),d=s.find(".woocommerce-product-gallery__wrapper "),l=d.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),a=t,c=t.closest("a"),u=["src","srcset","sizes","title","alt","data-src","data-large_image","data-large_image_width","data-large_image_height","large-image"],h=["data-thumb"],m=["src"],f=["href","title"],p=[a,l,r,c],g=[u,h,m,f];return p.forEach(function(t,s){void 0!==t&&void 0!==t[0]&&(i=t[0].attributes,n.each(i,function(){this.specified&&(o=this.name,n.inArray(o,g[s])!==-1&&(void 0===e[s]||void 0!==e[s]&&void 0===e[s][o])&&(void 0===e[s]&&(e[s]={}),e[s][o]=this.value))}))}),e},n.fn.tc_set_attr=function(e,t,s){void 0===s&&(s=0),(void 0===n.tc_product_image[s]||void 0!==n.tc_product_image[s]&&void 0===n.tc_product_image[s][e])&&(void 0===n.tc_product_image[s]&&(n.tc_product_image[s]={}),n.tc_product_image[s][e]="",this.attr(e)&&(n.tc_product_image[s][e]=this.attr(e))),!1===t?this.removeAttr(e):this.attr(e,t)},n.fn.tc_reset_attr=function(e,t){if(void 0===t&&(t=0),void 0===n.tc_product_image[t])return;void 0!==n.tc_product_image[t][e]&&this.attr(e,n.tc_product_image[t][e]),delete n.tc_product_image[t][e]},n.fn.tc_update_attr=function(e,t){void 0===t&&(t=0),void 0!==n.tc_product_image[t]&&(n.tc_product_image[t][e]=this.attr(e))},n.fn.tc_image_update=function(e,t){var o,i,c,l,r=n(e),m=this,a=n(t),d=m.data("epo_object"),h=d.main_product.closest("#product-"+d.product_id),u=h;h.length<=0&&(u=d.main_product.closest(".post-"+d.product_id)),r.is("select")&&(r=r.children("option:selected")),c=r.data("image-variations"),s.tm_epo_global_product_image_selector!==""?o=n(s.tm_epo_global_product_image_selector):o=u.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img,img.emoji,a.woocommerce-product-gallery__trigger img").first(),l=o.closest("a"),o.length>1&&(o=o.first()),r&&c&&a.length>0?(a.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),i=c.imagep,c.imagep.image_link||(i=c.image),a.attr("title",i.image_title),a.attr("alt",i.image_alt),i.image_srcset&&a.attr("srcset",i.image_srcset),i.image_sizes&&a.attr("sizes",i.image_sizes),o.tc_set_attr("title",i.image_title),o.tc_set_attr("alt",i.image_alt),o.tc_set_attr("data-large-image",i.image_link),o.data.wc27_zoom_target&&(o.data.wc27_zoom_target.tc_set_attr("data-thumb",i.image_link),u.find(".flex-control-nav li:eq(0) img").tc_set_attr("src",i.image_link)),l.tc_set_attr("href",i.image_link),l.tc_set_attr("title",i.image_caption)):(o.tc_reset_attr("title"),o.tc_reset_attr("alt"),o.tc_reset_attr("data-large-image"),o.data.wc27_zoom_target&&(o.data.wc27_zoom_target.tc_reset_attr("data-thumb"),u.find(".flex-control-nav li:eq(0) img").tc_reset_attr("src")),l.tc_reset_attr("href"),l.tc_reset_attr("title"))},n.fn.tm_find_matching_variations=function(e,t){var s,o,i=[];if(e)for(s=0;s<e.length;s+=1)o=e[s],n.fn.tm_variations_match(o.attributes,t)&&i.push(o);return i},n.fn.tm_variations_match=function(e,t){var n,s,o=!0;return Object.keys(e).forEach(function(i){Object.prototype.hasOwnProperty.call(e,i)&&(n=e[i],s=t[i],n!==void 0&&s!==void 0&&n.length!==0&&s.length!==0&&n!==s&&(o=!1))}),o};function Xe(e){var t,s,a,r,i=n(e);if(i.length===0)return;if(i.is(".cpf-section"))return e.find(".tm-epo-field");if(s=i.attr("data-uniqid"),r=i.closest(".tc-extra-product-options"),t=r.attr("data-epo-id"),!r.is(".reactivate")&&o.getElementFromFieldCache&&o.getElementFromFieldCache[t]&&o.getElementFromFieldCache[t][s])return o.getElementFromFieldCache[t][s];if(a=i.attr("class").split(" ").map(function(e){return e.indexOf("cpf-type-",0)!==-1?e:null}).filter(function(e){return e??null}),a.length>0)switch(a=a[0],a==="cpf-type-product"&&(i.is(".cpf-type-product-mode-product")||i.is(".cpf-type-product-checkbox")||i.is(".cpf-type-product-thumbnailmultiple")?a="cpf-type-checkbox":i.is(".cpf-type-product-dropdown")?a="cpf-type-select":a="cpf-type-radio"),a){case"cpf-type-radio":return o.getElementFromFieldCache[t]=[],o.getElementFromFieldCache[t][s]=i.find(".tm-epo-field.tmcp-radio"),o.getElementFromFieldCache[t][s];case"cpf-type-checkbox":return o.getElementFromFieldCache[t]=[],o.getElementFromFieldCache[t][s]=i.find(".tm-epo-field.tmcp-checkbox"),o.getElementFromFieldCache[t][s];case"cpf-type-select":return o.getElementFromFieldCache[t]=[],o.getElementFromFieldCache[t][s]=i.find(".tm-epo-field.tmcp-select"),o.getElementFromFieldCache[t][s];case"cpf-type-selectmultiple":return o.getElementFromFieldCache[t]=[],o.getElementFromFieldCache[t][s]=i.find(".tm-epo-field.tmcp-selectmultiple"),o.getElementFromFieldCache[t][s];case"cpf-type-textarea":return o.getElementFromFieldCache[t]=[],o.getElementFromFieldCache[t][s]=i.find(".tm-epo-field.tmcp-textarea"),o.getElementFromFieldCache[t][s];case"cpf-type-textfield":return o.getElementFromFieldCache[t]=[],o.getElementFromFieldCache[t][s]=i.find(".tm-epo-field.tmcp-textfield"),o.getElementFromFieldCache[t][s];case"cpf-type-color":return o.getElementFromFieldCache[t]=[],o.getElementFromFieldCache[t][s]=i.find(".tm-epo-field.tm-color-picker"),o.getElementFromFieldCache[t][s];case"cpf-type-range":return o.getElementFromFieldCache[t]=[],o.getElementFromFieldCache[t][s]=i.find(".tm-epo-field.tmcp-range"),o.getElementFromFieldCache[t][s];case"cpf-type-date":return o.getElementFromFieldCache[t]=[],o.getElementFromFieldCache[t][s]=i.find(".tm-epo-field.tmcp-date"),o.getElementFromFieldCache[t][s];case"cpf-type-time":return o.getElementFromFieldCache[t]=[],o.getElementFromFieldCache[t][s]=i.find(".tm-epo-field.tmcp-time"),o.getElementFromFieldCache[t][s];case"cpf-type-variations":return o.getElementFromFieldCache[t]=[],o.getElementFromFieldCache[t][s]=i.closest(".cpf-section").find(".tm-epo-field.tm-epo-variation-element"),o.getElementFromFieldCache[t][s]}}n().tclightbox||(n.fn.tclightbox=function(){var e=this;if(e.length===0)return;return e.each(function(){var t,i,a,r,c,l,d,e=n(this);if(e.is(".tcinit"))return;if(t=e.attr("src")||e.attr("data-original"),a=e.closest("label"),i=a.closest(".tmcp-field-wrap").find(".tm-epo-field[id='"+a.attr("for")+"']"),t=i.attr("data-imagel")||i.attr("data-imagep")||i.attr("data-image")||t,!t)return;e.addClass("tcinit").before(n.epoAPI.template.html(o.templateEngine.tc_lightbox,{})),r=e.prev(),e.wrap("<div class='tc-lightbox-image-wrap'/>"),e.after(r),d=r.find(".tc-lightbox-button"),l=function(){d.addClass("tcinit").on("click.tclightbox",function(e){var s,i;if(n(".tc-closing.tc-lightbox").length>0)return;s=n.epoAPI.dom.size(),i=n("<img>").addClass("tc-lightbox-img").attr("src",t).css("maxHeight",s.visibleHeight+"px").css("maxWidth",s.visibleWidth+"px"),n.tcFloatBox({fps:1,ismodal:!1,refresh:"fixed",width:"auto",height:"auto",top:"0%",left:"0%",classname:"flasho tc-lightbox",animateIn:"tc-lightbox-zoomin",animateOut:"tc-lightbox-zoomout",data:n.epoAPI.template.html(o.templateEngine.tc_lightbox_zoom,{img:i[0].outerHTML}),zIndex:102001,cancelClass:".tc-lightbox-img, .tc-lightbox-button-close",unique:!0}),e.preventDefault()})},s.tm_epo_preload_lightbox_image==="yes"?(c=new Image,c.src=t,c.onload=function(){l()}):l()})}),n().tmsectionpoplink||(n.fn.tmsectionpoplink=function(){var e=this;if(e.length===0)return;return e.each(function(){var t,a,r,c,l,d,e=n(this);if(e.data("tmsectionpoplink"))return;e.data("tmsectionpoplink",!0),d=e.attr("data-sectionid"),r=s.i18n_addition_options,t=e.closest(".cpf-section[data-uniqid='"+d+"']"),a=!1,c=n('<div class="fl-overlay"></div>').css({zIndex:parseInt(e.zIndex,10)-1,opacity:.8}),l=function(){var e=n("#tm-section-pop-up");e.parents().removeClass("noanimated"),c.unbind().remove(),e.after(t),e.remove(),t.find(".tm-section-link").show(),t.find(".tm-section-pop").hide()},e.attr("data-title")&&(r=e.attr("data-title")),e.on("click.tmsectionpoplink",function(e){var d;e.preventDefault(),a=!1,c.appendTo("body").on("click",l),t.before(n.epoAPI.template.html(o.templateEngine.tc_section_pop_link,{title:r,close:s.i18n_close})),d=n("#tm-section-pop-up"),d.find(".float-editbox").prepend(t),t.find(".tm-section-link").hide(),t.find(".tm-section-pop").show(),d.parents().addClass("noanimated"),d.find(".floatbox-cancel").on("click",function(){if(a)return;a=!0,l()}),i.trigger("tmlazy"),i.trigger("tmsectionpoplink")})})});function I(e){var t="input[name^='variation_id']";return e.find("input.variation_id").length>0?t="input.variation_id":t="input.product-variation-id",t}function Qe(e,t){var s=I(e),n=e.find(s);return e.is(".tc-epo-element-product-container-cart")?n=e.closest(".tc-epo-element-product-li-container").find(s):n=e.find(s).not(".tc-epo-element-product-container-variation-id "+s),t&&(n=n.not(t)),n}function Ze(e){var t,n;return e.is(".tc-epo-element-product-container-cart")&&(t=e.closest(".cpf-element"),t.is(".cpf-type-product-thumbnailmultiple")||t.is(".cpf-type-product-checkbox")?n=e.closest(".tc-epo-element-product-holder").find(".tc-epo-element-product-container-variation-id"):(t.is(".cpf-type-product-thumbnail")||t.is(".cpf-type-product-radio")||t.is(".cpf-type-product-dropdown")||t.is(".cpf-type-product-single"))&&(n=t.find(".tc-epo-element-product-container-variation-id")),n&&n.length&&(e=n)),e.find(I(e)).val()||0}function L(e){var t=e.find(o.qtySelector).last();return t.length===0&&(t=e.find(o.associateQtySelector).last()),t=n.epoAPI.applyFilter("tc_getQtyElement",t,e),t}function it(e){return n.epoAPI.applyFilter("tc_getCurrentQty",n.epoAPI.math.toFloat(L(e).val()),e)}function ze(e,t,n){w[w.length]={name:e,selector:t,func:n}}function u(e,t,s){var i,o=!0,a=!1;return e=n(e),i=e.filter(".tc-epo-field-product"),i.length&&i.data("islogicinit")===void 0&&(a=!0),e.each(function(n,r){!o&&e.has(".tc-epo-field-product").length?(a||i.is(".tcdisabled"))&&Ee(r,t,s):o=Ee(r,t,s)&&o}),o}function Ee(e,t,i){var a,r,c,l,d,u,h,m,f,p,g;return e=n(e),e.is(".cpf-element")?(a=e,e=e.find(".tmcp-field, .tmcp-fee-field")):a=e.closest(".cpf-element"),d=a.closest(".cpf-section"),h=d.closest(".tm-extra-product-options-field"),i?l=e.closest(".tmcp-ul-wrap"):l=a,e.is(".tc-epo-field-product")&&e.data("islogicinit")===void 0&&e.data("islogicinit",1),c=!e.is(".tc-epo-field-product")&&a.closest(".cpf-type-product"),c.length&&(u=c.find(o.associateQtySelector),u.length&&(n.epoAPI.math.toFloat(u.val())>0?(e.removeClass("ignore"),u.removeClass("ignore")):(e.addClass("ignore"),u.addClass("ignore"))),m=c.data("isactive"),c=c.closest(".cpf-section"),f=c.data("isactive")),m!==!1&&f!==!1&&a.data("isactive")!==!1&&d.data("isactive")!==!1?(r=e.first(),e.prop("disabled",!1),e.data("tc-state")!==void 0&&e.data("tc-state",!1),s.tm_epo_show_only_active_quantities!=="yes"?r.is(":radio, .cpf-type-radio")||r.is(":checkbox, .cpf-type-checkbox")?(e.filter(":checked").closest(".tmcp-field-wrap").find(".tm-qty").prop("disabled",!1),e.not(":checked").closest(".tmcp-field-wrap").find(".tm-qty").prop("disabled",!0)):r.is("select, .cpf-type-select, .cpf-type-selectmultiple")?r.val()?l.find(".tm-qty").prop("disabled",!1):l.find(".tm-qty").prop("disabled",!0):r.val()?l.find(".tm-qty").prop("disabled",!1):l.find(".tm-qty").prop("disabled",!0):t||a.find(".tm-quantity").trigger("showhide.cpfcustom"),r.is(".cpf-element")||(e.removeClass("tcdisabled").addClass("tcenabled"),e.is(".tmcp-upload")&&e.next(".tmcp-upload-hidden").length&&e.next(".tmcp-upload-hidden").removeClass("tcdisabled").addClass("tcenabled").prop("disabled",!1)),a.removeClass("tc-container-disabled").addClass("tc-container-enabled"),e.trigger({type:"tm-field-is-active",field:e,value:!0}),d.removeClass("section-disabled"),h.removeClass("tc-hidden"),!0):(e.is(".cpf-element")||(e.prop("disabled",!0).removeClass("tcenabled").addClass("tcdisabled"),e.data("tc-state")!==void 0&&e.data("tc-state",!0),a.find(".tm-qty").prop("disabled",!0),e.is(".tmcp-upload")&&e.next(".tmcp-upload-hidden").length&&e.next(".tmcp-upload-hidden").removeClass("tcenabled").addClass("tcdisabled").prop("disabled",!0)),a.removeClass("tc-container-enabled").addClass("tc-container-disabled"),e.trigger({type:"tm-field-is-active",field:e,value:!1}),p=d.find(".cpf-element.tc-container-enabled").length===0,p&&(d.addClass("section-disabled"),g=h.children(".cpf-section").filter(function(){return!n(this).hasClass("section-disabled")}).length===0,g&&h.addClass("tc-hidden")),!1)}function xt(e,t,s){var o,a,r=n(e),l=r.attr("data-epo_id"),d=r.attr("data-product_id"),i=n(".variations_form[data-epo_id='"+l+"'][data-product_id='"+d+"']"),c="input[name^='variation_id']",i=n.epoAPI.applyFilter("tm_variation_check_match_variationsForm",i,l,d,r);if(i.length===0)return!1;switch(a=i.find(c),a.length===0&&(c="input.variation_id",a=i.find(c),a.length===0&&(a=i.closest(".tc-epo-element-product-li-container").find(".product-variation-id"))),e!==null&&t!==null&&e!==void 0&&t!==void 0&&e!==!1&&t!==!1&&(t?t=parseInt(t,10):t=-1),o=parseInt(a.val(),10),Number.isFinite(o)||(o=0),Number.isFinite(t)||(t=0),s){case"is":return o!==""&&o===t;case"isnot":return o!==""&&o!==t;case"isempty":return o===""||o===0;case"isnotempty":return o!==""&&o!==0;case"startswith":return o.toString().startsWith(t);case"endswith":return o.toString().endsWith(t);case"greaterthan":return parseFloat(o)>parseFloat(t);case"lessthan":return parseFloat(o)<parseFloat(t);case"greaterthanequal":return parseFloat(o)>=parseFloat(t);case"lessthanequal":return parseFloat(o)<=parseFloat(t)}return!1}function C(e,t,s){if(e!==null&&t!==null)e=encodeURIComponent(e),n.qtranxj_split?t=encodeURIComponent(n.qtranxj_split(decodeURIComponent(t))[St.language]):t=encodeURIComponent(decodeURIComponent(t)),e?e=e.toLowerCase():e="",t?t=t.toLowerCase():t="";else return!1;switch(e=e.toString(),t=t.toString(),s){case"is":return e!==null&&e===t;case"isnot":return e!==null&&e!==t;case"isempty":return!(e!=="undefined"&&e!==void 0&&e!=="");case"isnotempty":return e!=="undefined"&&e!==void 0&&e!=="";case"startswith":return e.startsWith(t);case"endswith":return e.endsWith(t);case"greaterthan":return parseFloat(e)>parseFloat(t);case"lessthan":return parseFloat(e)<parseFloat(t);case"greaterthanequal":return parseFloat(e)>=parseFloat(t);case"lessthanequal":return parseFloat(e)<=parseFloat(t)}return!1}function Ct(e,t){var s,o,i,a,c=e.find(".cpf-element"),r=!1;if(e.is(".tc-hidden")){if(t==="isnotempty")return!1;if(t==="isempty")return!0}return t==="isnotempty"?s=!1:t==="isempty"&&(s=!0),n(c).each(function(e,c){var l,d="";if(c=n(c),c.is(".cpf-type-product")&&(d=":not(.tc-extra-product-options-inline .tm-epo-field)"),u(c))if(l=c.attr("class").split(" ").map(function(e){return e.indexOf("cpf-type-",0)!==-1?e:null}).filter(function(e){return e??null}),l.length>0){switch(l=l[0],l==="cpf-type-product"&&(r=!0,c.is(".cpf-type-product-mode-product")||c.is(".cpf-type-product-checkbox")||c.is(".cpf-type-product-thumbnailmultiple")?l="cpf-type-checkbox":c.is(".cpf-type-product-dropdown")?l="cpf-type-select":l="cpf-type-radio"),l){case"cpf-type-radio":i=c.find("input.tm-epo-field.tmcp-radio:checked"+d),t==="isnotempty"?(s=s||i.length>0,i.length>0&&(o=i.length)):t==="isempty"&&(s=s&&i.length===0);break;case"cpf-type-checkbox":a=c.find("input.tm-epo-field.tmcp-checkbox:checked"+d),t==="isnotempty"?(s=s||a.length>0,a.length>0&&(o=a.length)):t==="isempty"&&(s=s&&a.length===0);break;case"cpf-type-select":o=c.find("select.tm-epo-field.tmcp-select"+d).val(),o&&!r&&(o=o.slice(0,o.lastIndexOf("_")));break;case"cpf-type-selectmultiple":o=c.find("select.tm-epo-field.tmcp-selectmultiple"+d).val(),o&&!r&&o.forEach(function(e,t){o[t]=e.slice(0,e.lastIndexOf("_"))});break;default:o=c.find(".tm-epo-field"+d).val();break}Array.isArray(o)?t==="isnotempty"?s=s||o.some(function(e){return C(e,"",t)}):t==="isempty"&&(s=s&&o.every(function(e){return C(e,"",t)})):t==="isnotempty"?s=s||C(o,"",t):t==="isempty"&&(s=s&&C(o,"",t))}else s=!1}),s}function Q(e){var t,i,r,c,u,o=n(e.element),s=e.operator,d=e.value,l=!1,a="";if(!o.length)return!1;if(o.is(".cpf-section"))return Ct(o,s);if(o.is(".cpf-type-product")&&(a=":not(.tc-extra-product-options-inline .tm-epo-field)"),i=o.attr("class").split(" ").map(function(e){return e.indexOf("cpf-type-",0)!==-1?e:null}).filter(function(e){return e??null}),i.length>0){switch(i=i[0],i==="cpf-type-product"&&(l=!0,o.is(".cpf-type-product-mode-product")||o.is(".cpf-type-product-checkbox")||o.is(".cpf-type-product-thumbnailmultiple")?i="cpf-type-checkbox":o.is(".cpf-type-product-dropdown")?i="cpf-type-select":i="cpf-type-radio"),i){case"cpf-type-radio":if(c=o.find("input.tm-epo-field.tmcp-radio:checked"+a),s==="is"||s==="isnot"){if(c.length===0&&s==="is")return!1;if(c.length===0&&s==="isnot")return!0}if(s==="isnotempty")return c.length>0;if(s==="isempty")return c.length===0;t=o.find("input.tm-epo-field.tmcp-radio:checked"+a).val(),t&&!l&&(t=t.slice(0,t.lastIndexOf("_")));break;case"cpf-type-checkbox":if(r=o.find("input.tm-epo-field.tmcp-checkbox:checked"+a),s==="is"||s==="isnot")return(r.length!==0||s!=="is")&&(r.length===0&&s==="isnot"||(u=!1,r.each(function(e,o){if(t=n(o).val(),t&&!l&&(t=t.slice(0,t.lastIndexOf("_"))),C(t,d,s))u=!0;else if(s==="isnot")return u=!1,!1}),u));if(s==="isnotempty")return r.length>0;if(s==="isempty")return r.length===0;break;case"cpf-type-select":t=o.find("select.tm-epo-field.tmcp-select"+a).val(),t&&!l&&(t=t.slice(0,t.lastIndexOf("_")));break;case"cpf-type-selectmultiple":t=o.find("select.tm-epo-field.tmcp-selectmultiple"+a).val(),t&&!l&&t.forEach(function(e,n){t[n]=e.slice(0,e.lastIndexOf("_"))});break;case"cpf-type-variations":return xt(o,d,s);default:t=o.find(".tm-epo-field"+a).val();break}return Array.isArray(t)?t.some(function(e){return C(e,d,s)}):C(t,d,s)}return!1}function je(e,t){e.each(function(){var e=n(this),i=e.data("matches"),a=e.data("toggle"),r=e.data("fields"),o=[],s=!1;switch(a){case"show":s=!1;break;case"hide":s=!0;break}n.each(r,function(e,s){Array.isArray(s)&&(o[e]=0,n.each(s,function(s,i){var a=!0;t==="cpflogic"&&(a=u(n(i.element))),a&&Q(i)&&(o[e]=parseInt(o[e],10)+1)}))}),n.each(i,function(e,t){var n=parseInt(o[e],10);if(t=parseInt(t,10),n>0&&t===n)return s=!s,!1}),s?(t==="cpflogic"&&!e.data("did_initial_activation")&&re.push(function(){var t=e.find(".tm-epo-field.tcenabled");t.each(function(t,s){s=n(s),!s.data("initial_activation")&&!e.closest(".cpf-section").is(".tc-hidden")&&u(s)&&(s.trigger("tc_element_epo_rules"),s.data("initial_activation",1))}),(e.is(".cpf-element")&&t.length||e.is(".cpf-section"))&&e.data("did_initial_activation",1)}),e.removeClass("tc-hidden")):e.addClass("tc-hidden"),e.data("isactive",s),e.trigger("tc-logic")})}function x(e){var t,o,s=[];n(e).length||(e="body"),e=n(e),t=e.find(".iscpfdependson"),t.each(function(e,t){n(t).each(function(e,t){je(n(t))})}),t.each(function(e,t){n(t).each(function(e,t){je(n(t),"cpflogic")})}),t.each(function(e,t){n(t).each(function(e,t){t=n(t),t.is(".cpf-section")&&(t=t.find(".cpf-element")),t.each(function(e,t){u(n(t).find(".tm-epo-field"))})})}),re.forEach(function(e){e()}),re=[],n().selectric&&n(".tm-extra-product-options select").selectric("refresh"),setTimeout(function(){n(".tm-owl-slider").each(function(){n(this).trigger("refresh.owl.carousel")})},200),e.find(".tm-product-image:checked,select.tm-product-image").each(function(){var e=n(this);u(e)&&e.val()!==""&&s.push(e)}),s.length?s[s.length-1].trigger("tm_trigger_product_image"):(o=e.data("epo_object"),o&&o.main_product.trigger("tm_restore_product_image")),i.trigger("cpflogicrun"),i.trigger("tmlazy"),i.trigger("cpflogicdone")}n().cpfdependson||(n.fn.cpfdependson=function(e,t,s){var o=this,a=[];if(o.length===0||typeof e!="object")return;return t||(t="show"),n.each(e,function(e,t){var o,r;a[e]=0,Array.isArray(t)&&n.each(t,function(t,c){if(typeof c!="object")return!0;r=Xe(c.element),r&&r.length>0&&r.each(function(e,t){var c,l,a=n(t),r="change.cpflogic";(!o||o.closest(".tc-extra-product-options-inline").length)&&(c=".tm-product-id-"+a.closest(".tc-extra-product-options").attr("data-product-id"),l="[data-epo-id='"+a.closest(".tc-extra-product-options").attr("data-epo-id")+"']",o=n(".tc-extra-product-options"+c+l)),t&&a.length>0&&(!a.data("tmhaslogicevents")||s)&&(a.is(".tm-epo-variation-element")?(ze("found_variation.tmlogic",!1,function(){x(o),i.trigger("tm-do-epo-update")}),ze("hide_variation.tmlogic",!1,function(){x(o),i.trigger("tm-do-epo-update")})):((a.is(":text")||a.is("textarea"))&&(r="change.cpflogic input.cpflogic"),a.is(':input[type="number"]')&&(r="change.cpflogic input.cpflogic keypress.cpflogic"),a.off(r).on(r,function(){x(o)})),a.data("tmhaslogicevents",1))}),a[e]=parseInt(a[e],10)+1})}),o.each(function(){var s=n(this),o=!1;switch(s.data("matches",a).data("toggle",t).data("fields",e),t){case"show":o=!1;break;case"hide":o=!0;break}o?s.removeClass("tc-hidden"):s.addClass("tc-hidden"),s.data("isactive",o)}),o.addClass("iscpfdependson is-epo-depend").data("iscpfdependson",1),o},n.fn.run_cpfdependson=function(){x()}),n.tcepo={formSubmitEvents:{},oneOptionIsSelected:{},initialActivation:{},lateFieldsPrices:{},errorObject:{},showHideTotal:{}};function be(e){return typeof e=="object"&&"toggle"in e&&"rules"in e&&e.rules.length>0}function pe(e){return e.what&&(e.what==="all"?e.rules=[e.rules]:e.what==="any"&&(e.rules=e.rules.reduce(function(e,t){return e.push([t]),e},[])),delete e.what),e}function ne(e){var t,s,o,i,a,r,c,l,u,h,m,f,p,d=n(e),g=d.find(".cpf-section");d.is(".cpf-section")?l=!1:l=g,d.each(function(e,g){n(g).is(".cpf-section")?u=n(g):u=n(g).find(".cpf-section"),u.filter('[data-haslogic="1"]').each(function(e,u){t=n(u),i=t.data("logic"),i=pe(i),p=parseInt(t.data("haslogic"),10),c=[],h=t.parent().closest(".cpf-type-product"),p===1&&be(i)&&(n.each(i.rules,function(e,t){t&&Array.isArray(t)&&(c[e]=[],n.each(t,function(t,n){r=n.section,s=n.element,m=n.operator,f=n.value,l?h.length?(a=h.find(".cpf-section").filter("[data-uniqid='"+r+"']"),s!==r?o=a.find(".cpf-element").eq(s):o=a):(a=l.filter("[data-uniqid='"+r+"']"),s!==r?o=a.find(".cpf-element:not(.cpf-element .cpf-element)").eq(s):o=a):s!==r?o=d.find(".cpf-element").eq(s):o=a,c[e].push({element:o,operator:m,value:f})}))}),t.data("iscpfdependson")?t.cpfdependson(t.data("cpfdependson-fields"),i.toggle,!0):(t.data("cpfdependson-fields",c),t.cpfdependson(c,i.toggle)))})})}function se(e){var t,s,o,i,a,r,l,d,u,h,m,c=n(e),f=c.find(".cpf-section").not(".cpf-type-product .cpf-section");c.is(".cpf-section")?l=!1:l=f,c.find('.cpf-element[data-haslogic="1"]').each(function(e,f){var p=[];t=n(f),a=t.data("logic"),a=pe(a),u=parseInt(t.data("haslogic"),10),d=t.parent().closest(".cpf-type-product"),u===1&&be(a)&&(n.each(a.rules,function(e,t){t&&Array.isArray(t)&&(p[e]=[],n.each(t,function(t,n){r=n.section,s=n.element,h=n.operator,m=n.value,l?d.length?(i=d.find(".cpf-section").filter("[data-uniqid='"+r+"']"),s!==r?o=i.find(".cpf-element").eq(s):o=i):(i=l.filter("[data-uniqid='"+r+"']"),s!==r?o=i.find(".cpf-element:not(.cpf-element .cpf-element)").eq(s):o=i):s!==r?o=c.find(".cpf-element").eq(s):o=i,p[e].push({element:o,operator:h,value:m})}))}),t.data("iscpfdependson")?t.cpfdependson(t.data("cpfdependson-fields"),a.toggle,!0):(t.data("cpfdependson-fields",p),t.cpfdependson(p,a.toggle)))})}function D(e,t,n){var s,o,i,a;return t&&(s=t.attr("data-taxable"),o=t.attr("data-tax-rate"),i=t.attr("data-tax-display-mode"),a=t.attr("data-prices-include-tax"),(n||s&&i==="incl"&&a!=="1")&&(e=parseFloat(e)/(1+o/100))),e}function he(e,t,n){var s,o,i,a;return t&&(s=t.attr("data-taxable"),o=t.attr("data-tax-rate"),i=t.attr("data-tax-display-mode"),a=t.attr("data-prices-include-tax"),(n||s&&i!=="incl"&&a==="1")&&(e=parseFloat(e)*(1+o/100))),e}function Se(e,t,n){var s,o,i;if(t&&(i=t.attr("data-taxable"),s=t.attr("data-tax-display-mode"),o=t.attr("data-prices-include-tax"),i)){if(n&&n.tc_tax_rate&&String(n.tc_tax_rate)==="0")return e;o==="1"?s==="incl"?n.tc_base_taxes_of_one!==n.tc_modded_taxes_of_one&&(e=parseFloat((1-n.tc_taxes_of_one)*e*(1/(1-n.tc_base_taxes_of_one)))):e=he(e,t):o!=="1"&&s==="incl"&&(e=D(e,t))}return e}function d(e,t,n,o,i){var l,a="",r="";return n||(e=c(e,t,i,void 0,!0)),l=Math.abs(e),t&&o&&(a=t.attr("data-tax-string")),a===void 0&&(a=""),e<0&&(r=s.minus_sign+" "),le(l,r,a)}function v(e,t,n,s){return s.attr("data-tax-display-mode")==="excl"?(n[e]=n[e].replace(/{price_excluding_tax}/g,d(n[t],s,!0,!1)),n[e]=n[e].replace(/{price_including_tax}/g,d(he(n[t],s,!0),s,!0,!1))):(n[e]=n[e].replace(/{price_including_tax}/g,d(n[t],s,!0,!1)),n[e]=n[e].replace(/{price_excluding_tax}/g,d(D(n[t],s,!0),s,!0,!1))),n}function P(e,t,n,s,o){M(e,t,n,s,o,!0)}function M(e,t,i,a,r,c){var d,u,h,m,f,l=n(e);if(l.length===0)return;if(m=l.closest(".tmcp-field-wrap"),h=l.closest(".tc-price-wrap"),d=m.find(".tm-epo-field"),!c&&d.attr("data-no-price-change")==="1"&&d.data("price-changed"))return;t=n.epoAPI.applyFilter("tc_adjust_update_price_price",t),i=n.epoAPI.applyFilter("tc_adjust_update_price_formated_price",i,t),a=n.epoAPI.applyFilter("tc_adjust_update_price_original_price",a),r=n.epoAPI.applyFilter("tc_adjust_update_price_original_formated_price",r,a),Number.isFinite(parseFloat(a))||(a=0),Number.isFinite(parseFloat(t))||(t=0),u=m.find(".before-amount,.after-amount"),f={price:i,original_price:r},s.tm_epo_auto_hide_price_if_zero==="yes"&&(n.tmempty(t)===!1||s.tm_epo_no_hide_price_if_original_not_zero==="yes"&&n.tmempty(t)===!0&&n.tmempty(a)===!1)||s.tm_epo_auto_hide_price_if_zero!=="yes"?n.tmempty(t)===!0&&d.attr("data-no-price")==="1"||!c&&d.length>0&&(d.attr("data-no-price")==="1"||d.attr("data-type")==="variable"&&!d.data("price"))?(h.addClass("tm-hidden"),l.addClass("tm-hidden"),l.empty(),u.addClass("tm-hidden")):(a&&a!==void 0&&parseFloat(a)!==parseFloat(t)?l.html(n.epoAPI.template.html(o.templateEngine.sale_price,{price:f})):l.html(n.epoAPI.template.html(o.templateEngine.price,{price:f})),h.removeClass("tm-hidden"),l.removeClass("tm-hidden"),u.removeClass("tm-hidden")):(h.addClass("tm-hidden"),l.addClass("tm-hidden"),l.empty(),u.addClass("tm-hidden"))}function Dt(e,t){var s={};return t.thisForm&&(e=t.thisForm),e.find(".variations select, .tc-epo-variable-product-selector").each(function(){var e,t;typeof n(this).data("attribute_name")!="undefined"?e=n(this).data("attribute_name"):e=n(this).attr("name"),t=n(this).val(),s[e]=t}),s}function ie(e,t,s){var o=[],r=Dt(e,s),a=!0,i=e.find(I(e)).val(),i=i!=="0"&&i!==""||e.find(".cpf-type-variations").find(".tm-epo-variation-element:checked").length>0||e.find(".cpf-type-variations").find('.tm-epo-variation-element option[value!=""]:selected');if(!i)return;e.find(".cpf-type-variations").each(function(s,i){var c,l,a=n(i).find(".tm-epo-variation-element"),d=!1;o[s]=!0,a.is("select")?(c=n.epoAPI.dom.id(a.attr("data-tm-for-variation")),l=a.val(),l&&(o[s]=!1),a.children("option").each(function(t,s){d=!1,e.find("[data-attribute_name='attribute_"+c+"']").children("option").each(function(){if(n(this).attr("value")===n(s).attr("value"))return d=!0,!1}),d?n(s).prop("disabled",!1).show():n(s).prop("disabled",!0).hide()})):a.each(function(e,i){var h,m,p,a=n(i),d=a.closest("li"),u=d.find(".tm-epo-variation-element"),f=n.extend(!0,{},r);c=a.attr("data-tm-for-variation"),l=a.val(),a.is(":checked")&&(o[s]=!1),f["attribute_"+c]=l,p=n.fn.tm_find_matching_variations(t,f),h=p.shift(),m=h&&"is_in_stock"in h&&h.is_in_stock,m?(a.prop("disabled",!1).removeClass("tm-disabled"),d.removeClass("pointereventsoff tm-attribute-disabled").fadeTo("fast",1,function(){n(this).css("opacity","")}),u.prop("disabled",!1),u.removeAttr("data-tm-disabled")):(!u.is(":checked")&&!m?d.addClass("pointereventsoff"):d.removeClass("pointereventsoff"),a.attr("disabled","disabled").addClass("tm-disabled"),u.attr("disabled","disabled"),u.attr("data-tm-disabled","disabled"),d.addClass("tm-attribute-disabled").fadeTo("fast",.5))})}),o&&(o.shift(),n.each(o,function(e,t){if(t===!1)return a=!1,!1}),a&&e.find(".cpf-type-variations").first().each(function(e,t){var s,o,i=n(t).find(".tm-epo-variation-element");i.is("select")||i.each(function(e,t){t=n(t),s=t.closest("li"),o=s.find(".tm-epo-variation-element"),t.prop("disabled",!1).removeClass("tm-disabled"),s.removeClass("tm-attribute-disabled").stop().css("opacity",""),o.prop("disabled",!1),o.removeAttr("data-tm-disabled")})}))}function me(t,i){var c,a=t.data("product_variations"),r=parseInt(t.data("product_id"),10),l=t.data("globalVariationObject")||!1;if(r||(r=t.data("tc_product_id")),!r&&t.is(o.compositeSelector)&&(c=t.find(".component_options").data("options_data"),r=c[0].option_id,a||(a=t.find(".details.component_data").data("product_variations"))),i.is_associated||(!a&&e.product_variations&&e.product_variations.product_id&&(a=e.product_variations.product_id),!a&&e.product_variations&&(a=e.product_variations),!a&&e["product_variations_"+r]&&(a=e["product_variations_"+r])),!a){l?ie(t,l.variations,i):(c={action:"woocommerce_tm_get_variations_array",post_id:r},n.post(s.ajax_url,c,function(e){l=e,t.data("globalVariationObject",e),ie(t,l.variations,i)},"json"));return}ie(t,a,i)}function Tt(e,t){var s,o;return t!==void 0&&(e=n(e),s=e.find(".tm-epo-variation-element").first(),o=s.closest(".tm-epo-variation-section"),s.length?(o.find(".tm-stock").remove(),o.append('<div class="tm-stock">'+t+"</div>"),!0):(e.find(".tm-stock").remove(),e.find(".variations").after('<div class="tm-stock">'+t+"</div>"),!0))}function te(e,t){var n;if(s.tm_epo_global_move_out_of_stock==="no")return;n=e.find(".woocommerce-variation-availability").last(),n.length||(n=e.find(".stock").last()),n.length?(t.find(".tm-stock").remove(),Tt(t,n.prop("outerHTML"))&&n.remove()):t.find(".tm-stock").remove()}function Ft(e,t,n){var i,s="";return n&&(s=s+"[value='"+n+"']"),t||(t=e),i=t.find(o.addToCartSelector+s),i.length===0&&(i=t.find(o.tcAddToCartSelector+s)),i.last()}function ve(e,t,n,s){return n||(n="form"),Ft(e,t,s).closest(n)}function ee(e,t,n,s){return ve(e,t,n,s)}function k(e){var t=n.epoAPI.applyFilter("tcGetNativePricesBlockSelector",".single_variation .price",e);return n(e).find(t).not(".tc-price")}function kt(){l.on("click.cpfurl change.cpfurl tmredirect",".tc-url-container .tmcp-radio, .tc-url-container .tmcp-radio+label",function(t){var s=n(this).attr("data-url");s&&e.location!==s&&(t.preventDefault(),e.location=s)}),l.on("change.cpfurl tmredirect",".tc-url-container .tmcp-select",function(t){var s=n(this).children("option:selected").attr("data-url");s&&e.location!==s&&(t.preventDefault(),e.location=s)})}function Et(e,t,s){n.tcFloatingTotalsBox(e,t,s)}function we(e,t){var n,a,r=t.showHideCart;!t.is_associated&&r!==void 0&&(s.tm_epo_hide_add_cart_button==="yes"||s.tm_epo_hide_all_add_cart_button==="yes"||s.tm_epo_hide_required_add_cart_button==="yes")&&(n=e.find(o.addToCartButtonSelector).first(),a=e.find(o.qtySelector).first(),r?(n.removeClass("tc-hide-add-to-cart-button"),a.removeClass("tc-hide-add-to-cart-button")):(n.addClass("tc-hide-add-to-cart-button"),a.addClass("tc-hide-add-to-cart-button")),i.trigger("epoShowHideCart",{main_product:e,currentEpoObject:t,showHideCart:r,button:n,qty:a}))}function Oe(e,t,o){var i,a,c,d,l=!0,r=!0,u=n.tcepo.oneOptionIsSelected[t];return e.is_associated?e:(typeof o=="object"?(a=o.has_epo,d=o.this_epo_container,a=a&&(d.find(".tmcp-fee-field").length||d.find(".tmcp-field").not(".cpf-type-variations .tmcp-field").length)):a=o,e.showHideCart=void 0,e.showHideTotal=void 0,a&&(s.tm_epo_hide_add_cart_button==="yes"||s.tm_epo_hide_all_add_cart_button==="yes"||s.tm_epo_hide_required_add_cart_button==="yes"||s.tm_epo_hide_totals_until_any==="yes"||s.tm_epo_hide_totals_until_all_required==="yes"||s.tm_epo_hide_totals_until_all==="yes")&&(s.tm_epo_hide_add_cart_button==="yes"&&(l=u),s.tm_epo_hide_totals_until_any==="yes"&&(r=u),(s.tm_epo_hide_required_add_cart_button==="yes"||s.tm_epo_hide_totals_until_all_required==="yes")&&(c=e.this_epo_container.find(".cpf-element").not(".cpf-type-variations").filter(".tc-container-enabled.tc-is-required"),i=c.toArray().every(function(e){var t,s,a,r,o="",i=!1;if(e=n(e),e.is(".cpf-type-product")&&(o=":not(.tc-extra-product-options-inline .tm-epo-field)"),s=e.attr("class").split(" ").map(function(e){return e.indexOf("cpf-type-",0)!==-1?e:null}).filter(function(e){return e??null}),s.length>0){switch(s=s[0],s==="cpf-type-product"&&(i=!0,e.is(".cpf-type-product-mode-product")||e.is(".cpf-type-product-checkbox")||e.is(".cpf-type-product-thumbnailmultiple")?s="cpf-type-checkbox":e.is(".cpf-type-product-dropdown")?s="cpf-type-select":s="cpf-type-radio"),s){case"cpf-type-radio":return a=e.find("input.tm-epo-field.tmcp-radio:checked"+o),a.length>0;case"cpf-type-checkbox":return r=e.find("input.tm-epo-field.tmcp-checkbox:checked"+o),r.length>0;case"cpf-type-select":t=e.find("select.tm-epo-field.tmcp-select"+o).val(),t&&!i&&(t=t.slice(0,t.lastIndexOf("_")));break;case"cpf-type-selectmultiple":t=e.find("select.tm-epo-field.tmcp-selectmultiple"+o).val(),t&&!i&&t.forEach(function(e,n){t[n]=e.slice(0,e.lastIndexOf("_"))});break;default:t=e.find(".tm-epo-field"+o).val();break}return Array.isArray(t)?t.some(function(e){return e!==""}):t!==""}return!1}),s.tm_epo_hide_required_add_cart_button==="yes"&&(l=i),s.tm_epo_hide_totals_until_all_required==="yes"&&(r=i)),(s.tm_epo_hide_all_add_cart_button==="yes"||s.tm_epo_hide_totals_until_all==="yes")&&(c=e.this_epo_container.find(".cpf-element").not(".cpf-type-variations").filter(".tc-container-enabled"),i=c.toArray().every(function(e){var t,s,a,r,o="",i=!1;if(e=n(e),e.is(".cpf-type-product")&&(o=":not(.tc-extra-product-options-inline .tm-epo-field)"),s=e.attr("class").split(" ").map(function(e){return e.indexOf("cpf-type-",0)!==-1?e:null}).filter(function(e){return e??null}),s.length>0){switch(s=s[0],s==="cpf-type-product"&&(i=!0,e.is(".cpf-type-product-mode-product")||e.is(".cpf-type-product-checkbox")||e.is(".cpf-type-product-thumbnailmultiple")?s="cpf-type-checkbox":e.is(".cpf-type-product-dropdown")?s="cpf-type-select":s="cpf-type-radio"),s){case"cpf-type-radio":return a=e.find("input.tm-epo-field.tmcp-radio:checked"+o),a.length>0;case"cpf-type-checkbox":return r=e.find("input.tm-epo-field.tmcp-checkbox:checked"+o),r.length>0;case"cpf-type-select":t=e.find("select.tm-epo-field.tmcp-select"+o).val(),t&&!i&&(t=t.slice(0,t.lastIndexOf("_")));break;case"cpf-type-selectmultiple":t=e.find("select.tm-epo-field.tmcp-selectmultiple"+o).val(),t&&!i&&t.forEach(function(e,n){t[n]=e.slice(0,e.lastIndexOf("_"))});break;default:t=e.find(".tm-epo-field"+o).val();break}return Array.isArray(t)?t.some(function(e){return e!==""}):t!==""}return!1}),s.tm_epo_hide_all_add_cart_button==="yes"&&(l=i),s.tm_epo_hide_totals_until_all==="yes"&&(r=i)),e.showHideCart=l,e.showHideTotal=r,n.tcepo.showHideTotal[t]=r),e)}function B(t,o){var i,a,c,l,r=n.tcepo.errorObject[o]||t;r&&(s.tm_epo_disable_error_scroll!=="yes"&&(i=r.closest(".cpf-section"),l=i.find(".tm-section-link"),a=r.closest(".cpf-element"),i.find(".tm-toggle").length&&i.find(".tm-toggle").trigger("openwrap.tmtoggle"),e.tc_validation_offset===void 0&&(e.tc_validation_offset=-100),i.is(".section_popup")?(S.tcScrollTo(l,300,e.tc_validation_offset),l.trigger("click.tmsectionpoplink")):i.is(".tm-owl-slider-section")?(c=r.closest(".owl-item").index(),i.find(".tcowl-carousel").trigger("to.owl.carousel",[c,100]),setTimeout(function(){i.find(".tcowl-carousel").trigger("refresh.owl.carousel"),a.length>0&&S.tcScrollTo(a,300,e.tc_validation_offset)},200)):i.is(".tc-tabs-section")?(c=r.closest(".tc-tab-slide").index(),r.closest(".tc-tabs").find('.tc-tab-headers .tc-tab-header .tab-header[data-id="tc-tab-slide'+c+'"]').trigger("click.tmtabs"),setTimeout(function(){a.length>0&&S.tcScrollTo(a,300,e.tc_validation_offset)},200)):a.length>0&&S.tcScrollTo(a,300,e.tc_validation_offset)),t||(n.tcepo.errorObject[o]=!1))}function $(e,t){var o,i,r,a=parseInt(e.attr("data-limit"),10),s=!1;return!(a>0&&(s=0,e.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){r=n(this),i=r.closest("li.tmcp-field-wrap").find("input.tm-qty"),i.length>0?(o=parseInt(i.val(),10),o<=0&&(o=1),s=parseInt(s,10)+o):s=parseInt(s,10)+1}),s>a))||(t&&e.prop("checked","").trigger("change"),!1)}function q(e,t){var o,i,r,a=parseInt(e.attr("data-exactlimit"),10),s=!1;return!(a>0&&(s=0,e.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){r=n(this),i=r.closest("li.tmcp-field-wrap").find("input.tm-qty"),i.length>0?(o=parseInt(i.val(),10),o<=0&&(o=1),s=parseInt(s,10)+o):s=parseInt(s,10)+1}),s>a))||(t&&e.prop("checked","").trigger("change"),!1)}function vt(e,t,i){var a,r,c,l,d,h,m,p,v,b,g=!0,f=!1;return e.each(function(){a=n(this),l=a.find("[type='checkbox'][data-limit]"),l.length&&u(l)&&(c=parseInt(l.attr("data-limit"),10),r=0,a.find("input.tm-epo-field[type='checkbox']:checked").each(function(){v=n(this),p=v.closest("li.tmcp-field-wrap").find("input.tm-qty"),p.length>0?(d=parseInt(p.val(),10),d<=0&&(d=1),r=parseInt(r,10)+d):r=parseInt(r,10)+1}),b=a.closest(".cpf-element"),h=b.find("div.tm-error-min"),c<r?(g=!1,f=a,c===1?m=s.tm_epo_global_validator_messages.epolimitsingle.replace("{0}",c):m=s.tm_epo_global_validator_messages.epolimit.replace("{0}",c),h.length&&h.remove(),s.tm_epo_global_error_label_placement==="before"?a.closest(".tc-element-container").before('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+m+"</div>"):a.closest(".tc-element-container").after('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+m+"</div>"),t.find(o.addToCartButtonSelector).first().removeClass("disabled loading fpd-disabled").prop("disabled",!1)):h.remove())}),f&&(n.tcepo.errorObject[i]=f),g}function Ge(e,t,s){n.tcepo.formSubmitEvents[s][n.tcepo.formSubmitEvents[s].length]={trigger:function(){return vt(e,t,s)},on_true:function(){return!0},on_false:function(){return B(n(e).find(".tm-epo-field").first(),s),!0}}}function Ye(e,t,i){var a,r,c,l,d,h,m,p,v,b,g=!0,f=!1;return e.each(function(){a=n(this),l=a.find("[type='checkbox'][data-exactlimit]"),l.length&&u(l)&&(c=parseInt(l.attr("data-exactlimit"),10),r=0,a.find("input.tm-epo-field[type='checkbox']:checked").each(function(){v=n(this),p=v.closest("li.tmcp-field-wrap").find("input.tm-qty"),p.length>0?(d=parseInt(p.val(),10),d<=0&&(d=1),r=parseInt(r,10)+d):r=parseInt(r,10)+1}),b=a.closest(".cpf-element"),h=b.find("div.tm-error-min"),c!==r?(g=!1,f=a,c===1?m=s.tm_epo_global_validator_messages.epoexactsingle.replace("{0}",c):m=s.tm_epo_global_validator_messages.epoexact.replace("{0}",c),h.length&&h.remove(),s.tm_epo_global_error_label_placement==="before"?a.closest(".tc-element-container").before('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+m+"</div>"):a.closest(".tc-element-container").after('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+m+"</div>"),t.find(o.addToCartButtonSelector).first().removeClass("disabled loading fpd-disabled").prop("disabled",!1)):h.remove())}),f&&(n.tcepo.errorObject[i]=f),g}function ht(e,t,s){n.tcepo.formSubmitEvents[s][n.tcepo.formSubmitEvents[s].length]={trigger:function(){return Ye(e,t,s)},on_true:function(){return!0},on_false:function(){return B(n(e).find(".tm-epo-field").first(),s),!0}}}function lt(e,t){var o,i,a,r,c,l,h,f,p,m=!0,d=!1;return e.each(function(){var e;o=n(this),e=o.find("[type='checkbox'][data-minimumlimit]"),e.length&&u(e)&&(a=parseInt(e.attr("data-minimumlimit"),10),i=0,o.find("input.tm-epo-field[type='checkbox']:checked").each(function(){f=n(this),h=f.closest("li.tmcp-field-wrap").find("input.tm-qty"),h.length>0?(r=parseInt(h.val(),10),r<=0&&(r=1),i=parseInt(i,10)+r):i=parseInt(i,10)+1}),p=o.closest(".cpf-element"),c=p.find("div.tm-error-min"),a>i?(m=!1,d=o,a===1?l=s.tm_epo_global_validator_messages.epominsingle.replace("{0}",a):l=s.tm_epo_global_validator_messages.epomin.replace("{0}",a),c.length&&c.remove(),s.tm_epo_global_error_label_placement==="before"?o.closest(".tc-element-container").before('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+l+"</div>"):o.closest(".tc-element-container").after('<div class="tm-error-min tm-error tc-cell tcwidth tcwidth-100">'+l+"</div>")):c.remove())}),d&&(n.tcepo.errorObject[t]=d),m}function rt(e,t){n.tcepo.formSubmitEvents[t][n.tcepo.formSubmitEvents[t].length]={trigger:function(){return lt(e,t)},on_true:function(){return!0},on_false:function(){return B(!1,t),!0}}}function U(e){return e===null?0:(typeof e=="object"&&(e=e[0]),Number.isFinite(parseFloat(e))||(e=0),e)}function a(e,t,s,o){return e=U(e),s&&(e=n.epoAPI.applyFilter("tc_apply_dpd",e,t,s,o)),e}function Z(e,t){var s=0;return e.length>0&&(s=e.data("regular-price")),s=n.epoAPI.applyFilter("tc_calculate_product_regular_price",s,e),!(t&&s===!1)&&(s=parseFloat(s),Number.isFinite(s)||(s=0),s)}function X(e,t){var s=0;return e.length>0&&(s=e.data("price")),s=n.epoAPI.applyFilter("tc_calculate_product_price",s,e),!(t&&s===!1)&&(s=parseFloat(s),Number.isFinite(s)||(s=0),s)}function Re(e,t,a,c,l,d,u,h){var p,g,v,y,_,x,E,k,A,S,F,D,N,L,R,m=e.toString(),f=0,T=0,M=t.closest(".cpf-element").attr("data-uniqid"),w=t.closest(".tmcp-ul-wrap"),O=a.this_epo_totals_container.data("totalsHolder_tc_totals_ob"),z=w.find(".tmcp-field, .tmcp-fee-field, .tmcp-sub-fee-field").filter(":checked").index(t),j=w.find(".tmcp-field, .tmcp-fee-field, .tmcp-sub-fee-field").index(t),P=a.is_associated?a.this_epo_container:a.this_epo_container.not(o.epoSelector+" "+o.associatedEpoSelector),C=n.epoAPI.util.parseJSON(s.tm_epo_math)||{};z===-1&&!t.is(".tmcp-checkbox, .tmcp-radio")&&(z=0),j===-1&&!t.is(".tmcp-checkbox, .tmcp-radio")&&(j=0),!t.is(".tcdisabled")&&!c&&!t.data("addedtcEpoBeforeOptionPriceCalculation")&&(i.on("tcEpoBeforeOptionPriceCalculation.math"+M,function(){b(a,t,void 0,void 0,void 0,!0)}),i.on("tcEpoAfterNormalOptionPriceCalculation.math"+M,function(){t.data("fetchOptionPrices",!1),t.data("fetchOptionPrices-forced",!1),t.data("fetchOptionPrices-fee",!1),t.data("fetchOptionPrices-fee-forced",!1),t.data("fetchOptionPrices-sub-fee",!1),t.data("fetchOptionPrices-sub-fee-forced",!1)}),t.data("addedtcEpoBeforeOptionPriceCalculation",1)),t.is(".tmcp-field")?t.data("fetchOptionPrices")?(v=t.data("fetchOptionPrices"),g=t.data("fetchOptionPrices-forced")):(v=r(a,w,".tmcp-field",0,0,[],!0),g=r(a,w,".tmcp-field",0,0,[],!0,!0),t.data("fetchOptionPrices",v),t.data("fetchOptionPrices-forced",g)):t.is(".tmcp-fee-field")?t.data("fetchOptionPrices-fee")?(v=t.data("fetchOptionPrices-fee"),g=t.data("fetchOptionPrices-fee-forced")):(v=r(a,w,".tmcp-fee-field",0,0,[],!0),g=r(a,w,".tmcp-fee-field",0,0,[],!0,!0),t.data("fetchOptionPrices-fee",v),t.data("fetchOptionPrices-fee-forced",g)):t.is(".tmcp-sub-fee-field")&&(t.data("fetchOptionPrices-sub-fee")?(v=t.data("fetchOptionPrices-sub-fee"),g=t.data("fetchOptionPrices-sub-fee-forced")):(v=r(a,w,".tmcp-sub-fee-field",0,0,[],!0),g=r(a,w,".tmcp-sub-fee-field",0,0,[],!0,!0),t.data("fetchOptionPrices-sub-fee",v),t.data("fetchOptionPrices-sub-fee-forced",g))),Object.keys(C).forEach(function(e){var t,s;C[e].name!==""&&C[e].value!==""&&(t=C[e].name,s=C[e].value,t.startsWith("{")?m=m.replace(t,s):C[e].name.isNumeric()?m=m.replace("{"+t+"}",s):(t=new RegExp("{"+t+"}","g"),s.startsWith("{")?m=m.replace(t,s):m=m.replace(t,n.epoAPI.math.unformat(s.replace(",",".")))))}),O!==void 0?(m=m.replace(/{quantity}/g,n.epoAPI.math.unformat(O.qty)),l&&O.original_product_price!==void 0?y=n.epoAPI.math.unformat(O.original_product_price):y=n.epoAPI.math.unformat(O.product_price),O.dynamic_product_price!==void 0?A=n.epoAPI.math.unformat(O.dynamic_product_price):A=0):(m=m.replace(/{quantity}/g,0),y=0,A=0),y=n.epoAPI.math.toFloat(y),m=m.replace(/{product_price}/g,y),m=m.replace(/{dynamic_product_price}/g,A),d||(d=0),d=n.epoAPI.math.toFloat(d),u||(u=0),u=n.epoAPI.math.toFloat(u),m=m.replace(/{options_total}/g,d),m=m.replace(/{product_price_plus_options_total}/g,y+d),m=m.replace(/{cumulative_total}/g,u),m=m.replace(/{product_price_plus_cumulative_total}/g,y+u),g.floatingBoxData!==void 0&&g.floatingBoxData[j]!==void 0?(g.floatingBoxData[j].input_type==="number"||g.floatingBoxData[j].input_type==="hidden"?m=m.replace(/{this.value}/g,n.epoAPI.math.toFloat(n.epoAPI.math.unformat(g.floatingBoxData[j].valueText))):m=m.replace(/{this.value}/g,n.epoAPI.math.toFloat(n.epoAPI.math.unformat(g.floatingBoxData[j].valueText,o.localDecimalSeparator))),m=m.replace(/{this.rawvalue}/g,g.floatingBoxData[j].valueText),m=m.replace(/{this.text}/g,g.floatingBoxData[j].valueText),m=m.replace(/{this.value.length}/g,g.floatingBoxData[j].valueText.length)):m=m.replace(/{this.value}/g,0).replace(/{this.rawvalue}/g,"").replace(/{this.text}/g,"").replace(/{this.value.length}/g,0),m=m.replace(/{this.count}/g,v.floatingBoxData.length).replace(/{this.count.quantity}/g,v.floatingBoxData.map(function(e){return e.quantity}).reduce(function(e,t){return n.epoAPI.math.toFloat(e)+n.epoAPI.math.toFloat(t)},0)).replace(/{this.quantity}/g,t.data("tm-quantity")),m.match(/\{(\s)*?field\.([^}]*)}/)&&(D=m.match(/\{(\s)*?field\.([^}]*)}/g),D.forEach(function(e){if(_=e.match(/\{(\s)*?field\.([^}]*)}/),void 0!==_[2]&&"string"==typeof _[2]&&(S=_[2].indexOf(".",_[2].indexOf(".")+1),S!==-1&&(N=_[2].substring(0,S),p=_[2].substring(S+1),n.inArray(p,["price","value","value.length","rawvalue","text","text.length","quantity","count","count.quantity"])!==-1))){if(x=P.find("[data-uniqid='"+n.epoAPI.util.escapeSelector(N)+"']"),x.length){{switch(F=x.find(".tmcp-field, .tmcp-fee-field, .tmcp-sub-fee-field"),E=F.first(),!t.is(".tcdisabled")&&!c&&!t.data("addedfieldtcEpoBeforeOptionPriceCalculation")&&(i.on("tcEpoBeforeOptionPriceCalculation.math"+M,function(){b(a,t,void 0,void 0,void 0,!0),t.trigger("tm-math-select-change-html-all")}),t.data("addedfieldtcEpoBeforeOptionPriceCalculation",1)),f=0,p){case"text":case"rawvalue":f="";break}if(x.is(".tc-container-enabled")){switch(h||F.toArray().forEach(function(e){e=n(e),t.attr("id")!==e.attr("id")&&(t.is(".tmcp-dynamic")||e.is(".tmcp-dynamic"))&&b(a,e,void 0,void 0,void 0,!0,void 0,void 0,!0),!c&&!e.data("addedmathevent")&&(e.on("input.mathevent",function(){t.is(".tcdisabled")||t.trigger("change.cpf",{calculateMatcPrice:1})}),e.data("addedmathevent",1))}),E.is(".tmcp-field")?f=r(a,x,".tmcp-field",0,0,[],!0,void 0,void 0,!0,void 0,void 0,!0):E.is(".tmcp-fee-field")?f=r(a,x,".tmcp-fee-field",0,0,[],!0,void 0,void 0,!0,void 0,void 0,!0):E.is(".tmcp-sub-fee-field")&&(f=r(a,x,".tmcp-sub-fee-field",0,0,[],!0,void 0,void 0,!0,void 0,void 0,!0)),p){case"price":f=f.total,t.is(".tmcp-dynamic")&&(L=J(a,E,"price"),R=J(a,E,"price_type"),"math"===R&&L.includes("{dynamic_product_price}")&&(f=0));break;case"value":case"text":case"rawvalue":f.floatingBoxData&&(f=f.floatingBoxData.map(function(e){return e.input_type==="number"||e.input_type==="hidden"?p==="text"||p==="rawvalue"?e.valueText:n.epoAPI.math.unformat(e.valueText):p==="text"||p==="rawvalue"?e.valueText:n.epoAPI.math.unformat(e.valueText,o.localInputDecimalSeparator)}).reduce(function(e,t){return p==="text"||p==="rawvalue"?e+t:n.epoAPI.math.toFloat(e)+n.epoAPI.math.toFloat(t)},p==="text"||p==="rawvalue"?"":0),(p==="text"||p==="rawvalue")&&(f===""?f="''":f.toString().isNumeric()||(f="'"+f.replace("'","\\'")+"'")));break;case"value.length":case"text.length":f.floatingBoxData&&(f=f.floatingBoxData.map(function(e){return e.valueText}).reduce(function(e,t){return n.epoAPI.math.toFloat(e)+t.length},0));break;case"quantity":case"count.quantity":f.floatingBoxData&&(f=f.floatingBoxData.map(function(e){return e.quantity}).reduce(function(e,t){return n.epoAPI.math.toFloat(e)+n.epoAPI.math.toFloat(t)},0));break;case"count":f.floatingBoxData&&(f=f.floatingBoxData.length);break}p!=="text"&&p!=="rawvalue"&&(f=n.epoAPI.math.toFloat(f),Number.isFinite(f)||(f=0))}}}else switch(f=0,p){case"text":case"rawvalue":f="";break}k=new RegExp(_[0]),p==="text"||p==="rawvalue"?m=f===""?m.replace(k,"''"):m.replace(k,f):m=Number.isFinite(f)?m.replace(k,f):m.replace(k,"'"+f.replace("'","\\'")+"'")}}));try{T=Ot.evaluate(m)}catch{T=0}return T}function J(e,t,s){var o,i,a,r,c,d,u,h,l=n(t),m=l,f=e.main_cart,p="input[name^='variation_id']";return f.find("input.variation_id").length>0&&(p="input.variation_id"),o=f.find(p).val(),o||(o=0),l.is("select")&&(m=l.find("option:selected")),r=n.epoAPI.util.parseJSON(m.attr("data-rules")),i=n.epoAPI.util.parseJSON(m.attr("data-rulestype")),a="",typeof r=="object"?(o in r?c=r[o]:(h=n.epoAPI.util.parseJSON(l.closest(".tmcp-ul-wrap").attr("data-rules")),typeof h=="object"?o in h?c=h[o]:c=r[0]:c=r[0]),typeof i=="object"?o in i?a=i[o]:(d=n.epoAPI.util.parseJSON(l.closest(".tmcp-ul-wrap").attr("data-rulestype")),typeof d=="object"?o in d?a=d[o]:a=i[0]:a=i[0]):(i=n.epoAPI.util.parseJSON(l.closest(".tmcp-ul-wrap").attr("data-ulestype")),typeof i=="object"&&(o in i?a=i[o]:a=i[0]))):(u=l.closest(".tmcp-ul-wrap"),r=n.epoAPI.util.parseJSON(u.attr("data-rules")),typeof r=="object"&&(o in r?c=r[o]:c=r[0],typeof i=="object"?o in i?a=i[o]:(d=n.epoAPI.util.parseJSON(u.attr("data-rulestype")),typeof d=="object"?o in d?a=d[o]:a=i[0]:a=i[0]):(i=n.epoAPI.util.parseJSON(u.attr("data-rulestype")),typeof i=="object"&&(o in i?a=i[o]:a=i[0])))),typeof c=="object"&&(c=c[0]),typeof a=="object"&&(a=a[0]),l.is(".tmcp-fee-field")&&n.inArray(a,["fee","stepfee","currentstepfee"])!==-1&&(a=""),s==="price"?c:a}function O(e){for(var n,t=new RegExp(/[\p{L}\d!@#$%^&*()_+={[}\]|\\"':;?/>.<,-]+/,"gu"),s=0;(n=t.exec(e))!==null;)n.index===t.lastIndex&&t.lastIndex++,s=s+n.length;return s}function b(e,t,o,i,r,l,d,u,m){var f,p,g,v,j,y,_,w,x,C,E,k,A,S,F,T,z,D,N,L,R,P,H,I,B,V,$,W,ee,Q,J,b=n(t),te=b,Y=b.is(".tmcp-range"),se=e.main_product,ne=e.epoEventId,G=!0,q=0,K=0;if(b.data("associated_price_set"))return;if(o?(F=o.cart,w=o.current_variation,z=o.bundleid,v=o.epoTotalsContainer,E=o.product_price,S=o.product_original_price,j=o.apply_dpd,G=o.per_product_pricing):(F=e.main_cart,F.data("per_product_pricing")!==void 0&&(G=F.data("per_product_pricing")),Q="input[name^='variation_id']",F.find("input.variation_id").length>0&&(Q="input.variation_id"),w=F.find(Q).val(),z=n.epoAPI.applyFilter("tc_get_bundleid",F.attr("data-product_id"),F,e),w||(w=0),v=n.epoAPI.applyFilter("tc_get_totals_container",e.this_epo_totals_container,b,se,z),E=X(v),S=Z(v),j=v.data("fields-price-rules")),E=n.epoAPI.applyFilter("tc_alter_product_price",E,b,F,v,z),S=n.epoAPI.applyFilter("tc_alter_product_original_price",S,b,F,v),E===!1||!G)return;b.is("select")&&(te=b.find("option:selected")),i&&(te=i),te.toArray().forEach(function(t){switch(t=n(t),k=n.epoAPI.util.parseJSON(t.attr("data-rules")),C=n.epoAPI.util.parseJSON(t.attr("data-rulestype")),A=n.epoAPI.util.parseJSON(t.attr("data-original-rules")),b.is(".tmcp-dynamic")&&(k=n.epoAPI.util.parseJSON(t.attr("data-formula")),A=n.epoAPI.util.parseJSON(t.attr("data-formula")),C=n.epoAPI.util.parseJSON(t.attr("data-calculation-type"))),A===void 0&&(A=k),_="",typeof k=="object"?(w in k?(f=k[w],p=A[w]):(B=n.epoAPI.util.parseJSON(b.closest(".tmcp-ul-wrap").attr("data-rules")),W=b.closest(".tmcp-ul-wrap").data("original-rules"),typeof B=="object"?w in B?f=B[w]:f=k[0]:f=k[0],typeof W=="object"?w in W?p=W[w]:p=A[0]:p=A[0]),typeof C=="object"?w in C?_=C[w]:(T=n.epoAPI.util.parseJSON(b.closest(".tmcp-ul-wrap").attr("data-rulestype")),typeof T=="object"?w in T?_=T[w]:_=C[0]:_=C[0]):(C=n.epoAPI.util.parseJSON(b.closest(".tmcp-ul-wrap").attr("data-ulestype")),typeof C=="object"&&(w in C?_=C[w]:_=C[0]))):(H=b.closest(".tmcp-ul-wrap"),k=n.epoAPI.util.parseJSON(H.attr("data-rules")),A=n.epoAPI.util.parseJSON(H.attr("data-original-rules")),typeof k=="object"&&(w in k?f=k[w]:f=k[0],typeof A=="object"?w in A?p=A[w]:p=A[0]:p=f,typeof C=="object"?w in C?_=C[w]:(T=n.epoAPI.util.parseJSON(H.attr("data-rulestype")),typeof T=="object"?w in T?_=T[w]:_=C[0]:_=C[0]):(C=n.epoAPI.util.parseJSON(H.attr("data-rulestype")),typeof C=="object"&&(w in C?_=C[w]:_=C[0])))),typeof _=="object"&&(_=_[0]),b.is(".tmcp-fee-field")&&(n.inArray(_,["fee","stepfee","currentstepfee"])!==-1&&(_=""),j=0),r===void 0&&(b.is("select")?b.find("option").removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"):t.removeClass("tm-epo-late-field").removeData("tm-price-for-late islate")),_!=="math"?(f=U(f),p=U(p)):typeof f=="object"&&(f=f[0]),P=f,N=p,_){case"":y=f,f=a(f,v,j);break;case"math":f=Re(f,b,e,l,n.epoAPI.applyFilter("tc_use_undiscounted_price",void 0,b,F,v),d,u,m),y=f,f=a(f,v,j),p=Re(p,b,e,!0,!0,d,u,m);break;case"percent_cart_total":D=parseFloat(s.cart_total),Number.isFinite(D)||(D=0),y=f/100*D,f=a(f,v,j)/100*D,p=a(p,v,j)/100*D;break;case"percent":y=f/100*E,f=a(f,v,j)/100*E,p=p/100*S;break;case"percentcurrenttotal":n.tcepo.lateFieldsPrices[ne].push({setter:t,price:f,original_price:p,bundleid:z,pricetype:_}),t.data("tm-price-for-late",f).data("tm-original-price-for-late",p).data("islate",1).addClass("tm-epo-late-field"),y=0,f=0,p=0;break;case"fixedcurrenttotal":f=a(f,v,j),n.tcepo.lateFieldsPrices[ne].push({setter:t,price:f,original_price:p,bundleid:z,pricetype:_}),t.data("tm-price-for-late",f).data("tm-original-price-for-late",p).data("islate",1).addClass("tm-epo-late-field"),y=0,f=0,p=0;break;case"word":y=f*O(t.val()),f=a(f,v,j)*O(t.val()),p=p*O(t.val());break;case"wordpercent":y=f/100*E*O(t.val()),f=a(f,v,j)/100*E*O(t.val()),p=p/100*S*O(t.val());break;case"wordnon":x=parseInt(t.attr("data-freechars"),10),Number.isFinite(x)||(x=0),g=O(t.val())-x,g<0&&(g=0),y=f*g,f=a(f,v,j)*g,p=p*g;break;case"wordpercentnon":x=parseInt(t.attr("data-freechars"),10),Number.isFinite(x)||(x=0),g=O(t.val())-x,g<0&&(g=0),y=f/100*E*g,f=a(f,v,j)/100*E*g,p=p/100*S*g;break;case"char":y=f*t.val().length,f=a(f,v,j)*t.val().length,p=p*t.val().length;break;case"charpercent":y=f/100*E*t.val().length,f=a(f,v,j)/100*E*t.val().length,p=p/100*S*t.val().length;break;case"charnospaces":y=f*t.val().replace(/\s/g,"").length,f=a(f,v,j)*t.val().replace(/\s/g,"").length,p=p*t.val().replace(/\s/g,"").length;break;case"charnofirst":g=t.val().length-1,g<0&&(g=0),y=f*g,f=a(f,v,j)*g,p=p*g;break;case"charnon":x=parseInt(t.attr("data-freechars"),10),Number.isFinite(x)||(x=0),g=t.val().length-x,g<0&&(g=0),y=f*g,f=a(f,v,j)*g,p=p*g;break;case"charpercentnon":x=parseInt(t.attr("data-freechars"),10),Number.isFinite(x)||(x=0),g=t.val().length-x,g<0&&(g=0),y=f/100*E*g,f=a(f,v,j)/100*E*g,p=p/100*S*g;break;case"charnonnospaces":x=parseInt(t.attr("data-freechars"),10),Number.isFinite(x)||(x=0),g=t.val().replace(/\s/g,"").length-x,g<0&&(g=0),y=f*g,f=a(f,v,j)*g,p=p*g;break;case"charpercentnonnospaces":x=parseInt(t.attr("data-freechars"),10),Number.isFinite(x)||(x=0),g=t.val().replace(/\s/g,"").length-x,g<0&&(g=0),y=f/100*E*g,f=a(f,v,j)/100*E*g,p=p/100*S*g;break;case"charpercentnofirst":g=t.val().length-1,g<0&&(g=0),y=f/100*E*g,f=a(f,v,j)/100*E*g,p=p/100*S*g;break;case"step":Y?(y=f*t.val(),f=a(f,v,j)*t.val(),p=p*n.epoAPI.math.toFloat(t.val())):(y=f*n.epoAPI.math.toFloat(t.val()),f=a(f,v,j)*n.epoAPI.math.toFloat(t.val()),p=p*n.epoAPI.math.toFloat(t.val()));break;case"currentstep":Y?(y=t.val(),f=a(t.val(),v,j),p=a(t.val(),v,j)):(y=n.epoAPI.math.toFloat(t.val()),f=a(n.epoAPI.math.toFloat(t.val()),v,j),p=a(n.epoAPI.math.toFloat(t.val()),v,j));break;case"intervalstep":Y&&($=parseFloat(n('.tm-range-picker[data-field-id="'+t.attr("id")+'"]').attr("data-min")),y=f*(t.val()-$),f=a(f,v,j)*(t.val()-$),p=p*(t.val()-$));break;case"row":y=f*((t.val().match(/(\r\n|\n|\r)/gm)||[]).length+1),f=a(f,v,j)*((t.val().match(/(\r\n|\n|\r)/gm)||[]).length+1),p=p*((t.val().match(/(\r\n|\n|\r)/gm)||[]).length+1);break}V=f,I=p,L=p,P=y,N=L,b.data("tm-quantity")&&(y=y*parseFloat(b.data("tm-quantity")),L=L*parseFloat(b.data("tm-quantity")),P=P*parseFloat(b.data("tm-quantity")),N=N*parseFloat(b.data("tm-quantity")),f=f*parseFloat(b.data("tm-quantity")),p=p*parseFloat(b.data("tm-quantity")),V=V*parseFloat(b.data("tm-quantity")),I=I*parseFloat(b.data("tm-quantity"))),q=q+parseFloat(f),K=K+parseFloat(p),ee=h(q,v,!1,!1,t,_),J=h(K,v,!1,!1,t,_),b.data("price_set",1),t.data("price_set",1),t.data("undiscounted_raw_price",P),t.data("undiscounted_raw_original_price",N),t.data("undiscounted_price",c(y,v,t,_)),t.data("undiscounted_original_price",c(L,v,t,_)),t.data("raw_price",V),t.data("raw_original_price",I),t.data("price",c(f,v,t,_)),t.data("original_price",c(p,v,t,_)),i||(b.is(".tc-epo-field-product")&&(R=!1,b.is("select")?b.val()!==""&&(R=!0):b.is(":checkbox")||b.is(":radio")?b.is(":checked")&&(R=!0):b.val()!==""&&(R=!0),R||(ee=t.data("price-html"),J="")),M(t.closest(".tmcp-field-wrap").find(".tc-price"),q,ee,K,J),b.data("price-changed",1))})}function Y(e,t){var s,i,r,l,d,m,f,p,v,j,y,_,w,C,E,k,A,S,g=!0,O=e.main_product,x=e.epoEventId,F=e.this_epo_container,T=e.this_epo_totals_container;if(t?y=t:y=O.find(".cart"),y.length<=0)return;n.tcepo.lateFieldsPrices[x]=[],y.toArray().forEach(function(t){if(t=n(t),w="input[name^='variation_id']",t.find("input.variation_id").length>0&&(w="input.variation_id"),t.data("per_product_pricing")!==void 0&&(g=t.data("per_product_pricing")),m=t.find(w).val(),p=n.epoAPI.applyFilter("tc_get_bundleid",t.attr("data-product_id"),t,e),m||(m=0),d=n.epoAPI.applyFilter("tc_get_epo_container",F,t,O,p),s=n.epoAPI.applyFilter("tc_get_totals_container",T,t,O,p),v=s.data("fields-price-rules"),d.data("tm_rules_init_done")||(s.data("force-quantity")&&t.find(o.qtySelector).val(s.data("force-quantity")),d.toArray().forEach(function(e){n(e).closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",n(e).val())}),d.find(".tmcp-attributes, .tmcp-elements").toArray().forEach(function(e){e=n(e),f=n.epoAPI.util.parseJSON(e.attr("data-rules")),j=n.epoAPI.util.parseJSON(e.attr("data-original-rules")),typeof f!="object"&&(f={0:"0"}),typeof j!="object"&&(j={0:"0"}),typeof f=="object"&&(r=a(f[n.epoAPI.math.toFloat(m)],s,v),S=h(r,s),l=a(j[n.epoAPI.math.toFloat(m)],s,v),C=h(l,s),e.find(".tmcp-field, .tmcp-fee-field ").toArray().forEach(function(e){e=n(e),g?(e.attr("data-no-price")==="1"&&(r=0,l=0),e.data("raw_price",r),e.data("raw_original_price",l),e.data("price",c(r,s,e)),e.data("original_price",c(l,s,e)),M(e.closest(".tmcp-field-wrap").find(".tc-price"),r,S,l,C)):(e.data("price",0),e.data("original_price",0),e.closest(".tmcp-field-wrap").find(".amount").empty())}))}),d.data("tm_rules_init_done",1)),!g)return!0;E=X(s),k=Z(s),_={cart:t,current_variation:m,bundleid:p,epoTotalsContainer:s,product_price:E,product_original_price:k,apply_dpd:v,per_product_pricing:g},i=d.find(".tmcp-field,.tmcp-sub-fee-field,.tmcp-fee-field"),e.is_associated||(i=i.not(o.associatedEpoSelector+" .tmcp-field,"+o.associatedEpoSelector+" .tmcp-sub-fee-field,"+o.associatedEpoSelector+" .tmcp-fee-field")),A=i.filter(".tcenabled"),(!n.tcepo.initialActivation[x]||A.length===0&&i.length>0)&&(i.each(function(){u(n(this))}),n.tcepo.initialActivation[x]=!0),i.filter(".tcenabled").each(function(t,n){b(e,n,_)}),i.each(function(t,s){n(s).on("tc_element_epo_rules",function(){b(e,s,_)})})})}function Ve(e,t,s,o,i,r,l,d){var m,f,p,g,v,b,j,y,_,w,O,x,C,E,T,z,N,L,F=0,k=0,S=0,A=0,R=e.epoEventId;return d!==void 0?T=d:T=e.this_epo_totals_container.data("fields-price-rules"),x=t,O=s,n.tcepo.lateFieldsPrices[R].forEach(function(t){f=t.price,g=t.original_price,C=t.pricetype,m=t.setter,z=t.bundleid,p=m,C==="percentcurrenttotal"?b="_hidden":b="_hiddenfixed",m.is("option")&&(p=m.closest("select")),x=parseFloat(n.epoAPI.applyFilter("tc_alter_product_price",x,p,l,e.this_epo_totals_container,r)),O=parseFloat(n.epoAPI.applyFilter("tc_alter_original_product_price",O,p,l,e.this_epo_totals_container,r)),y=n.epoAPI.dom.id(p.attr("name")),L=n(".tc-totals-form.tm-totals-form-"+l.attr("data-cart-id")).attr("data-product-id"),N=n(".tc-totals-form.tm-totals-form-"+l.attr("data-cart-id")).attr("data-epo-id"),w=n(".tc-extra-product-options.tm-product-id-"+L+"[data-epo-id='"+N+"']").find("#"+y+b),z===r?(C==="percentcurrenttotal"?(f=parseFloat(f)/100*(a(parseFloat(x),e.this_epo_totals_container,T)+parseFloat(o)),g=parseFloat(g)/100*(parseFloat(O)+parseFloat(i))):C==="fixedcurrenttotal"&&(f=parseFloat(f)+parseFloat(o),g=parseFloat(g)+parseFloat(i)),p.data("tm-quantity")&&(f=f*parseFloat(p.data("tm-quantity")),g=g*parseFloat(p.data("tm-quantity"))),m.data("isset")===1&&u(m)&&(p.is(".tmcp-field")?(F=F+f,k=k+g):p.is(".tmcp-fee-field")&&(S=S+f,A=A+g)),j=c(f,l,m),E=c(g,l,m),_=h(f,l,!1,!1,m),v=h(g,l,!1,!1,m),m.data("price",j),m.data("pricew",j),m.data("original_price",E),m.data("original_pricew",E),M(m.closest(".tmcp-field-wrap").find(".tc-price"),j,_,E,v),w.length===0&&p.before('<input type="hidden" id="'+y+b+'" name="'+y+b+'" value="'+D(f,l)+'">'),m.is(".tm-epo-field.tmcp-radio")?m.is(":checked")&&w.val(D(f,l)):w.val(D(f,l))):m.data("pricew")!==void 0&&(_=h(m.data("pricew"),l,!0,!1,m),v="",m.data("original_pricew")!==void 0&&(v=h(m.data("original_pricew"),l,!0,!1,m)),M(m.closest(".tmcp-field-wrap").find(".tc-price"),m.data("pricew"),_,m.data("original_pricew"),v))}),{normal:[F,k],fees:[S,A]}}function $e(){var e;if(s.tm_epo_no_lazy_load==="yes")return;p?e=n(p).find("img.tmlazy"):e=n(".tc-extra-product-options img.tmlazy"),e.lazyLoadXT(),e.on("lazyshow",function(){i.trigger("lazyLoadXToncomplete")})}function We(t){var o,i;if(!t)return;i=n(".cart"),t.find(".tm-owl-slider-section").each(function(){o=n(this),o.find(".tc-slider-content").addClass("tm-owl-slider"),o=o.find(".tm-owl-slider"),o.addClass("tcowl-carousel-show").addClass("tcowl-carousel").on("changed.owl.carousel",function(){i.css("display","block").addClass("slider-setup")}).tmowlCarousel(Object.assign({rtl:s.isRTL==="1",dots:!1,nav:!0,items:1,autoHeight:!0,mouseDrag:!1,touchDrag:!0,navText:[s.i18n_prev_text,s.i18n_next_text],navClass:["owl-prev button","owl-next button"],navElement:"a",loop:!1,navRewind:!1},e.tmowlCarouselSettings||{})),o.removeClass("tcowl-carousel-show")}),n.fn.tcTabs&&t.find(".tc-tabs").tcTabs({headers:"tc-tab-headers",header:"tab-header",dataopenattribute:"data-tab",sortabletabs:!1})}function Ue(e,t){var s,a,h=t.closest(".cpf-element"),r=h.data("repeater-max-rows"),c=t.find(".tc-repeater-element"),l=c.length,d=c.last(),i=c.last().find(".tmcp-ul-wrap"),u=e.data("tc-repeater-id"),o=e.data("tc-repeater-init");return!(r&&l>=r)&&(l+1>=r&&e.is(".tc-repeater-add")&&e.closest(".tc-repeater-wrap").addClass("tc-hidden"),i.is(".tm-element-ul-date, .tm-element-ul-time")&&(i.find(".tm-epo-field").tm_datepicker("destroy"),i.find(".tmcp-date-select").off()),i.is(".tm-element-ul-color")&&i.find(".tm-epo-field").spectrum("destroy"),s=d.tcClone(!0),s.find(".tm-epo-field").attr("id",function(e,t){return t.replace(/_\d+$/g,"")+"_"+o}),s.find("[data-for]").attr("data-for",function(e,t){return t.replace(/_\d+$/g,"")+"_"+o}),s.find("[for]").attr("for",function(e,t){return t.replace(/_\d+$/g,"")+"_"+o}),s.find("[data-field-id]").attr("data-field-id",function(e,t){return t.replace(/_\d+$/g,"")+"_"+o}),s.find("[data-tm-date]").attr("data-tm-date",function(){return u+"_"+o}),s.find(".tm-epo-field").attr("name",function(e,t){return t.replace(/\[\d+\]/g,"["+o+"]")}),s.find(".tm-qty").attr("name",function(e,t){return t.replace(/\[\d+\]/g,"["+o+"]")}),s.find(".tmcp-date-select").attr("name",function(e,t){return t.replace(/\[\d+\]/g,"["+o+"]")}),s.find(".tmcp-date-select").attr("id",function(e,t){return u+"_"+o+"_"+t.substring(t.lastIndexOf("_")+1)}),a=s.find(".tmcp-ul-wrap"),t.find(".tc-repeater-element").length>0&&(t.find(".tc-repeater-delete").removeClass("tc-hidden"),s.find(".tc-repeater-delete").removeClass("tc-hidden")),a.is(".tm-element-ul-checkbox")?(s.find("li.tmcp-field-wrap").removeClass("tc-active"),s.find(".tm-epo-field.tmcp-checkbox").prop("checked",!1),s.find(".tm-epo-field.tmcp-checkbox").filter(function(t,s){return n.inArray(n(s).val(),e.data("repeater-init-value"))!==-1}).prop("checked",!0).closest("li.tmcp-field-wrap").addClass("tc-active")):a.is(".tm-element-ul-radio")?(s.find("li.tmcp-field-wrap").removeClass("tc-active"),s.find(".tm-epo-field.tmcp-radio").filter(function(t,s){return n(s).val()===e.data("repeater-init-value")}).prop("checked",!0).closest("li.tmcp-field-wrap").addClass("tc-active")):s.find(".tm-epo-field").val(e.data("repeater-init-value")),!a.is(".tm-element-ul-checkbox")&&!a.is(".tm-element-ul-radio")&&s.find(".tm-epo-field").val(e.data("repeater-init-value")),e.data("tc-repeater-init",e.data("tc-repeater-init")+1),[s,d,i])}function Ke(e,t,s,o,i){var a=t.find(".tmcp-ul-wrap");if(a.is(".tm-element-ul-range")&&(t.find(".tm-range-picker").removeData("tc-picker-init").attr("class","tm-range-picker").html(""),oe(t)),a.is(".tm-element-ul-date, .tm-element-ul-time")&&(V(o),V(a)),a.is(".tm-element-ul-color")&&(R(o),R(a)),t.find(".tm-tooltip").removeData("tctooltip").removeData("tm-has-tm-tip"),n.tcToolTip(t.find(".tm-tooltip")),t.find(".tm-epo-field").removeData("addedtcEpoBeforeOptionPriceCalculation").each(function(t,s){var o=n(s);u(o,!1,!0),o.is(".tcenabled")&&b(e,o),o.on("tc_element_epo_rules",function(){b(e,o)})}),!i)return;a.is(".tm-element-ul-checkbox")?t.find(".tm-epo-field.tmcp-checkbox").filter(":checked").trigger("change.cpf"):a.is(".tm-element-ul-radio")?t.find(".tm-epo-field.tmcp-radio").filter(":checked").trigger("change.cpf"):t.find(".tm-epo-field").trigger("change.cpf")}function qe(e,t,s,o){var r,c=e.closest(".cpf-element"),a=c.data("repeater-min-rows"),i=e.find(".tc-repeater-element").length,l=t.index();if(a&&i<=a)return o&&(r='<div class="tm-error-repeater tm-error tc-cell tcwidth tcwidth-100">'+n.tc_validator.messages.repeaterminrows(a)+"</div>",o.tcToolTip({tip:r,onetime:!0,trigger:!0,tipclass:"tc-error"})),!1;if(i===1)return;if(i===2&&e.find(".tc-repeater-delete").addClass("tc-hidden"),s.is(".tc-repeater-add")&&s.closest(".tc-repeater-wrap").removeClass("tc-hidden"),t.remove(),s.data("tc-repeater-init",s.data("tc-repeater-init")-1),l+1===i)return;e.find(".tc-repeater-element").toArray().forEach(function(e,t){e=n(e),e.find(".tm-epo-field").attr("id",function(e,n){return n.replace(/_\d+$/g,"")+(t!==0?"_"+t:"")}),e.find("[data-for]").attr("data-for",function(e,n){return n.replace(/_\d+$/g,"")+(t!==0?"_"+t:"")}),e.find("[for]").attr("for",function(e,n){return n.replace(/_\d+$/g,"")+(t!==0?"_"+t:"")}),e.find("[data-field-id]").attr("data-field-id",function(e,n){return n.replace(/_\d+$/g,"")+(t!==0?"_"+t:"")}),e.find("[data-tm-date]").attr("data-tm-date",function(e,n){return n.replace(/_\d+$/g,"")+(t!==0?"_"+t:"")}),e.find(".tm-epo-field").attr("name",function(e,n){return n.replace(/\[\d+\]/g,"["+t+"]")}),e.find(".tm-qty").attr("name",function(e,n){return n.replace(/\[\d+\]/g,"["+t+"]")}),e.find(".tmcp-date-select").attr("name",function(e,n){return n.replace(/\[\d+\]/g,"["+t+"]")})})}function de(e,t){var s,o,i;if(!e)return;e=n(e),e.length&&(o=t.main_cart,s=L(o),s=n.epoAPI.applyFilter("qtyElementForRepeaterQuantity",s,{epo:t,currentCart:o,obj:e,qtyElement:s}),i=e.find(".tc-repeater-quantity"),i.toArray().forEach(function(a,r){var l,d,u,c=n(a);if(c.data("tc-repeater-init"))return;d=c.find(".tc-repeater-element"),u=d.length,l=d.first().find(".tm-epo-field"),l.is(":checkbox")?c.data("repeater-init-value",l.filter(":checked").toArray().map(function(e){return n(e).val()})):l.is(":radio")?c.data("repeater-init-value",l.filter(":checked").val()):c.data("repeater-init-value",l.val()),c.data("tc-repeater-init",u),c.data("tc-repeater-id",l.attr("id")),c.data("tc-repeater-name",l.attr("name")),s.length&&(s.off("change.r"+r+"cpf input.r"+r+"cpf").on("change.r"+r+"cpf input.r"+r+"cpf",function(a){var l,u,p,g,v,b,j,y,h=n(this),m=h.data("tm-prev-value"),d=n.epoAPI.applyFilter("qtyElementForRepeaterQuantityValue",h.val(),{epo:t,currentCart:o,obj:e,qtyElement:s,field:h}),f=d-m;if(m===void 0&&(m=d-1,f=d-m),a.isTrigger!==void 0&&(m=c.find(".tc-element-inner-wrap").find(".tc-repeater-element").length,f=d-m),f===0)return;if(p=c.find(".tc-element-inner-wrap"),b=n.epoAPI.applyFilter("qtyElementForRepeaterQuantity_tm-prev-value",h.val(),{epo:t,currentCart:o,obj:e,qtyElement:s,field:h}),b<=0&&(b=1),r===i.length&&h.data("tm-prev-value",b),f>0){if(v=p.find(".tc-repeater-element").eq(d-1),v.length)return;for(l=0;l<f;l++)g=Ue(c,p),g&&(u?u=u.add(g[0]):u=g[0],l===0&&(j=g[1],y=g[2]));u&&(u.appendTo(p.find(".tc-element-container")),Ke(t,u,j,y))}else for(l=d-f;l>d;l-=1)v=p.find(".tc-repeater-element").eq(l-1),qe(p,v,c);o.trigger({type:"tm-epo-update",norules:2})}),s.data("tm-prev-value",n.epoAPI.applyFilter("qtyElementForRepeaterQuantityValue",s.val(),{epo:t,currentCart:o,obj:e,qtyElement:s,field:s})).trigger("change"))}),e.find(".tc-repeater-add").toArray().forEach(function(e){var o,i,a,r,s=n(e);if(s.data("tc-repeater-init"))return;i=s.closest(".tc-element-inner-wrap"),a=i.find(".tc-repeater-element"),r=a.length,o=a.first().find(".tm-epo-field"),i.find(".tc-repeater-element").length>1&&i.find(".tc-repeater-delete").removeClass("tc-hidden"),o.is(":checkbox")?s.data("repeater-init-value",o.filter(":checked").toArray().map(function(e){return n(e).val()})):o.is(":radio")?s.data("repeater-init-value",o.filter(":checked").val()):s.data("repeater-init-value",o.val()),s.data("tc-repeater-init",r),s.data("tc-repeater-id",o.attr("id")),s.data("tc-repeater-name",o.attr("name")),s.on("click.repeater",function(){var e=Ue(s,i);e&&(e[0].appendTo(i.find(".tc-element-container")),Ke(t,e[0],e[1],e[2],!0))})}),e.find(".tc-repeater-delete .delete").on("click",function(){var e=n(this),t=e.closest(".tc-element-inner-wrap"),s=e.closest(".tc-repeater-element");qe(t,s,t.find(".tc-repeater-add"),e)}))}function R(e){if(!e)return;e=n(e).find(".tm-color-picker"),e.length&&(e.spectrum({type:"color",theme:"epo",showButtons:!0,allowEmpty:!0,showInitial:!0,showInput:!0,clickoutFiresChange:!1,chooseText:s.closeText,cancelText:s.i18n_cancel}),e.spectrum("enable"))}function Pe(e){if(!e)return;n(e).length&&n(function(){n(e).tclightbox()})}function Le(e){var s=e.closest(".tmcp-field-wrap").find("label img"),t=n(s).first().attr("data-original");return e.is("select.tm-product-image")&&(e=e.children("option:selected")),t||(t=n(s).first().attr("src")),t||(t=e.attr("data-image")),e.attr("data-imagep")&&(t=e.attr("data-imagep")),!!t}function Ne(t){var s,i,a,r,c=t.is_associated?t.this_epo_container.find(".tm-epo-field.tmcp-upload"):t.this_epo_container.find(".tm-epo-field.tmcp-upload").not(o.epoSelector+" "+o.associatedEpoSelector+" .tm-epo-field.tmcp-upload");try{c.not(o.epoSelector+" "+o.associatedEpoSelector+" .tm-epo-field.tmcp-upload").toArray().forEach(function(e){var t,o;if(i=[],s=n(e),s.attr("data-file")==="")return!1;if(t=s.attr("data-file").split("|"),t.length===0)return!1;(E||A)&&(a=new E("").clipboardData||new A),t.forEach(function(e){o=n.epoAPI.util.basename(e),(E||A)&&a.items.add(new File([e],o)),i.push(e)}),a&&(e.files=a.files),i=i.join("|"),r=s.attr("name"),s.trigger("tcupload"),s.after('<input type="hidden" class="tmcp-upload-hidden" name="'+r+'" value="'+i+'">'),s.removeAttr("data-file")})}catch(t){e.console.log(t),n(".tm-epo-field.tmcp-upload").not(".tm-multiple-file-upload").addClass("tc-nodt"),N=t}}function Je(e){var t=e.epoEventId,i=e.this_epo_container;s.tm_epo_upload_popup==="yes"&&(n.tcepo.formSubmitEvents[t][n.tcepo.formSubmitEvents[t].length]={trigger:function(){return!0},on_true:function(){var t,a,e=i.data("num_uploads");return e&&Object.keys(e).length&&(a=n.tcFloatBox({fps:1,ismodal:!0,refresh:"fixed",width:"50%",height:"300px",classname:"flasho tc-wrapper",data:n.epoAPI.template.html(o.templateEngine.tc_upload_messages,{files:e,title:s.i18n_uploading_files,message:s.i18n_uploading_message})}),t=function(){a.destroy(),l.off("ajaxSuccess",t)},l.on("ajaxSuccess",t)),!0},on_false:function(){return!0}})}function et(e){var t=e.this_epo_container,o=e.main_product,s=e.epoEventId,i=t.find(".tm-limit"),a=t.find(".tm-exactlimit"),r=t.find(".tm-minimumlimit");t.on("change.cpflimit","input.tm-epo-field.tmcp-checkbox",function(){var e=n(this);$(e,!0),q(e,!0)}),i.length&&Ge(i,o,s),a.length&&ht(a,o,s),r.length&&rt(r,s)}function tt(t){var r,c,d=t.this_epo_container,a=s.theme_name;if(a){switch(a=a.toLowerCase(),r=d.find("select"),a){case"flatsome":case"flatsome-child":case"flatsome child":r.wrap('<div class="custom select-wrapper"/>');break;case"avada":case"avada-child":case"avada child":r.wrap('<div class="avada-select-parent tm-select-parent"></div>'),n('<div class="select-arrow">&#xe61f;</div>').appendTo(d.find(".tm-select-parent")),e.calc_select_arrow_dimensions?(e.calc_select_arrow_dimensions(),i.on("tmsectionpoplink cpflogicdone",function(){e.calc_select_arrow_dimensions()})):e.calcSelectArrowDimensions&&(e.calcSelectArrowDimensions(),i.on("tmsectionpoplink cpflogicdone",function(){e.calcSelectArrowDimensions()}));break;case"bazar":case"bazar-child":case"bazar child":r.wrap('<div class="tm-select-wrapper select-wrapper"/>');break;case"blaszok":case"blaszok-child":case"blaszok child":c=function(){setTimeout(function(){n(".tm-extra-product-options select").not(".hasCustomSelect").filter(":visible").each(function(){n(this).is(".mpcthSelect")||(n(this).width(n(this).outerWidth()),n(this).customSelect({customClass:"mpcthSelect"}))})},100)},i.on("cpflogicrun",function(){c()}),i.on("epo_options_visible",function(){c()});break;case"handmade":case"handmade child theme":n(".tm-owl-slider.tcowl-carousel").addClass("manual");break}i.trigger("tm-theme-specific-actions",{epo:{theme_name:a,all_epo_selects:r}})}l.off("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus").on("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus",function(){n(this).closest(".quantity").find(o.qtySelector).trigger("change.cpf")})}function nt(e,s,o,a,r){var c,l,d,h,f,g,v,b,j,O=e.epoEventId,_="input[name^='variation_id']",y=e.is_associated?"tc_variation_form.tmlogic":"wc_variation_form.tmlogic",m=e.is_associated?"tc_":"",u=e.variations_form,p=e.is_associated?u.find(".tc-epo-element-variations"):u.find(".variations"),x=e.is_associated?".tc-epo-element-variable-reset-variations":".reset_variations";if(u.attr("data-epo_id",e.epo_id),s.find("input.variation_id").length>0&&(_="input.variation_id"),r.find(".tm-epo-variation-element").length||r.data("tm-epo-variation-element")){if(c=r.find(".tm-epo-variation-section").first(),c.find(".cpf-type-variations").attr("data-epo_id",e.epo_id).attr("data-product_id",u.attr("data-product_id")),r.data("tm-epo-variation-element",c.find(".tm-epo-variation-element")),o&&o!=="main"&&!e.is_associated){if(u=e.form,p=u.find('.composite_component[data-item_id="'+o+'"]').find(".variations"),u.attr("data-epo_id",e.epo_id),p.length===0)return;f=c.closest("li.tm-extra-product-options-field"),c.is(".tm-hidden")||p.hide(),p.after(c.addClass("tm-extra-product-options nopadding")),f.is(":empty")&&f.hide(),c.is(".section_popup")?c.wrap("<div class='tc-styled-variations tc-row'></div>"):(c.removeClass("tc-cell"),c.wrap("<div class='tc-styled-variations'></div>")),j=!1,s.off(y).on(y,function(){j=!0,u.on("click.tmlogic",".reset_variations",function(){c.find("select.tm-epo-variation-element").val("").children("option").prop("disabled",!1).show(),c.find(".tm-epo-variation-element").prop("disabled",!1).removeClass("tm-disabled").prop("checked",!1).closest("li").show(),i.trigger("tmlazy"),c.find(".tm-epo-variation-element").trigger("tm_trigger_product_image"),c.find("li").removeClass("tc-active tm-attribute-disabled").css("opacity","")}),s.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(){me(s,e)});for(d=0;d<w.length;d+=1)l=w[d],g=typeof l,g==="object"&&(v=typeof l.name=="string"||!1,h=typeof l.selector=="string"||!1,b=typeof l.func=="function"||!1,v&&b&&(h==="input[name='variation_id']"&&(h=_),l.selector?s.data("tm-styled-variations",1).off(m+l.name+d,h).on(m+l.name+d,h,l.func):s.data("tm-styled-variations",1).off(m+l.name+d).on(m+l.name+d,l.func)));w=[],c.find(".tm-epo-variation-element:not(.tm-hidden .tm-epo-variation-element)").last().trigger("tm_epo_variation_element_change")}),n(function(){j===!1&&s.trigger(y)})}else{c.length&&(c.is(".tm-hidden")||p.hide(),f=c.closest("li.tm-extra-product-options-field"),p.after(c.addClass("tm-extra-product-options nopadding")),f.is(":empty")&&f.hide(),c.is(".section_popup")?c.wrap("<div class='tc-styled-variations tc-row'></div>"):(c.removeClass("tc-cell"),c.wrap("<div class='tc-styled-variations'></div>")),u.off("click.tmlogic",x).on("click.tmlogic",x,function(){c.find("select.tm-epo-variation-element").val("").children("option").prop("disabled",!1).show(),c.find(".tm-epo-variation-element").prop("disabled",!1).removeClass("tm-disabled").prop("checked",!1).closest("li").show(),i.trigger("tmlazy"),c.find(".tm-epo-variation-element").trigger("tm_trigger_product_image"),c.find("li").removeClass("tc-active tm-attribute-disabled").css("opacity","")})),u.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(){me(u,e)});for(d=0;d<w.length;d+=1)l=w[d],g=typeof l,g==="object"&&(v=typeof l.name=="string"||!1,h=typeof l.selector=="string"||!1,b=typeof l.func=="function"||!1,v&&b&&(h==="input[name='variation_id']"&&(h=_),l.selector?u.data("tm-styled-variations",1).off(m+l.name+d,h).on(m+l.name+d,h,l.func):u.data("tm-styled-variations",1).off(m+l.name+d).on(m+l.name+d,l.func)));w=[],c.find(".tm-epo-variation-element:not(.tm-hidden .tm-epo-variation-element)").last().trigger("tm_epo_variation_element_change")}n.tcepo.formSubmitEvents[O][n.tcepo.formSubmitEvents[O].length]={trigger:function(){return!0},on_true:function(){return c.find(".tm-epo-variation-element").attr("disabled","disabled"),!0},on_false:function(){c.find(".tm-epo-variation-element").prop("disabled",!1)}},n(t.body).on("added_to_cart",function(){c.find(".tm-epo-variation-element").prop("disabled",!1)})}}function st(e,t){var i=t.find(".flex-control-nav li:eq(0) img"),a=t.find(".woocommerce-product-gallery__wrapper "),r=a.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),s=e,o=e.closest("a");s.attr("data-o_src",n.tc_product_image_store[0].src),s.attr("data-o_srcset",n.tc_product_image_store[0].srcset),s.attr("data-o_sizes",n.tc_product_image_store[0].sizes),s.attr("data-o_title",n.tc_product_image_store[0].title),s.attr("data-o_alt",n.tc_product_image_store[0].alt),s.attr("data-o_data-src",n.tc_product_image_store[0]["data-src"]),s.attr("data-o_data-large_image",n.tc_product_image_store[0]["data-large_image"]),s.attr("data-o_data-large_image_width",n.tc_product_image_store[0]["data-large_image_width"]),s.attr("data-o_data-large_image_height",n.tc_product_image_store[0]["data-large_image_height"]),r.attr("data-o_data-thumb",n.tc_product_image_store[1]["data-thumb"]),n.tc_product_image_store[2]&&i.attr("data-o_src",n.tc_product_image_store[2].src),o.attr("data-o_href",n.tc_product_image_store[3].href),o.attr("data-o_title",n.tc_product_image_store[3].title)}function ot(e,t){var i=t.find(".flex-control-nav li:eq(0) img"),a=t.find(".woocommerce-product-gallery__wrapper "),r=a.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),s=e,o=e.closest("a");n.isEmptyObject(n.tc_product_image)?n.tc_product_image_store=n.tc_populate_store(e,t):(n.tc_product_image_store=n.tc_pre_populate_store(),n.tc_product_image_store=n.tc_maybe_copy_object_values(n.tc_product_image_store,n.tc_product_image)),s.tc_update_attr("src",0),s.tc_update_attr("srcset",0),s.tc_update_attr("sizes",0),s.tc_update_attr("title",0),s.tc_update_attr("alt",0),s.tc_update_attr("data-src",0),s.tc_update_attr("data-large_image",0),s.tc_update_attr("data-large_image_width",0),s.tc_update_attr("data-large_image_height",0),r.tc_update_attr("data-thumb",1),i.tc_update_attr("src",2),o.tc_update_attr("href",3),o.tc_update_attr("title",3)}function De(e,t,n){var i=n.find(".flex-control-nav li:eq(0) img"),c=n.find(".woocommerce-product-gallery__wrapper "),r=c.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),s=t,o=t.closest("a"),a=o.next(".zoomImg");e&&e.image_link&&e.image_link&&e.image_link.length>1?((e.full_src===null||e.full_src==="")&&(e.full_src=e.image_link),(e.full_src_w===null||e.full_src_w==="")&&(e.full_src_w=s.attr("data-large_image_width")),(e.full_src_h===null||e.full_src_h==="")&&(e.full_src_h=s.attr("data-large_image_height")),s.length&&(e.image_srcset||(e.image_sizes=!1),e.image_sizes||(e.image_srcset=!1),s.tc_set_attr("src",e.image_link,0),s.tc_set_attr("srcset",e.image_srcset,0),s.tc_set_attr("sizes",e.image_sizes,0),s.tc_set_attr("title",e.image_title,0),s.tc_set_attr("alt",e.image_alt,0),s.tc_set_attr("data-src",e.full_src,0),s.tc_set_attr("data-large_image",e.full_src,0),s.tc_set_attr("data-large_image_width",e.full_src_w,0),s.tc_set_attr("data-large_image_height",e.full_src_h,0),r.tc_set_attr("data-thumb",e.image_link,1)),i.length&&i.tc_set_attr("src",e.image_link,2),o.length&&(o.tc_set_attr("href",e.full_src,3),o.tc_set_attr("title",e.image_caption,3)),a.length&&a.tc_set_attr("src",e.full_src,4)):(s.length&&(s.tc_reset_attr("src",0),s.tc_reset_attr("srcset",0),s.tc_reset_attr("sizes",0),s.tc_reset_attr("title",0),s.tc_reset_attr("alt",0),s.tc_reset_attr("data-src",0),s.tc_reset_attr("data-large_image",0),s.tc_reset_attr("data-large_image_width",0),s.tc_reset_attr("data-large_image_height",0),r.tc_reset_attr("data-thumb",1)),i.length&&i.tc_reset_attr("src",2),o.length&&(o.tc_reset_attr("href",3),o.tc_reset_attr("title",3)),a.length&&a.tc_reset_attr("src",4))}function T(e,t){var o;return e.is_associated?o=t.find(".tc-product-image .wp-post-image").first():s.tm_epo_global_product_image_selector!==""?o=n(s.tm_epo_global_product_image_selector):(o=t.find(".woocommerce-product-gallery__image:not(.clone), .woocommerce-product-gallery__image--placeholder:not(.clone)").eq(0).find(".wp-post-image").first(),o.length===0&&(o=t.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img").first()),o.length===0&&(o=t.find("img.wp-post-image").not(".thumbnails img,.product_list_widget img").first()),o.length===0&&(o=t.find(".elementor-widget-wd_single_product_gallery img.wp-post-image").first()),o.length===0&&(o=t.find(".elementor-widget-ae-post-image .wp-post-image").first()),o.length===0&&(o=n(".woocommerce div.product div.images").not(".thumbnails img,.product_list_widget img").first())),n(o).length>1&&(o=n(o).first()),o}function Te(e){var t,n,s;return e.is_associated?e.main_product.closest(".tc-epo-element-product-container"):(n=e.main_product,s=e.product_id,t=n.closest("#product-"+s),t.length<=0&&(t=n.closest(".post-"+s)),t)}function F(t,s,o,a,r,c,l){var d,u,h,m,f,p,g;for(d in t)if(Object.prototype.hasOwnProperty.call(t,d)&&(d=t[d],d.enabled))switch(d.type){case"yith":s?(s.attr("srcset",o).attr("src-orig",o),d.element.data("yith_magnifier")&&d.element.yith_magnifier("destroy"),m={elements:{zoom:n(".yith_magnifier_zoom"),zoomImage:s,gallery:n(".yith_magnifier_gallery li a")}},d.element.yith_magnifier(n.extend(!0,{},e.yith_magnifier_options,m))):(a?d.yith_wcmg_zoom.attr("href",d.yith_wcmg_default_zoom):d.yith_wcmg_zoom.attr("href",d._yith_wcmg_default_zoom),d.element.data("yith_magnifier")&&d.element.yith_magnifier("destroy"),d.element.yith_magnifier(e.yith_magnifier_options));break;case"iosslider":setTimeout(function(e){e.element.iosSlider("update")}.bind(null,d),150);break;case"flexslider":i.trigger("resize");break;case"elevatezoom":d.element.each(function(e,t){var n=t(this).data("elevateZoom");typeof n!="undefined"&&n.swaptheimage(e,e)}.bind(null,o,n));break;case"easyzoom":d.element.swap(null,o);break;case"easyzoom-flatsome":d.element.swap(o,o);break;case"woocommerce":s&&(d.element.flexslider(0),d.element.trigger("woocommerce_gallery_reset_slide_position"),f=d.element,e.setTimeout(function(e,t){e.trigger("woocommerce_gallery_init_zoom"),t.trigger("resize")}.bind(null,f,i),10));break;case"zoom":l&&(p=l.find(".woocommerce-product-gallery--with-images").width(),u=!1,g=d.element.find("img.wp-post-image"),g.attr("data-large_image_width")>p&&(u=!0),u?(h={touch:!1},"ontouchstart"in e&&(h.on="click"),d.element.trigger("zoom.destroy"),d.element.zoom(h)):d.element.trigger("zoom.destroy"));break}i.trigger("tm_gallery_compatibility_actions",{event_data:r,product_element:l,form:c})}function Fe(s,o,a){var r,c,l,d,u,h,m,f,p,g,v,b,j,y,_,w,O,x,C,E,k,A,S,M;return s.is_associated?{}:(_=!1,d=n(".images"),E=n(".yith_magnifier_zoom"),x=d.find(".yith_magnifier_zoom").first().attr("href"),C=x,A=d.find(".yith_magnifier_zoom img").first().attr("src"),v=!1,p=n(".iosSlider.product-gallery-slider,.iosSlider.product-slider"),y=!1,g=a.find(".images .fusion-flexslider"),S=o.data("elevateZoom")||!1,k=a.find("div.product-images .woocommerce-main-image"),l=!1,c=a.find(".images .easyzoom"),m=!1,r=a.find(".images .easyzoom"),h=!1,f=a.find(".woocommerce-product-gallery"),O=!1,u=e.wc_single_product_params,w=typeof n.fn.zoom=="function"&&u&&u.zoom_enabled,j=!1,e.yith_magnifier_options&&d.data("yith_magnifier")&&(_=!0),p.length&&p.iosSlider&&(v=!0),g.length&&g.flexslider&&(y=!0),c.length&&c.filter(".images .easyzoom.first").data("easyZoom")&&(c=c.filter(".images .easyzoom.first").data("easyZoom"),l=!0),l||(r=a.find(".images .has-image-zoom .slide"),r.length&&r.filter(".images .has-image-zoom .slide.first").data("easyZoom")&&(r=r.filter(".images .has-image-zoom .slide.first").data("easyZoom"),m=!0)),t.readyState==="complete"?setTimeout(function(){c.length&&c.data("easyZoom")&&(c=c.data("easyZoom"),l=!0),r.length&&r.data("easyZoom")&&(r=r.data("easyZoom"),m=!0)},150):i.on("load",function(){setTimeout(function(){c.length&&c.data("easyZoom")&&(c=c.data("easyZoom"),l=!0),r.length&&r.data("easyZoom")&&(r=r.data("easyZoom"),m=!0)},150)}),f.length&&f.data("flexslider")&&(h=!0,typeof n.fn.zoom=="function"&&u&&u.zoom_enabled&&(b=o.closest(".woocommerce-product-gallery__image"),b.length>0&&o.width()>n(".woocommerce-product-gallery").width()&&(O=b,o.data.wc27_zoom_target=O))),!h&&w&&(j=a.find(".woocommerce-product-gallery__image")),M={is_yith_wcmg:{type:"yith",enabled:_,element:d,yith_wcmg_zoom:E,_yith_wcmg_default_zoom:C,yith_wcmg_default_image:A},is_iosSlider:{type:"iosslider",enabled:v,element:p},is_flexslider:{type:"flexslider",enabled:y,element:g},is_elevateZoom:{type:"elevatezoom",enabled:S,element:k},is_easyzoom:{type:"easyzoom",enabled:l,element:c},is_easyzoom_flatsome:{type:"easyzoom-flatsome",enabled:m,element:r},is_wc27_gallery:{type:"woocommerce",enabled:h,element:f},is_zoom_enabled:{type:"zoom",enabled:!h&&w,element:j}},M)}function dt(t){var r,d,p,b,j,_,m=t.is_associated?t.this_epo_container:t.this_epo_container.not(o.epoSelector+" "+o.associatedEpoSelector),h=t.variations_form,v=t.main_product,f=t.form,l=Te(t),a=[],y=t.is_associated?"tc_":"",c=T(t,l),g=Fe(t,c,l);n(c).length>0&&(f.on(y+"reset_image.tcpi",function(){setTimeout(function(){s.tm_epo_global_image_recalculate==="yes"&&(c=T(t,l),n.tc_product_image_store=_),n.tc_product_image=n.tc_replace_object_values(n.tc_product_image,n.tc_product_image_store),a=[],n(m.find(".tm-product-image:checked,select.tm-product-image")).add(h.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){r=n(this),u(r)&&r.val()!==""&&a.push(r)}),a.length?a[a.length-1].trigger("tm_trigger_product_image"):n.tc_product_image_store=n.tc_populate_store(c,l)},e.tc_epo_product_image_change_delay||0)}),f.on(y+"found_variation.tcpi",function(){setTimeout(function(){s.tm_epo_global_image_recalculate==="yes"&&(c=T(t,l)),ot(c,l),a=[],n(m.find(".tm-product-image:checked,select.tm-product-image")).add(h.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){r=n(this),u(r)&&r.val()!==""&&a.push(r)}),a.length&&(st(c,l),a[a.length-1].trigger("tm_trigger_product_image"))},e.tc_epo_product_image_change_delay||0)}),n.tc_product_image_store=n.tc_maybe_copy_object_values_from_img(n.tc_product_image_store,c,l),_=n.epoAPI.util.deepCopyArray(n.tc_product_image_store),v.off("tm_change_product_image").on("tm_change_product_image",function(o,i){var v;if(o.stopImmediatePropagation(),d=i.element,b=i.element_current,d&&b){if(j=d.data("imagep"),p="",j!==""?p="imagep":d.data("changes-product-image")==="images"&&(p="image"),v=i.element_current.data("image-variations"),v&&(v=v[p]),v===void 0)return;if(a=[],n(m.find(".tm-product-image:checked,select.tm-product-image")).add(h.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){r=n(this),r.is("option")&&(r=r.closest("select")),u(r)&&r.val()!==""&&a.push(r)}),a.length&&!a[a.length-1].is(d))return;setTimeout(function(){s.tm_epo_global_image_recalculate==="yes"&&(c=T(t,l)),De(v,c,l),F(g,c,v.image_link,!1,i,f,l)},e.tc_epo_product_image_change_delay||0)}}),v.off("tm_restore_product_image").on("tm_restore_product_image",function(e,t){if(e.stopImmediatePropagation(),d=!!t&&t.element,a=[],d&&(n(m.find(".tm-product-image:checked,select.tm-product-image")).add(h.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){r=n(this),u(r)&&r.val()!==""&&a.push(r)}),a.length&&!a[a.length-1].is(d))){a[a.length-1].trigger("tm_trigger_product_image");return}De(!1,c,l),F(g,!1,c.attr("src"),!1,t,f,l)}),a=[],n(m.find(".tm-product-image:checked,select.tm-product-image")).add(h.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){r=n(this),u(r)&&r.val()!==""&&a.push(r)}),a.length&&a[a.length-1].trigger("tm_trigger_product_image")),i.trigger("tm_product_image_loaded")}function ut(t){var a,m,f,g,v,b=t.is_associated?t.this_epo_container:t.this_epo_container.not(o.epoSelector+" "+o.associatedEpoSelector),h=t.main_product,l=t.product_id,c=t.form,p=Te(t),d=[],s=T(t,p),r=Fe(t,s,p);n(s).length>0&&(s.data("tm-current-image",!1),m=s.closest("a"),f=s.attr("src"),g=s.width(),v=s.height(),h.off("tm_change_product_image").on("tm_change_product_image",function(t,o){var d,h,m,f,p,j,y,_,w,O,x,E,b=[],C=o.element.closest(".cpf-section"),A=C.is(".tm-epo-variation-section"),k=o.epo_holder;if(A&&(k=C),_=k.find(".tm-product-image:checked,select.tm-product-image"),b=[],j=o.element.attr("id"),y=!0,w=o.main_product,h=w.closest("#product-"+l),x=g,E=v,m=n("<div class='blockUI blockOverlay tm-preloader-img'></div>"),h.length<=0&&(h=w.closest(".post-"+l)),p=h.find("#"+j+"_tmimage"),p.length===0&&(p=s),O=function(){m.remove(),c.tc_image_update(!1),s.data("tm-current-image",!1),h.find(".tm-clone-product-image").hide(),s.show()},o.src===p.attr("src")&&p.is(":visible"))return;if(o.src===!1){O();return}m.css({width:x,height:E}),_.each(function(){a=n(this),u(a)&&Le(a)&&Q({element:a.closest(".cpf-element"),operator:"isnotempty",value:""})&&b.push(a)}),b.length&&(_=b[b.length-1]),_.attr("id")!==o.element.attr("id")&&(y=!1),d=s.tcClone(),f=new Image,d.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),y&&s.before(m),r.is_yith_wcmg.yith_wcmg_default_zoom=r.is_yith_wcmg.element.find(".yith_magnifier_zoom").first().attr("href"),r.is_yith_wcmg.yith_wcmg_default_image=r.is_yith_wcmg.element.find(".yith_magnifier_zoom img").first().attr("src"),f.onerror=function(){O()},f.onload=function(){if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0){this.onerror();return}}else if(this.width+this.height===0){this.onerror();return}h.find("#"+j+"_tmimage").remove(),h.find(".tm-clone-product-image").hide(),d.prop("src",f.src).hide(),s.hide().after(d),d.css("opacity",0).show(),F(r,d,f.src),m.animate({opacity:0},750,"easeOutExpo",function(){m.remove()}),d.animate({opacity:1},e.tc_epo_image_animation_delay||1500,"easeOutExpo",function(){}),i.trigger("tm_change_product_image_loaded",{src:o.src,element:o.element,main_product:o.main_product,epo_holder:o.epo_holder})},d.attr("id",j+"_tmimage").addClass("tm-clone-product-image").hide(),d.attr("src-orig")&&d.attr("src-orig",o.src),y?(f.src=o.src,c.tc_image_update(o.element,d),s.data("tm-current-image",j),i.trigger("tm_change_product_image_show",{src:o.src,element:o.element,main_product:o.main_product,epo_holder:o.epo_holder})):(d.prop("src",o.src).hide(),s.after(d)),i.trigger("tm_change_product_image_end",{src:o.src,element:o.element,main_product:o.main_product,epo_holder:o.epo_holder})}),h.off("tm_restore_product_image").on("tm_restore_product_image",function(e,t){var n,o,a,d,u,h,p,g,v,b,j,y,_,w;if(!t||!t.element)return!1;if(i.trigger("tm_restore_product_image_pre",{element:t.element,main_product:t.main_product,epo_holder:t.epo_holder}),a=t.element.attr("id"),j=t.main_product,n=j.closest("#product-"+l),p=t.element.closest(".cpf-section"),y=p.is(".tm-epo-variation-section"),d=!1,v=f,b=t.epo_holder,y&&(b=p),n.length<=0&&(n=j.closest(".post-"+l)),_=n.find("#"+a+"_tmimage").is(":visible"),n.find("#"+a+"_tmimage").remove(),n.find(".tm-clone-product-image").length===0)s.show(),s.data("tm-current-image",!1),c.tc_image_update(!1);else{if(!_){i.trigger("tm_restore_product_image_loaded_exit",{element:t.element,main_product:t.main_product,epo_holder:t.epo_holder});return}w=n.find(".tm-clone-product-image").length,a=s.data("tm-current-image");for(o=w-1;o>=0;o-=1){if(u=n.find(".tm-clone-product-image").eq(o),h=u.attr("id").replace("_tmimage",""),g=b.find("[id='"+h+"']"),g.is(":checked")&&g.closest(".cpf-element").is(":visible")){n.find(".tm-clone-product-image").eq(o).show(),m.attr("href",n.find(".tm-clone-product-image").eq(o).prop("src")),s.data("tm-current-image",h),d=!0;break}n.find(".tm-clone-product-image").eq(o).hide()}d?n.find("#"+a+"_tmimage").remove():(s.show(),s.data("tm-current-image",!1),c.tc_image_update(!1))}d&&(v=u.attr("src")),F(r,!1,v,n.find(".tm-clone-product-image").filter(":visible").length),i.trigger("tm_restore_product_image_loaded",{element:t.element,main_product:t.main_product,epo_holder:t.epo_holder})}),h.off("tm_attempt_product_image").on("tm_attempt_product_image",function(e,t){var i,d,h,p,g,v,b,y,_,w,O,x,C,E,k,j=t.main_product,o=j.closest("#product-"+l);if(t.element?b=t.element.closest(".cpf-section"):b=n(j.find(".tm-epo-variation-section").first(),t.epo_holder),k=b.is(".tm-epo-variation-section"),d=t.epo_holder,k&&(d=b),h=d.find(".tm-product-image:checked,select.tm-product-image"),p=[],w="",v=!1,g=s.data("tm-current-image"),x=f,o.length<=0&&(o=j.closest(".post-"+l)),d=j.find(".tm-epo-variation-section").first().add(t.epo_holder),h=d.find(".tm-product-image:checked,select.tm-product-image"),h.each(function(){a=n(this),u(a)&&Le(a)&&Q({element:a.closest(".cpf-element"),operator:"isnotempty",value:""})&&p.push(a)}),p.length&&(h=p[p.length-1],w=h.attr("id")),p.length&&h.length&&(!g||w!==g)){h.last().trigger("tm_trigger_product_image");return}if(E=d.find("[id='"+g+"']").closest(".cpf-element"),!g||E.data("isactive")!==!1&&E.closest(".cpf-section").data("isactive")!==!1)return;if(o.find("#"+g+"_tmimage").remove(),O=o.find(".tm-clone-product-image").length,O===0)s.show(),s.data("tm-current-image",!1),c.tc_image_update(!1);else{for(i=O-1;i>=0;i-=1){if(y=o.find(".tm-clone-product-image").eq(i),_=y.attr("id").replace("_tmimage",""),C=d.find("[id='"+_+"']"),C.is(":checked")&&C.closest(".cpf-element").is(":visible")){o.find(".tm-clone-product-image").eq(i).show(),m.attr("href",o.find(".tm-clone-product-image").eq(i).prop("src")),s.data("tm-current-image",_),v=!0;break}o.find(".tm-clone-product-image").eq(i).hide()}v||(s.show(),s.data("tm-current-image",!1),c.tc_image_update(!1))}v&&(x=y.attr("src")),F(r,!1,x,o.find(".tm-clone-product-image").filter(":visible").length)}),n(b.find(".tm-product-image:checked,select.tm-product-image")).add(h.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){a=n(this),u(a)&&a.val()!==""&&d.push(a)}),d.length&&d[d.length-1].trigger("tm_trigger_product_image")),i.trigger("tm_product_image_loaded")}function Me(t){setTimeout(function(){s.tm_epo_global_product_image_mode==="inline"?ut(t):dt(t)},e.tc_epo_product_image_setup_delay||0)}function mt(e){i.trigger("tm-epo-compatibility",{epo:e})}function oe(e){if(!ce)return;e.find(".tm-range-picker").toArray().forEach(function(t){var m,i=n(t),a=i.attr("data-step").split("."),f=e.find("#"+n.epoAPI.dom.id(i.attr("data-field-id"))),u=parseFloat(i.attr("data-min")),c=parseFloat(i.attr("data-max")),r=parseFloat(i.attr("data-start")),h=parseFloat(i.attr("data-step")),l=i.attr("data-show-picker-value"),p=i.closest("li").find(".tm-show-picker-value"),d=parseFloat(i.attr("data-noofpips")),v=null;if(i.data("tc-picker-init"))return;i.data("tc-picker-init",1),a.length===1?a=0:a=a[1].length,Number.isFinite(u)||(u=0),Number.isFinite(c)||(c=0),c<=u&&(c=parseFloat(c)+1),r=n.epoAPI.math.unformat(r,o.localDecimalSeparator),Number.isFinite(r)||(r=0),r=g(r,{precision:a}),Number.isFinite(h)||(h=0),Number.isFinite(d)||(d=10),d<2&&(d=2),i.attr("data-pips")==="yes"&&(v={mode:"count",values:d,filter:function(e,t){return e=parseFloat(n.epoAPI.math.toFixed(e,a)),h<=0?0:t===1&&!Number.isInteger(e)?2:t},format:{from:function(e){return n.epoAPI.math.unformat(e,o.localInputDecimalSeparator)},to:function(e){return g(e,{precision:a})}},density:2}),ce.create(i.get(0),{direction:s.text_direction,start:r,step:h,connect:"lower",behaviour:"tap",format:{from:function(e){return n.epoAPI.math.unformat(e,o.localDecimalSeparator)},to:function(e){return g(e,{precision:a})}},range:{min:[u],max:[c]},pips:v,tooltips:{from:function(e){return n.epoAPI.math.unformat(e,o.localInputDecimalSeparator)},to:function(e){return g(e,{precision:a})}}}),m=i.find(".noui-handle-lower"),i.get(0).noUiSlider.on("slide",function(){f.trigger("change.cpf")}),i.get(0).noUiSlider.on("update",function(e,t){e[t]=n.epoAPI.math.unformat(e[t],o.localDecimalSeparator),t=0,l!=="left"&&l!=="right"&&m.attr("title",g(e[t],{precision:a})),f.val(e[t]).trigger("change"),l!==""&&p.html(g(e[t],{precision:a}))}),l!==""&&p.html(r),l!=="left"&&l!=="right"&&(m.attr("title",r),i.addClass("noui-show-tooltip"))})}function Ae(){if(!ce||l.data("setRangePickersEvents"))return;l.on("click",".tm-show-picker-value",function(){var e,t=n(this),s=t.closest(".tmcp-field-wrap"),i=s.find(".tmcp-range").val(),o=t.closest(".tmcp-field-wrap").find(".tm-range-picker");t.addClass("tc-hidden").after(n('<input type="number" class="tm-show-picker-value-edit">')),e=s.find(".tm-show-picker-value-edit"),e.focus().val(i).wrap('<div class="tm-show-picker-value-edit-wrap"></div>'),e.attr("step",o.attr("data-step")),e.attr("min",o.attr("data-min")),e.attr("max",o.attr("data-max")),l.data("range-picker-edit",s.find(".tm-show-picker-value-edit"))}),l.on("change input",".tm-show-picker-value-edit",function(){var t=n(this),s=t.closest(".tmcp-field-wrap").find(".tm-range-picker"),e=s.attr("data-step").split("."),o=t.val();e.length===1?e=0:e=e[1].length,s.get(0).noUiSlider.set([g(o,{precision:e}),null])}),l.on("keydown",".tm-show-picker-value-edit",function(e){var t=e.which;t===13&&e.preventDefault()}),l.on("click",function(e){var t;if(!l.data("range-picker-edit")||n(e.target).is(".tm-show-picker-value"))return;n(e.target).closest(".tm-show-picker-value-edit-wrap").length===0&&(t=l.data("range-picker-edit"),t.closest(".tmcp-field-wrap").find(".tm-show-picker-value").data("has-edit",0).removeClass("tc-hidden"),t.closest(".tm-show-picker-value-edit-wrap").remove(),l.removeData("range-picker-edit"))}),l.data("setRangePickersEvents",1)}function gt(e,t){var o,s=n(t),c=n.tm_datepicker._getInst(s[0]),i=s.data("tc-enabled_only_dates"),l=s.data("tc-disabled_weekdays"),d=s.data("tc-disabled_months"),a=s.data("tc-disabled_dates"),r=s.data("tc-format"),u=e.getDay(),h=e.getDay()+1;return!!n.tm_datepicker._isInRange(c,e)&&(i!==""?(o=n.tm_datepicker.formatDate(r,e),i.indexOf(o)!==-1):l.indexOf(u.toString())===-1&&d.indexOf(h.toString())===-1&&(a===""||(o=n.tm_datepicker.formatDate(r,e),a.indexOf(o)===-1)))}function ke(e){if(e.toString().isNumeric()&&(s=e===0?e:e>0?1:-1,s!==0)){n=new Date,o=1,t=!1,i=Math.abs(e);for(var t,n,s,o,i;o<=i;)t===!1&&(t=0),n.setDate(n.getDate()+1*s),t++,n.getDay()!==0&&n.getDay()!==6&&o++;t!==!1&&(e=t*s)}return e}function V(o){var a,r,c=".tm-epo-timepicker";if(!n.tm_datepicker)return;a=n("input").map(function(){return this.id}).get().join(" "),r=t.createElement("input"),r.setAttribute("type","date"),r.type==="text"&&(c=".tm-epo-system-timepicker"),o.find(c).toArray().forEach(function(t){var o=n(t),u=null,h=null,m=o.attr("data-time-format").trim(),f=o.attr("data-time-theme").trim(),p=o.attr("data-time-theme-size").trim(),g=o.attr("data-time-theme-position").trim(),r=o.attr("data-tranlation-hour").trim(),c=o.attr("data-tranlation-minute").trim(),d=o.attr("data-tranlation-second").trim();o.attr("type","text"),o.attr("data-min-time").trim()!==""&&(u=o.attr("data-min-time").trim()),o.attr("data-max-time").trim()!==""&&(h=o.attr("data-max-time").trim()),o.attr("data-custom-time-format").trim()!==""&&(m=o.attr("data-custom-time-format").trim()),r||(r=s.hourText),c||(c=s.minuteText),d||(d=s.secondText),o.tm_timepicker(Object.assign({isRTL:s.isRTL,hourText:r,minuteText:c,secondText:d,timeFormat:m,minTime:u,maxTime:h,closeText:s.closeText,showOn:"both",buttonText:"",beforeShow:function(e,t){n(t.dpDiv).removeClass(a).removeClass("tm-ui-skin-epo tm-ui-skin-epo-black tm-datepicker-medium tm-datepicker-small tm-datepicker-large tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+f+" tm-timepicker tm-datepicker tm-datepicker-"+g+" tm-datepicker-"+p).appendTo("body"),l.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){o.tm_timepicker("hide")}),y.addClass("tm-static"),o.prop("readonly",!0),i.trigger({type:"tm-timepicker-beforeShow",input:e,inst:t})},onClose:function(){y.removeClass("tm-static"),o.prop("readonly",!1),o.trigger("change")}},e.tmTimepickerSettings||e.timepicker_settings||{})),n("#ui-tm-datepicker-div").hide()}),o.find(".tm-epo-datepicker").toArray().forEach(function(t){var g,v,w,O,r=n(t),j=parseInt(r.attr("data-start-year").trim(),10),_=parseInt(r.attr("data-end-year").trim(),10),h=r.attr("data-min-date").trim(),m=r.attr("data-max-date").trim(),d=r.attr("data-disabled-dates").trim(),c=r.attr("data-enabled-only-dates").trim(),b=r.attr("data-exlude-disabled").trim(),f=r.attr("data-disabled-weekdays").trim().split(","),p=r.attr("data-disabled-months").trim().split(","),u=r.attr("data-date-format").trim(),x=r.attr("data-date-showon").trim(),C=r.attr("data-date-defaultdate").trim(),E=r.attr("data-date-theme").trim(),k=r.attr("data-date-theme-size").trim(),A=r.attr("data-date-theme-position").trim();d!==""&&(g=d.split(","),w=d.indexOf(","),w!==-1&&g.length>0&&(d=g)),c!==""&&(v=c.split(","),O=c.indexOf(","),O!==-1&&v.length>0&&(c=v)),h===""?j===""?h=null:h=new Date(j,1-1,1):b&&(h=ke(h)),m===""?_===""?m=null:m=new Date(_,12-1,31):b&&(m=ke(m)),r.data("tc-enabled_only_dates",c),r.data("tc-disabled_weekdays",f),r.data("tc-disabled_months",p),r.data("tc-disabled_dates",d),r.data("tc-format",u),r.tm_datepicker(Object.assign({monthNames:s.monthNames,monthNamesShort:s.monthNamesShort,dayNames:s.dayNames,dayNamesShort:s.dayNamesShort,dayNamesMin:s.dayNamesMin,isRTL:s.isRTL,showOtherMonths:!0,selectOtherMonths:!0,showOn:x,defaultDate:C,buttonText:"",showButtonPanel:!0,firstDay:s.first_day,closeText:s.closeText,currentText:s.currentText,dateFormat:u,minDate:h,maxDate:m,onSelect:function(){var s,h,e=n(this),l="#"+n.epoAPI.dom.id(e.attr("id")),t=e.tm_datepicker("getDate"),a="",i="",r="",m=o.find(l+"_day"),g=o.find(l+"_month"),v=o.find(l+"_year");t&&(a=t.getDate(),i=t.getMonth()+1,r=t.getFullYear(),h=n.tm_datepicker.formatDate(u,t),(p.indexOf(i.toString())!==-1||f.indexOf(t.getDay().toString())!==-1||d.indexOf(h)!==-1||c!==""&&c.indexOf(h)===-1)&&(s=e.data("tm-last-date"),e.data("tm-last-date")?s=e.data("tm-last-date"):s="",e.val(s),e.tm_datepicker("setDate",s),s?(t=e.tm_datepicker("getDate"),a=t.getDate(),i=t.getMonth()+1,r=t.getFullYear()):(a="",i="",r=""))),m.val(a),g.val(i),v.val(r),e.data("tm-last-date",e.val()),e.tm_datepicker("hide")},beforeShow:function(e,t){n(t.dpDiv).removeClass(a).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+E+" tm-datepicker tm-datepicker-"+A+" tm-datepicker-"+k).appendTo("body"),l.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){r.tm_datepicker("hide")}),l.off("click",".ui-tm-datepicker-current").on("click",".ui-tm-datepicker-current",function(){var s,o=new Date,i=n.tm_datepicker._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth(),o.getDate())),l=i.getDay(),h=i.getMonth()+1,m="#"+t.id.replace(/\\\\/g,"\\"),e=!1,a=r.tm_datepicker("getDate");if(c!=="")s=n.tm_datepicker.formatDate(u,a),e=c.indexOf(s)!==-1;else if(p.indexOf(h.toString())!==-1||f.indexOf(l.toString())!==-1)e=!1;else{if(d!=="")return s=n.tm_datepicker.formatDate(u,a),[d.indexOf(s)===-1,""];e=!0}e&&(n.tm_datepicker._setDate(t,i),n.tm_datepicker._gotoToday(m))}),y.addClass("tm-static"),i.trigger({type:"tm-datepicker-beforeShow",input:e,inst:t})},onClose:function(){y.removeClass("tm-static"),r.trigger("change")},beforeShowDay:function(e){var t,s=e.getDay(),o=e.getMonth()+1;return c!==""?(t=n.tm_datepicker.formatDate(u,e),[c.indexOf(t)!==-1,""]):p.indexOf(o.toString())!==-1||f.indexOf(s.toString())!==-1?[!1,""]:d!==""?(t=n.tm_datepicker.formatDate(u,e),[d.indexOf(t)===-1,""]):[!0,""]}},e.tmDatepickerSettings||{})),n("#ui-tm-datepicker-div").hide()}),o.find(".tmcp-date-select").on("change.cpf",function(){var t="#"+n.epoAPI.dom.id(n(this).attr("data-tm-date")),e=o.find(t),r=e.attr("data-date-format"),s=o.find(t+"_day").val(),i=o.find(t+"_month").val(),a=o.find(t+"_year").val(),c=n.tm_datepicker.formatDate(r,new Date(a,parseInt(i,10)-1,s));s>0&&i>0&&a>0?(e.tm_datepicker("setDate",c),e.trigger("change")):(e.val(""),e.trigger("change.cpf"))}).on("focus.cpf",function(){var a="#"+n.epoAPI.dom.id(n(this).attr("data-tm-date")),u=o.find(a),c=o.find(a+"_day"),l=o.find(a+"_month"),d=o.find(a+"_year"),t=c.val(),s=l.val(),i=d.val(),r=n(this);i!==""&&s!==""&&t!==""||i!==""&&s!==""&&t===""||t!==""&&i!==""&&s===""||t!==""&&s!==""&&i===""?r.find("option").toArray().forEach(function(o){var d,a=n(o),c=a.val(),l=i+"-"+s+"-"+t;if(r.is(".tmcp-date-day")){if(i===""||s==="")return;l=i+"-"+s+"-"+c}else if(r.is(".tmcp-date-month")){if(i===""||t==="")return;l=i+"-"+c+"-"+t}else if(r.is(".tmcp-date-year")){if(t===""||s==="")return;l=c+"-"+s+"-"+t}if(c!=="")try{d=n.tm_datepicker.parseDate("yy-mm-dd",l),d&&(gt(d,u)?a.prop("disabled",!1):a.prop("disabled",!0))}catch(t){e.console.log(t),a.prop("disabled",!0),N=t}}):(c.find("option").prop("disabled",!1),l.find("option").prop("disabled",!1),d.find("option").prop("disabled",!1))}),i.on("resizestart",function(){var s=n(t.activeElement);if(s.is(".hasDatepicker")){if(s.data("resizestarted",!0),n(e).width()<768){s.data("resizewidth",!0);return}s.tm_datepicker("hide")}}),i.on("resizestop",function(){var e=n(t.activeElement);e.is(".hasDatepicker")&&e.data("resizestarted")&&(e.data("resizewidth")&&e.tm_datepicker("hide"),e.tm_datepicker("show")),e.data("resizestarted",!1),e.data("resizewidth",!1)})}function K(e){var a,s=e.epoEventId,r=e.main_product,t=!n.tcepo.formSubmitEvents[s].some(function(e){return typeof e&&(typeof e.trigger=="function"||!1)&&!e.trigger()});return n.tcepo.formSubmitEvents[s].forEach(function(e){a=typeof e,a==="object"&&(t?e.on_true():e.on_false())}),t||setTimeout(function(){r.find(o.addToCartButtonSelector).first().removeClass("disabled").removeClass("loading").prop("disabled",!1).removeClass("fpd-disabled")},100),i.trigger("tm-apply-submit-events",{epo:{form_is_submit:t}}),t}function G(e){var t,a,c=e.form,d=e.this_epo_container,r=e.main_product,h=e.epoEventId;return s.tm_epo_global_enable_validation==="yes"&&(a={},d.find(".tmcp-ul-wrap").toArray().forEach(function(e){var s,o,i,r,c;e=n(e),t=e.data("tm-validation"),t&&n.tmType(t)==="object"&&(s=e.find(".tm-epo-field"),c=s.first().attr("name"),e.is(".tm-extra-product-options-radio.tm-element-ul-radio")?(c=s.last().attr("name"),a[c]=t):e.is(".tm-extra-product-options-checkbox.tm-element-ul-checkbox")?s.each(function(o,i){"required"in t&&(t.required=function(t){var o=e.find("input.tm-epo-field.tmcp-checkbox:checked").length;return o===0?s.last().attr("name")===n(t).attr("name"):o<=0}),a[n(i).attr("name")]=t}):e.is(".tm-extra-product-options-product.tm-element-ul-product")?s.is(":checkbox")?s.each(function(c,l){"required"in t&&(r=n(l),r.is(":checkbox")&&(t.required=function(t){var a,i=e.find("input.tm-epo-field.tmcp-checkbox:checked"),o=i.length;return o===0?s.last().attr("name")===n(t).attr("name"):(a=i.map(function(){return n(this)}).get().some(function(e){return e.closest(".tc-epo-element-product-holder").find(".tm-qty").first().val()<=0}),o>0?a:o<=0)},r.attr("data-type")==="variable"&&(o=r.closest(".tc-epo-element-product-holder").find(".product-variation-id").first().attr("name"),i={required:function(e){var s=n(e),o=s.closest(".tc-epo-element-product-holder"),t=o.find(".tc-epo-field-product");return!!(u(t,!0)&&t.is(":checked"))}},a[o]=i))),a[r.attr("name")]=t}):s.is(":radio")?(t.product_element_radio_qty=!0,a[s.attr("name")]=t,o=s.closest(".tc-element-container").find(".product-variation-id").first().attr("name"),i={required:function(e){var s=n(e),o=s.closest(".tc-element-container"),t=o.find(".tc-epo-field-product:checked");return!!(t.length&&t.attr("data-type")==="variable"&&u(t,!0)&&t.is(":checked"))}},a[o]=i):s.is("select")&&(t.product_element_select_qty=!0,a[s.attr("name")]=t,o=s.closest(".tc-element-container").find(".product-variation-id").first().attr("name"),i={required:function(e){var s=n(e),o=s.closest(".tc-element-container"),t=o.find(".tc-epo-field-product");return!!(t.length&&t.children(":selected").attr("data-type")==="variable"&&u(t,!0))}},a[o]=i):a[c]=t)}),c.removeData("tc_validator"),c.tc_validate({focusInvalid:!1,ignore:o.qtySelector+",.tcdisabled,.tmcp-upload-hidden,#wc_bookings_field_duration,input.tm-qty:hidden[type='number'],input.input-text.qty,.ignore,.variations select,.tc-epo-variable-product-selector,.tm-extra-product-options-variations input,.tm-extra-product-options-variations select,input:not(.tc-extra-product-options input),select:not(.tc-extra-product-options select)",rules:a,errorClass:"tm-error",validClass:"tm-valid",errorElement:"label",errorPlacement:function(e,t){return e.addClass("tc-cell tcwidth tcwidth-100"),s.tm_epo_global_error_label_placement==="before"?t.closest(".tc-element-container").before(e):t.closest(".tc-element-container").after(e),!1},invalidHandler:function(e,t){i.trigger("tm-invalidHandler",{epo:{validator:t}}),setTimeout(function(){r.find(o.addToCartButtonSelector).first().is(".disabled")||(r.find(o.addToCartButtonSelector).first().removeClass("loading").prop("disabled",!1).removeClass("fpd-disabled"),r.find(o.addToCartButtonSelector).first().removeClass("disabled").removeClass("loading").prop("disabled",!1).removeClass("fpd-disabled"))},100),t.errorList&&t.errorList[0]&&t.errorList[0].element&&B(n(t.errorList[0].element),h)},submitHandler:function(){var t;return e.is_quickview||(r.find(o.addToCartButtonSelector).first().addClass("disabled"),t=function(){r.find(o.addToCartButtonSelector).first().removeClass("disabled"),l.off("ajaxSuccess",t)},l.on("ajaxSuccess",t)),K(e)}}),c.find(o.addToCartButtonSelector).on("click",function(e){c.tc_validate().form()||(e.preventDefault(),e.stopImmediatePropagation())}),!0)}function _t(e){var t=e.form,s=e.epoEventId;i.trigger("tm-from-submit",{epo:e,functions:{tm_apply_validation:G,apply_submit_events:K}}),!G(e)&&n.tcepo.formSubmitEvents[s].length&&t.on("submit",function(){K(e)}),i.on("tc_apply_validation",function(){return G(e)})}function wt(e){var t,r=e.epoHolder,i=e.totalsHolder,c=e.totalsHolderContainer,l=e.currentCart,d=e.variationForm,o=e.variation,a=i.data("variations");i.data("current_variation",o),o&&"display_price"in o&&!i.data("tm-epo-is-woocs")?(t=o.display_price,i.data("priceIsWithDiscount","1"),i.removeData("tcprice")):a&&o&&o.variation_id&&a[o.variation_id]!==void 0?(t=a[o.variation_id],i.removeData("tcprice")):o&&n(o.price_html).find(".amount:last").length&&(t=n(o.price_html).find(".amount:last").text(),t=t.replace(s.currency_format_thousand_sep,""),t=t.replace(s.currency_format_decimal_sep,"."),t=t.replace(/[^0-9.]/g,""),t=parseFloat(t),i.removeData("tcprice")),t=Se(t,i,o),i.data("price",t),c.find(".cpf-product-price").val(t),setTimeout(function(){r.find("select.tm-epo-field").trigger("tm-select-change-html-all-math")},100),d.data("tm-styled-variations")||l.trigger({type:"tm-epo-update"})}function r(e,t,s,i,a,r,l,d,u,h,m,f,p){var v,y,w,O,x,C,E,A,S,_="none",k=0;return p||(_=t.attr("class")+t.attr("data-uniqid")+s+e.is_associated+u+d+u+h||"none"),_!=="none"&&j!==!0&&j!==!1&&j[_]!==void 0?j[_]:(v=h?"undiscounted_":"",y=t.find(s),e.is_associated===!1&&(y=y.not(o.associatedEpoSelector+" "+s+",.cpf-type-variations "+s)),d||(y=y.filter(".tcenabled")),i||(i=0),a||(a=0),S=i,A=i,w=i,O=a,r||(r=[]),x=e.this_epo_totals_container,y.length&&y.toArray().forEach(function(t){var p,j,y,_,M,F,T,N,L,H,B,V,o=n(t),h="",E=o.closest(".cpf-element"),U=o.closest(".tmcp-field-wrap"),P=E.attr("data-fblabelshow"),W=E.attr("data-fbvalueshow"),$="",I=U.find(".tm-qty").val(),D="",R=!1;s===".tc-epo-field-product"&&(E.is(".cpf-type-product-thumbnailmultiple")||E.is(".cpf-type-product-checkbox")?C=o.closest(".tc-epo-element-product-holder").find(".tc-extra-product-options-inline"):E.is(".cpf-type-product-thumbnail")||E.is(".cpf-type-product-radio")||E.is(".cpf-type-product-dropdown")?C=E.find('.tc-epo-element-product-container[data-product_id="'+o.val()+'"]').find(".tc-extra-product-options-inline"):E.is(".cpf-type-product-single")&&(C=E.find(".tc-extra-product-options-inline")),x=n(".tc-epo-totals.tm-product-id-"+C.attr("data-product-id")+'[data-epo-id="'+C.attr("data-epo-id")+'"]')),x.length&&(P===""&&($=E.find(".tc-epo-element-label-text").html()),I===void 0&&(I=""),m&&b(e,o,void 0,void 0,void 0,void 0,S,A),o.is(":checkbox, :radio, :input")&&(_=0,p=0,M=0,j=0,o.is(".tmcp-checkbox, .tmcp-radio")?d||o.is(":checked")?(_=o.data(v+"raw_price"),p=o.data(v+"price"),M=o.data(v+"raw_original_price"),j=o.data(v+"original_price"),l=!0,o.data("isset",1),B=o.closest("li.tmcp-field-wrap"),T=B.find(".tc-image"),h="",D="",H=o.closest("li.tmcp-field-wrap").find(".tc-label-text"),H.length&&(h=H.html(),D=h),T.length&&(T=T.closest(".tc-label-wrap").clone().addClass("tc-img-floating"),T.find(".tc-label, .tc-epo-style-wrapper, .tc-input-wrap").remove(),h=T[0].outerHTML+'<span class="tc-label-text">'+h+"</span>"),R=!0):o.data("isset",0):o.is(".tmcp-select")?(y=o.find("option:selected"),_=y.data(v+"raw_price"),p=y.data(v+"price"),M=y.data(v+"raw_original_price"),j=y.data(v+"original_price"),L=o.children("option:selected"),L.val()===""&&L.attr("data-rulestype")===""||(l=!0),o.find("option").data("isset",0),y.data("isset",1),y.val()===""&&y.attr("data-rulestype")===""||(h=y.attr("data-text"),R=!0,D=h)):o.is(".tmcp-selectmultiple")?(y=o.find("option:selected"),y.toArray().forEach(function(e){e=n(e),_=_+n.epoAPI.math.toFloat(e.data(v+"raw_price")),p=p+n.epoAPI.math.toFloat(e.data(v+"price")),M=M+n.epoAPI.math.toFloat(e.data(v+"raw_original_price")),j=j+n.epoAPI.math.toFloat(e.data(v+"original_price")),L=o.children("option:selected"),L.val()===""&&L.attr("data-rulestype")===""||(l=!0),o.find("option").data("isset",0),e.data("isset",1),e.val()===""&&e.attr("data-rulestype")===""||(h=e.attr("data-text"),R=!0,D=h)})):(F=o.val(),o.is("[type='file']")&&(F=F.replace("C:\\fakepath\\","")),F?o.is(".tmcp-range")&&F==="0"?o.data("isset",0):(_=o.data(v+"raw_price"),p=o.data(v+"price"),M=o.data(v+"raw_original_price"),j=o.data(v+"original_price"),l=!0,o.data("isset",1),h=F,o.is(".tmcp-range")&&(V=o.closest(".tmcp-field-wrap").find(".tm-range-picker"),N=V.attr("data-step").split("."),N.length===1?N=0:N=N[1].length,h=g(h,{precision:N})),R=!0,o.is(".tmcp-dynamic")&&(P="hidden",W="hidden"),D=F):o.data("isset",0)),_||(_=0),M||(M=0),p||(p=0),j||(j=0),R&&r.push({title:$,value:h,valueText:D,price:p,original_price:j,quantity:I,label_show:P,value_show:W,input_type:o.attr("type")}),p=c(_,x,o,void 0,void 0,void 0,!0),j=c(M,x,o,void 0,void 0,void 0,!0),u&&(_=p,M=j),i=n.epoAPI.math.toFloat(i)+n.epoAPI.math.toFloat(_),i=n.epoAPI.math.toFloat(n.epoAPI.math.round(i,10)),a=n.epoAPI.math.toFloat(a)+n.epoAPI.math.toFloat(M),a=n.epoAPI.math.toFloat(n.epoAPI.math.round(a,10)),w=n.epoAPI.math.toFloat(w)+n.epoAPI.math.toFloat(p),w=n.epoAPI.math.toFloat(n.epoAPI.math.round(w,10)),k=k+n.epoAPI.math.toFloat(z(p,x)),O=n.epoAPI.math.toFloat(O)+n.epoAPI.math.toFloat(j),O=n.epoAPI.math.toFloat(n.epoAPI.math.round(O,10)),f&&(A=i)))}),E={total:i,original_total:a,total_taxed:w,original_total_taxed:O,vat_total:k,floatingBoxData:r,showTotal:l,elementsLength:y.length},j===!0?(j={},j[_]=E):j!==!0&&j!==!1&&(j[_]=E),E)}function Ce(e,t,a,r,c,l,d,u,h){var v,g=n.extend(!0,{},e),m=a.find(o.associatedEpoSelector),f=a,p=!0;if(f.closest(".cpf-element").is(".tc-hidden"))return;d.addClass("tm-hidden"),d.length&&Be(d,!0),r==="variable"?a.is(".tc-init-variations")?a.trigger("refresh.tc-variation-form"):(a.addClass("variations_form"),setTimeout(function(){v=_(f,!1,m.attr("data-product-id"),m.attr("data-epo-id"),c,g),a.addClass("tc-init-variations"),a.tc_product_variation_form(c,l,d,v)},40),p=!1):a.is(".tc-init-product")||(a.addClass("tc-init-product"),d.find(".tc-epo-element-variable-product").removeClass("variations_form"),d.find(".tc-epo-element-variations").removeClass("variations"),setTimeout(function(){_(f,!1,m.attr("data-product-id"),m.attr("data-epo-id"),c,g)},20),p=!1),setTimeout(function(){d.length&&Be(a,!1)},200),setTimeout(function(){h.length&&h.trigger("change"),a.find(o.epoSelector).length===0&&a.addClass("no-epo"),a.removeClass("tm-hidden"),p&&(i.trigger("cpflogicdone"),a.find(".tm-quantity").trigger("showhide.cpfcustom")),u===void 0&&s.tm_epo_global_product_element_scroll==="yes"&&i.tcScrollTo(a,200,n.epoAPI.math.toFloat(s.tm_epo_global_product_element_scroll_offset))},210)}function ae(t,a,u){var m,f,y,x,oe,w,O,C,D,de,ie,F,T,H,B,V,U,Q,ne,se,K,ae=t.product_id,p=t.main_product,_=t.main_cart,ce=t.this_epo_container,ue=t.this_totals_container,G=t.this_epo_totals_container,R=t.epoEventId,re=t.main_epo_inside_form,fe=t.epo_id_selector,me=t.epo_id,he=t.product_id_selector,N="main",le=t.is_associated?"tc-variation-form":"wc-variation-form",S=t.is_associated?"tc_":"";u&&a?(N=n.epoAPI.applyFilter("tc_get_item_id",a.attr("data-item_id"),a),f=p.find(".tm-extra-product-options.tm-cart-"+N),x=p.find(".tm-totals-form-"+N),m=p.find(".tm-epo-totals.tm-cart-"+N),w=a.find(".variations_form").first()):((!_||_.length===0)&&(ce.is(".tc-shortcode")?_=p:_=ee(p,p,"form",ae)),a=_.parent(),f=ce,x=ue,m=G,w=t.variations_form),t.is_associated&&(N=f.attr("data-cart-id")),y=u||_,m.data("tm_for_cart",y),oe=I(y),D=L(y),m.data("variationIdElement",Qe(y,".wceb_picker_wrap "+oe)),m.data("qty_element",D),O=m.data("type"),w.data("tc_product_id",ae),C=m.attr("data-tm-epo-final-total-box"),de=m.attr("data-tm-epo-show-final-total"),ie=m.attr("data-tm-epo-show-options-total"),i.on("epoCalculateRules",function(e,n){e&&n&&n.currentCart&&Y(t,n.currentCart)}),y.is("form")&&y.on("reset",function(){var e=n(this);setTimeout(function(){n(e.data("epo_id_selector")).find(".tm-epo-field").trigger("change")},1)}),Y(t,y),F=f.find(".tm-epo-field"),t.is_associated||(F=F.not(o.epoSelector+" "+o.associatedEpoSelector+" .tm-epo-field")),Q=f.find(".tm-epo-field.tmcp-textarea,.tm-epo-field.tmcp-textfield"),t.is_associated||(Q=Q.not(o.epoSelector+" "+o.associatedEpoSelector+" .tm-epo-field")),ne=f.find(".tm-epo-reset-radio"),t.is_associated||(ne=ne.not(o.epoSelector+" "+o.associatedEpoSelector+" .tm-epo-reset-radio")),se=f.find(".tm-epo-field.tmcp-upload"),t.is_associated||(se=se.not(o.epoSelector+" "+o.associatedEpoSelector+" .tm-epo-field.tmcp-upload")),K=f.find(".tm-has-clearbutton .tm-epo-field"),t.is_associated||(K=K.not(o.epoSelector+" "+o.associatedEpoSelector+" .tm-has-clearbutton .tm-epo-field")),H=f.find(".tm-quantity .tm-qty"),t.is_associated||(H=H.not(o.epoSelector+" "+o.associatedEpoSelector+" .tm-quantity .tm-qty")),V=f.find(".tm-quantity"),t.is_associated||(V=V.not(o.epoSelector+" "+o.associatedEpoSelector+" .tm-quantity")),B=f.find("select.tm-epo-field"),t.is_associated||(B=B.not(o.epoSelector+" "+o.associatedEpoSelector+" select.tm-epo-field")),B.off("tm-select-change-html").on("tm-select-change-html",function(){var t,o,i,a,r,e=n(this);if(e.is(".tc-epo-field-product")||e.is(".tmcp-selectmultiple"))return;if(_&&_.data("per_product_pricing")!==void 0&&!_.data("per_product_pricing"))return;i=h(e.find("option:selected").data("price"),m,!0,!1,e),a=h(e.find("option:selected").data("original_price"),m,!0,!1,e),t=e.closest(".tmcp-field-wrap").find(".tc-tooltip"),o=e.closest(".tmcp-field-wrap").find(".tc-inline-description"),M(e.closest(".tmcp-field-wrap").find(".tc-price"),e.find("option:selected").data("price"),i,e.find("option:selected").data("original_price"),a),t.length>0&&t.attr("data-tm-tooltip-html",e.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed"),o.length>0&&(e.find("option:selected").attr("data-tm-tooltip-html")?o.html(e.find("option:selected").attr("data-tm-tooltip-html")):o.html("")),(e.find("option:selected").attr("data-hide-amount")==="0"||s.tm_epo_show_price_inside_option_hidden_even==="yes")&&s.tm_epo_show_price_inside_option==="yes"&&e.find("option:selected").attr("data-text")&&(e.find("option:selected").data("price")||s.tm_epo_no_hide_price_if_original_not_zero==="yes"&&e.find("option:selected").data("original_price"))&&(s.tm_epo_auto_hide_price_if_zero==="yes"&&n.tmempty(e.find("option:selected").data("price"))===!1||s.tm_epo_auto_hide_price_if_zero!=="yes"&&e.find("option:selected").attr("data-price")!==""?(r="",e.find("option:selected").html(e.find("option:selected").attr("data-text")+" ("+r+i+")")):e.find("option:selected").html(e.find("option:selected").attr("data-text"))),e.val()===""?t.addClass("tm-hidden"):e.find("option:selected").attr("data-tm-tooltip-html")?t.removeClass("tm-hidden"):t.addClass("tm-hidden")}).off("tm-math-select-change-html-all tm-select-change-html-all tm-select-change-html-all-math").on("tm-math-select-change-html-all tm-select-change-html-all tm-select-change-html-all-math",function(e){var o,a,r,c,l,i=n(this);if(i.is(".tc-epo-field-product"))return;if(a=i.closest(".tmcp-field-wrap").find(".tc-tooltip"),c=i.closest(".tmcp-field-wrap").find(".tc-inline-description"),a.length>0&&a.attr("data-tm-tooltip-html",i.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed"),i.val()===""?a.addClass("tm-hidden"):i.find("option:selected").attr("data-tm-tooltip-html")?a.removeClass("tm-hidden"):a.addClass("tm-hidden"),c.length>0&&(i.find("option:selected").attr("data-tm-tooltip-html")?c.html(i.find("option:selected").attr("data-tm-tooltip-html")):c.html("")),_&&_.data("per_product_pricing")!==void 0&&!_.data("per_product_pricing"))return;s.tm_epo_show_price_inside_option==="yes"&&i.find("option").each(function(){if(o=n(this),!o.val())return!0;e.type==="tm-select-change-html-all"?(o.removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"),b(t,i,void 0,o,1)):e.type==="tm-math-select-change-html-all"?b(t,i,void 0,o,1,!0):e.type==="tm-select-change-html-all-math"&&(o.removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"),b(t,i,void 0,o,1,!0)),r=1,s.tm_epo_multiply_price_inside_option!=="yes"&&(r=i.data("tm-quantity")),r||(r=1),s.tm_epo_auto_hide_price_if_zero==="yes"&&n.tmempty(o.data("price"))===!1||s.tm_epo_auto_hide_price_if_zero!=="yes"&&o.attr("data-price")!==""?(l=h(o.data("price")/r,m,!0,!1,i),(o.attr("data-hide-amount")==="0"||s.tm_epo_show_price_inside_option_hidden_even==="yes")&&o.attr("data-text")&&o.html(o.attr("data-text")+" ("+l+")")):o.html(o.attr("data-text"))})}).off("tm-select-price-update-html-all").on("tm-select-price-update-html-all",function(){var e,t,i,o=n(this);if(o.is(".tc-epo-field-product"))return;if(_&&_.data("per_product_pricing")!==void 0&&!_.data("per_product_pricing"))return;s.tm_epo_show_price_inside_option==="yes"&&o.find("option").each(function(){if(e=n(this),!e.val())return!0;t=1,s.tm_epo_multiply_price_inside_option!=="yes"&&(t=o.data("tm-quantity")),t||(t=1),s.tm_epo_auto_hide_price_if_zero==="yes"&&n.tmempty(e.data("price"))===!1||s.tm_epo_auto_hide_price_if_zero!=="yes"&&e.attr("data-price")!==""?(i=h(e.data("price")/t,m,!0,!1,o),(e.attr("data-hide-amount")==="0"||s.tm_epo_show_price_inside_option_hidden_even==="yes")&&e.attr("data-text")&&e.html(e.attr("data-text")+" ("+i+")")):e.html(e.attr("data-text"))})}).off("tm-select-change").on("tm-select-change",function(){var e=n(this),t=e.closest(".cpf-element").attr("data-uniqid");if(e.is(".tc-epo-field-product"))return;if(_&&_.data("per_product_pricing")!==void 0&&!_.data("per_product_pricing"))return;e.removeData("addedtcEpoBeforeOptionPriceCalculation"),e.removeData("addedfieldtcEpoBeforeOptionPriceCalculation"),i.off("tcEpoBeforeOptionPriceCalculation.math"+t),i.off("tcEpoAfterNormalOptionPriceCalculation.math"+t),e.trigger("tm-select-change-html"),e.trigger("tm-select-change-html-all"),y.trigger({type:"tm-epo-update",norules:1,element:e})}).trigger("tm-select-change-html-all"),H.off("focus.cpf").on("focus.cpf",function(){var e=n(this),a=e.closest(".tmcp-field-wrap").find(".tm-epo-field"),t=parseFloat(e.val()),i=parseFloat(e.attr("max")),s=parseFloat(e.attr("min")),o=e.attr("step"),c=$(a,!1),l=q(a,!1),r=!0;(!t||t===""||t==="NaN")&&(t=0),(i===""||i==="NaN")&&(i=""),(s===""||s==="NaN")&&(s=0),(o==="any"||o===""||o===void 0||parseFloat(o)==="NaN")&&(o=1),(t<s||t>i)&&(r=!1),c&&l&&r?e.data("tm-prev-value",t):e.data("tm-prev-value",s)}).off("change.cpf").on("change.cpf",function(e,s){var o=n(this),a=o.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=parseFloat(o.val()),l=parseFloat(o.attr("max")),r=parseFloat(o.attr("min")),c=o.attr("step"),u=$(a,!1),h=q(a,!1),d=!0;(!i||i===""||i==="NaN")&&(i=0),(l===""||l==="NaN")&&(l=""),(r===""||r==="NaN")&&(r=0),(c==="any"||c===""||c===void 0||parseFloat(c)==="NaN")&&(c=1),(i<r||i>l)&&(d=!1),u&&h&&d?(t.noEpoUpdate?a.data("tm-quantity",o.val()).trigger("change.cpf",s).trigger("change.cpfproduct",s):a.data("tm-quantity",o.val()).trigger("change",s),a.trigger("tm-select-change-html-all")):o.data("tm-prev-value")?o.val(o.data("tm-prev-value")):o.val(r),o.trigger("cpf-changed")}).off("tmaddquantity").on("tmaddquantity",function(){var e=n(this),t=e.closest(".tmcp-field-wrap").find(".tm-epo-field");t.data("tm-quantity",e.val())}),U=f.find(".tmcp-textfield.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]"),t.is_associated||(U=U.not(o.epoSelector+" "+o.associatedEpoSelector+" .tm-epo-field")),U.each(function(){var t,i,e=n(this);if(e.data("tcmaxlength"))return;e.data("tcmaxlength",1),t=e.closest(".tmcp-field-wrap-inner"),i=n.epoAPI.template.html(o.templateEngine.tc_chars_remanining,{maxlength:e.attr("maxlength"),characters_remaining:s.i18n_characters_remaining}),t.append(n(i))}),U.off("change.tc_maxlen input.tc_maxlen").on("change.tc_maxlen input.tc_maxlen",function(){var e=n(this);e.closest(".tmcp-field-wrap").find(".tc-chars-remanining").html(parseInt(e.attr("maxlength"),10)-parseInt(e.val().length,10))}),F.off("tm_trigger_product_image").on("tm_trigger_product_image",function(){var t,s,o,i,a,e=n(this);e.is(".tm-product-image:checkbox, .tm-product-image:radio, select.tm-product-image")?(o=e.closest(".tmcp-field-wrap").find("label img"),a=e.closest(".cpf-section"),i=a.is(".tm-epo-variation-section"),t=e,e.is("select.tm-product-image")&&(t=e.children("option:selected")),n(o).length>0||i&&t.attr("data-image")!==void 0||t.attr("data-image")!==void 0&&t.attr("data-image")!==""||t.attr("data-imagep")!==void 0&&t.attr("data-imagep")!==""?e.is(":checked")||e.is("select.tm-product-image")&&e.val()!==""&&(e.find("option:selected").attr("data-rules")!==""||e.is(".tm-epo-variation-element"))?(s=n(o).first().attr("data-original"),!s&&!i&&(s=n(o).first().attr("src")),s||(s=t.attr("data-image")),t.attr("data-imagep")&&(s=t.attr("data-imagep")),s?p.trigger("tm_change_product_image",{src:s,element:e,element_current:t,main_product:p,epo_holder:f}):p.trigger("tm_change_product_image",{src:!1,element:e,element_current:t,main_product:p,epo_holder:f})):p.trigger("tm_restore_product_image",{element:e,element_current:t,main_product:p,epo_holder:f}):p.trigger("tm_restore_product_image",{element:e,element_current:t,main_product:p,epo_holder:f})):p.trigger("tm_attempt_product_image",{element:e,element_current:t,main_product:p,epo_holder:f})}),V.off("showhide.cpfcustom").on("showhide.cpfcustom",function(){var t,a,r,c,o=n(this),e=o.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=!1;e.is(".tm-epo-variation-element")||(e.is("select")?e.val()!==""&&(i=!0):e.is(":checkbox")?e.is(":checked")&&(i=!0):e.is(":radio")?e.is(":checked")&&(i=!0,s.tm_epo_show_only_active_quantities==="yes"&&(c=e.closest(".tc-element-inner-wrap").find(".tm-epo-field.tmcp-radio"),c.each(function(){n(this).closest(".tmcp-field-wrap").find(".tm-quantity").hide()}))):e.val()&&(i=!0),t=o.find(".tm-qty"),a=t.val(),r=t.attr("min")||"",i?(s.tm_epo_show_only_active_quantities==="yes"&&o.show(),t.removeClass("ignore").prop("disabled",!1)):(s.tm_epo_show_only_active_quantities==="yes"&&(o.hide(),a||t.val(r)),t.addClass("ignore").prop("disabled",!0)),f.is(".tc-show")&&setTimeout(function(){o.closest(".tcowl-carousel").trigger("refresh.owl.carousel")},200))}),F.off("change.cpfcustom").on("change.cpfcustom",function(){n(this).closest(".tmcp-field-wrap").find(".tm-quantity").trigger("showhide.cpfcustom")}),F.off("change.cpf").on("change.cpf",function(e,t){var o,s=n(this),a=s.closest(".tmcp-field-wrap"),r=s.closest(".tmcp-ul-wrap"),i=r.attr("data-tm-connector");s.is(":checkbox, :radio")&&(s.is(":radio")&&(t||(i!==void 0?n('[data-tm-connector="'+i+'"]').find(".tmcp-field-wrap").removeClass("tc-active").find(".tm-epo-reset-radio").addClass("tm-hidden"):r.find(".tmcp-field-wrap").removeClass("tc-active")),i!==void 0&&n('[data-tm-connector="'+i+'"]').find(".tmcp-field-wrap").removeClass("tc-active").find(".tm-epo-reset-radio").addClass("tm-hidden")),s.is(":checked")?a.addClass("tc-active"):a.removeClass("tc-active")),s.is(".tm-epo-variation-element")||(s.is(".use_images:checkbox, .use_images:radio")&&s.attr("data-imagec")&&(o=a.find(".radio-image,.checkbox-image").first(),o.length>0&&(s.is(":checked")?o.prop("src",s.attr("data-imagec")):o.prop("src",s.attr("data-image")))),s.is(".use_images:radio")&&s.closest(".cpf-type-radio").find(".use_images:radio").not(s).each(function(){var e=n(this);e.closest(".tmcp-field-wrap").find(".radio-image").first().prop("src",e.attr("data-image"))}),s.is(".tmcp-range")&&s.trigger("change.cpflogic"),s.is("select")?s.trigger("tm-select-change"):(s.is(".tmcp-radio")&&s.closest(".cpf-element").find(".tm-quantity .tm-qty").each(function(){n(this).closest("li.tmcp-field-wrap").find(".tmcp-radio").is(":checked")?n(this).prop("disabled",!1):n(this).attr("disabled","disabled")}),j=!0,y.trigger({type:"tm-epo-update",norules:1,element:s}),j=!1)),s.trigger("tm_trigger_product_image"),f.is(".tc-show")&&setTimeout(function(){n(".tm-owl-slider").each(function(){n(this).trigger("refresh.owl.carousel")})},200),p.trigger("tm_attempt_product_image",{element:s,main_product:p,epo_holder:f})}),F.filter('.tm-epo-field:text,input.tm-epo-field[type="number"],textarea.tm-epo-field').off("input.cpf").on("input.cpf",function(){n(this).trigger("change.cpf")}),F.filter(":checkbox:checked, :radio:checked").each(function(){n(this).closest(".tmcp-field-wrap").addClass("tc-active"),n(this).trigger("change.cpf")}),K.off("change.cpfclearbutton").on("change.cpfclearbutton cpfclearbutton",function(){var e,t,s=n(this),o=s.closest(".tmcp-field-wrap");s.is(":checked")&&(t=s.closest(".tc-element-inner-wrap"),t.find(".tc-epo-element-product-li-container").length&&(t=t.find(".tmcp-ul-wrap").first().children(".tmcp-field-wrap").not(".tc-epo-element-product-li-container")),e=t.find(".tm-epo-reset-radio"),e.length||(e=s.closest(".tc-element-inner-wrap").find(".tm-epo-reset-radio").first()),e.removeClass("tm-hidden"),o.append(e))}),ne.off("click.cpf").on("click.cpf",function(){var t=n(this),s=t.closest(".tc-element-inner-wrap"),e=s.find(".tm-epo-field.tmcp-radio:checked");e.length&&(e.prop("checked",!1),e.trigger("change",{forced:1})),t.addClass("tm-hidden")}),W&&W.debounce&&Q.on("keyup",W.debounce(function(){var e=n(this);s.tm_epo_global_enable_validation==="yes"&&n.tc_validator&&e.closest(".tmcp-ul-wrap").data("tm-validation")&&e.tc_rules()&&y.tc_validate().element(e),e.trigger("change.cpf"),e.closest(".tmcp-field-wrap").find(".tm-quantity").trigger("showhide.cpfcustom")},10)),se.off("change.cpfv tcupload").on("change.cpfv tcupload",function(){var t,i,c,u,p,o=n(this),v=o.closest("label"),h=o.closest(".tmcp-field-wrap"),g=h.find(".cpf-upload-container"),l=h.find(".tm-filename"),d=o.val().replace("C:\\fakepath\\",""),a=[],m=e.URL||e.webkitURL,r=h.find(".tc-upload-preview");g.length&&l.length<=0&&(l=n('<span class="tm-filename"></span>'),v.after(l)),(d===void 0||d==="undefined")&&(d=""),o.next(".tmcp-upload-hidden").remove(),a=o.attr("data-file"),a=a?a.split("|"):[],this.files?i=Array.from(this.files):a.length>0&&(i=a),i.length>1?l.html(""+i.length+" "+(i.length===1?s.i18n_file:s.i18n_files)):i.length===1?l.html(d):l.empty(),r.length||(r=n('<div class="tc-upload-preview tc-hidden"></div>'),h.append(r)),r.empty(),t=f.data("num_uploads"),t||(t=[]),c=o.closest(".cpf-element").attr("data-uniqid"),t[c]||(t[c]=[]),(d||i.length>0)&&m&&m.createObjectURL?(s.tm_epo_upload_inline_image_preview==="yes"&&(i.length>1?r.addClass("multiple"):r.removeClass("multiple"),r.removeClass("tc-hidden")),p=function(e,t,n,s,i){var r=o[0].files&&o[0].files[n]&&o[0].files[n].size?o[0].files[n].size:0,a='<div class="tc-upload-image">';t?a=a+'<img src="'+t+'">':a=a+'<div class="tc-file-ext-overlay"></div>',a=a+'<div class="tc-file-name">'+e.name+"</div>",(E||A)&&(a=a+'<button type="button" class="tc-upload-remove"><svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg></button>'),i&&(a=a+'<div class="tc-file-ext">'+i+"</div>"),a=a+'<div class="tc-file-size">'+pt(r)+"</div>",a=a+"</div>",s.append(a)},i.forEach(function(e,o){var i;s.tm_epo_upload_inline_image_preview==="yes"&&(i=n('<div class="tc-upload-file"></div>'),r.append(i),u=new Image,u.onload=function(){p(e,this.src,o,i)},u.onerror=function(){p(e,!1,o,i,e.name.split(".").pop())},a.length>0?u.src=a[o]:(u.src=m.createObjectURL(e),m.revokeObjectURL(e))),t[c].push(e.name)}),f.data("num_uploads",t)):delete t[c],t[c]&&t[c].length===0&&delete t[c]}),l.on("click",".tc-upload-remove",function(){var e,t,o,i,a,r,c,l,d,u,m,p,g,v,h=n(this);(E||A)&&(v=h.closest(".cpf-element"),o=v.find(".tm-epo-field"),g=h.closest(".tc-upload-file"),p=h.closest(".tmcp-field-wrap"),m=p.find(".tc-upload-preview"),u=p.find(".tm-filename"),d=g.index(),a=o.val().replace("C:\\fakepath\\",""),(a===void 0||a==="undefined")&&(a=""),l=Array.from(o[0].files),l.splice(d,1),t=new E("").clipboardData||new A,l.forEach(function(e){t.items.add(e)}),l.length>1?m.addClass("multiple"):m.removeClass("multiple"),o[0].files=t.files,g.remove(),t.files.length>1?u.html(""+t.files.length+" "+(t.files.length===1?s.i18n_file:s.i18n_files)):t.files.length===1?u.html(a):u.empty(),e=f.data("num_uploads"),e||(e=[]),i=v.closest(".cpf-element").attr("data-uniqid"),e[i]||(e[i]=[]),e[i].splice(d,1),e[i].length===0&&(delete e[i],o.val("")),c=o.next(".tmcp-upload-hidden"),c.length&&(r=c.val().split("|"),r.length>0&&r.splice(d,1),r.length===0?c.remove():c.val(r.join("|"))),f.data("num_uploads",e))}),D.off("change.cpf input.cpf").on("change.cpf input.cpf",function(){var e=n(this);y.trigger("tm-epo-check-dpd"),e.data("tm-prev-value",e.val()),y.trigger({type:"tm-epo-update",norules:2})}).data("tm-prev-value",D.val()),f.find(".cpf-type-product").off("tc-logic").on("tc-logic",function(){var e=n(this);if(e.find(".tc-init").length)return;e.data("isactive")&&!e.data("donetclogic")&&(e.data("donetclogic",!0),e.find(".tc-epo-field-product").trigger("change.cpfproduct",{forced:3}))}),f.find(".cpf-type-product .tc-epo-field-product.tc-epo-field-product-checkbox").off("change.cpfrequired").on("change.cpfrequired",function(){var e,s,o,i=n(this),t=i.closest(".cpf-element");t.is(".tc-is-required")&&(e=t.find(".tmcp-field.tc-epo-field-product-checkbox"),o=e.not(":checked"),s=t.find(".tmcp-field.tc-epo-field-product-checkbox:checked"),s.length>0?(o.prop("required",!1),s.prop("required",!0)):(e.attr("required",!0),e.prop("required",!0)))}),f.find(".cpf-type-product .tc-epo-field-product").off("change.cpfproduct").on("change.cpfproduct",function(e,i){var c,u,h,m,g,v,b,j,_,O,E,T,a=n(this),r=a.closest(".cpf-element"),C=r.find(".tc-epo-element-product-container-wrap"),w=a.closest(".tmcp-field-wrap").find(".tc-epo-element-product-container-wrap"),x=w.length>0,k=!1,S=1e3,l=a,A=r.find(".tm-epo-field").not(".tc-epo-element-product-li-container .tm-epo-field"),M=A.filter(":checked"),F=a.attr("data-counter");if(!1===r.data("isactive"))return;if(i&&i.forced===2)return;if(e.isTrigger!==void 0&&a.data("triggeredonce")&&!(i&&i.forced))return;if(a.data("triggeredonce",1),a.is(":checkbox")||(S=e.isTrigger),A.is(":radio")?M.length>0&&(_=M.closest(".tmcp-field-wrap").find("input.tm-qty")):A.is(":checkbox")?M.length>0&&(_=a.closest(".tmcp-field-wrap").find("input.tm-qty")):_=A.closest(".tmcp-field-wrap").find("input.tm-qty"),a.is(":checkbox"))if(a.is(".tc-epo-field-product-hidden"))a.is(":checked")?C.addClass("tc-active-product"):C.removeClass("tc-active-product"),v=a.val(),b=a.attr("data-type"),r.find(".tc-epo-element-product-li-container").removeClass("tm-hidden");else{if(a.is(":checked"))x&&w.removeClass("tm-hidden");else{if(x&&w.addClass("tm-hidden"),!i||!i.forced)return;k=!0}k||(v=a.val(),b=a.attr("data-type"),r.find(".tc-epo-element-product-li-container").removeClass("tm-hidden"))}else if(a.is(":radio")){if(a.is(":checked"))x&&(C.addClass("tm-hidden"),w.removeClass("tm-hidden"));else{if(x&&w.addClass("tm-hidden"),!i||!i.forced)return;k=!0}k||(v=a.val(),b=a.attr("data-type"),r.find(".tc-epo-element-product-li-container").removeClass("tm-hidden"))}else a.is("select")&&(E=a.children(":selected"),l=E,F=E.index(),a.children(":first").val()===""&&F--,v=a.val(),b=E.attr("data-type"),r.find(".tc-epo-element-product-li-container").removeClass("tm-hidden"));if(a.is(".tc-epo-field-product-checkbox")?j=w.find(".tc-epo-element-product-container"):j=r.find(".tc-epo-element-product-container"),h=j.filter('[data-product_id="'+v+'"]'),c=h.find(o.associateQtySelector),C.html()!==""&&_&&_.length>0&&c.length===0&&_.val(0),a.is(":checkbox"))a.is(".tc-epo-field-product-hidden")&&(a.is(":checked")?c.val()==="0"&&c.attr("min")!=="0"&&c.val(c.attr("min")).trigger("change"):(c.val(0),c.closest(".tm-quantity-alt").removeClass("tm-hidden"),i.forced!==1&&c.closest(".tm-quantity-alt").find(".single_add_to_cart_product").trigger("cpfqtybutton"),C.find(o.associatedEpoCart).trigger("tm-epo-update")));else if(a.is(":radio"))a.val()&&!a.data("set_initial")&&c.val()==="0"&&(c.attr("min")!=="0"&&c.val(c.attr("min")).trigger("change"),a.data("set_initial",1));else if(a.is("select"))a.val()&&!a.data("set_initial")&&c.val()==="0"&&(c.attr("min")!=="0"&&c.val(c.attr("min")).trigger("change"),a.data("set_initial",1));else return;if(!v){j.addClass("tm-hidden"),g=n.epoAPI.util.parseJSON(l.attr("data-rules")),g=g[0]||0,m=n.epoAPI.util.parseJSON(l.attr("data-original-rules")),m=m||0,l.is(".tcenabled")&&l.data("associated_price_set",1),l.data("price_set",1),l.data("raw_price",g),l.data("raw_original_price",m),l.data("price",g),l.data("original_price",m),u=l,u.is("option")&&(u=l.closest("select")),O=!1,u.is(".tc-epo-field-product")&&(u.is("select")?u.val()!==""&&(O=!0):u.is(":checkbox")||u.is(":radio")?u.is(":checked")&&(O=!0):u.val()!==""&&(O=!0)),P(l.closest(".tmcp-field-wrap").find(".tc-price").not(o.associatedEpoSelector+" .tc-price"),g,O?d(g):l.data("price-html"),m,O?d(m):""),D.trigger("change.cpf");return}h.length===0?(T={action:"wc_epo_get_associated_product_html",product_id:v,parent_id:f.attr("data-product-id"),mode:r.attr("data-mode"),layout_mode:r.attr("data-product-layout-mode"),uniqid:r.attr("data-uniqid"),name:a.attr("name"),counter:F,quantity_min:r.attr("data-quantity-min"),quantity_max:r.attr("data-quantity-max"),priced_individually:r.attr("data-priced-individually"),discount:r.attr("data-discount"),discount_type:r.attr("data-discount-type"),discount_exclude_addons:r.attr("data-discount-exclude-addons"),show_image:r.attr("data-show-image"),show_title:r.attr("data-show-title"),show_title_link:r.attr("data-show-title-link"),show_price:r.attr("data-show-price"),show_description:r.attr("data-show-description"),show_meta:r.attr("data-show-meta"),disable_epo:r.attr("data-disable-epo")},r.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),n.ajax({url:s.ajax_url,type:"POST",data:T,dataType:"json",success:function(e){e.result===200&&(h=n(e.html),x?a.closest(".tmcp-field-wrap").find(".tc-epo-element-product-container-wrap").empty().append(h):r.find(".tc-epo-element-product-container-wrap").append(h),Ce(t,p,h,b,a,y,j,S,c),h.find(o.associateQtySelector).trigger("change"))},complete:function(){r.unblock()}})):(Ce(t,p,h,b,a,y,j,S,c),h.find(o.associateQtySelector).trigger("change"))}),l.off("click.cpfqtybutton cpfqtybutton",".cpf-type-product .single_add_to_cart_product").on("click.cpfqtybutton cpfqtybutton",".cpf-type-product .single_add_to_cart_product",function(){var i,a,t=n(this),e=t.closest(".tm-quantity-alt").find(o.associateQtySelector),r=t.is(".alt"),s=t.closest(".cpf-element").find(".tc-epo-element-product-container-wrap");t.data("inittriggeredonce")&&(a=n.epoAPI.math.toInt(e.attr("data-min")),i=n.epoAPI.math.toInt(e.attr("data-max")),r?(s.addClass("tc-active-product"),e.attr("min",a),i&&e.attr("max",i),e.val()==="0"&&(e.attr("min")==="0"?e.val(1).trigger("change"):e.val(e.attr("min")).trigger("change")),t.removeClass("alt").text(t.attr("data-remove"))):(s.removeClass("tc-active-product"),e.val(0).trigger("change"),e.closest(".tm-quantity-alt").removeClass("tm-hidden"),t.addClass("alt").text(t.attr("data-add")))),t.data("inittriggeredonce",1),s.find(o.associatedEpoCart).trigger("tm-epo-update")}),l.off("change.cpfqtyalt input.cpfqtyalt",".cpf-type-product "+o.associateQtySelector).on("change.cpfqtyalt input.cpfqtyalt",".cpf-type-product "+o.associateQtySelector,function(){var s,r,e=n(this),t=e.closest(".cpf-element").find(".tm-epo-field").not(".tc-epo-element-product-li-container .tm-epo-field"),a=e.closest(".tm-quantity-alt").find(".single_add_to_cart_product"),i=t.filter(":checked"),l=n.epoAPI.math.toInt(e.attr("min")),c=n.epoAPI.math.toInt(e.attr("max"));if(t.is(".tc-epo-field-product-hidden")&&t.is(":checkbox")&&(i.length===0&&e.val()!=="0"?(t.prop("checked",!0).trigger("change"),i=t.filter(":checked")):e.val()==="0"&&i.length&&t.prop("checked",!1).trigger("change")),t.is(":radio")){if(i.length===0)return;s=i.closest(".tmcp-field-wrap").find("input.tm-qty").not(".tc-element-qty")}else if(t.is(":checkbox")){if(i.length===0)return;s=e.closest(".tmcp-field-wrap").find("input.tm-qty").not(".tc-element-qty")}else s=t.closest(".tmcp-field-wrap").find("input.tm-qty").not(".tc-element-qty");if(s.length===0)return;s.attr("min",l),c&&s.attr("max",c),r=e.closest(".tc-epo-element-product-container").find(o.associatedEpoCart),r.trigger("tm-epo-update"),s.val(e.val()),n.epoAPI.math.toFloat(e.val())>0?(r.find(".tm-epo-field.tcenabled").removeClass("ignore"),e.removeClass("ignore")):(r.find(".tm-epo-field.tcenabled").addClass("ignore"),e.addClass("ignore")),t.trigger("change.cpfproduct",{forced:2}),a.data("inittriggeredonce")&&(e.val()==="0"?a.removeClass("alt"):a.addClass("alt")),a.trigger("cpfqtybutton")}),y.off("tm-epo-update").on("tm-epo-update",function(e){var Te,F,et,yt,I,V,_e,ke,rt,Me,ut,ge,Je,N,Ne,Ce,Q,ce,le,Be,Re,Le,st,Xe,gt,vt,oe,ee,Ae,l,Ye,ot,ct,lt,_t,bt,$e,Fe,ht,Ke,nt,S,q,be,Ge,ve,qe,Ue,We,te,me,xe,Se,ne,T,dt,at,Ot,xt,Qe,Et,tt,At,St,j,B=n(this),H=!1,ze=0,Pe=!1,ae=0,w=0,M=0,D=!1,se=1,De=!0,U=[],$=0,K=0,E={},W=0,mt=0,Ct=!1,Ft=!1,kt=!1,wt="",jt=!1,Mt=!1,ye="",je="",Ee=0,Ie=0,He=0,pt=0,ft=0,fe=0,ue=0,pe=0,he=0,A=0;if(e.epoObject?l=n.extend(!0,{},e.epoObject):l=n.extend(!0,{},t),!l)return;if(l.noEpoUpdate)return;if(i.trigger("tcEpoUpdateStart",{epo:l,alternativeCart:l,this_product_type:O,cart:B,totalsHolder:m,fetchOptionPrices:r,epoHolder:f}),Te=n.epoAPI.applyFilter("tc_get_bundleid",B.attr("data-product_id"),B,l),et=m.attr("data-price-override"),F=it(B),yt=Ze(B),l.associated_connect&&l.associated_connect.length===1&&(F=parseFloat(l.main_product.find(o.associateQtySelector).not(o.associatedEpoSelector+" "+o.qtySelector).last().val())),e.stopImmediatePropagation(),H=n.epoAPI.applyFilter("tcGetCurrentProductPrice",X(m,!0),y,m),ze=H,Pe=n.epoAPI.applyFilter("tcGetCurrentProductRegularPrice",Z(m,!0),y,m),ae=Pe,H=n.epoAPI.applyFilter("tcCalculateCurrentProductPrice",H,{epo:l,alternativeCart:u,cart:B,main_product:p}),Number.isFinite(F)||(m.attr("data-is-sold-individually")||L(B).length===0)&&(F=1),ne={qty:F,product_price:ze,original_product_price:ae},m.data("totalsHolder_tc_totals_ob",ne),e.norules?e.norules&&(e.norules===1&&b(l,e.element),n.tcepo.lateFieldsPrices[R]=[],f.find(".tm-epo-late-field").toArray().forEach(function(e){e=n(e),e.data("price",0),n.tcepo.lateFieldsPrices[R].push({setter:e,price:e.data("tm-price-for-late"),original_price:e.data("tm-original-price-for-late"),bundleid:Te,pricetype:J(l,e,"price_type")})})):Y(l,B),j=f.find(".tmcp-dynamic.dynamic-product-price:not(.tc-is-math-special, .tc-is-math-cumulative)"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.dynamic-product-price:not(.tc-is-math-special, .tc-is-math-cumulative)")),j=j.filter(".tcenabled"),j.length>0&&(S=r(l,f,".tmcp-dynamic.dynamic-product-price:not(.tc-is-math-special, .tc-is-math-cumulative)",0,0,U,D,void 0,void 0,void 0,!0),H=S.total,A=H,ae=S.original_total,x.find(".cpf-dynamic-product-price").val(A),ne.dynamic_product_price=A,m.data("totalsHolder_tc_totals_ob",ne)),l.associated_connect&&l.associated_connect.length===1&&(q=l.associated_connect,l.associated_connect.is("select")&&(q=l.associated_connect.find("option:selected"))),H===!1){m.data("tm-floating-box-data",[]),m.empty(),l.associated_connect&&l.associated_connect.length===1&&P(q.closest(".tmcp-field-wrap").find(".tc-price").not(o.associatedEpoSelector+" .tc-price"),0,"",0,""),_.trigger("tm-epo-short-update",{container:a});return}se=n.epoAPI.applyFilter("tcAlterElementQty",se,{epo:l,alternativeCart:u,currentCart:y,main_product:p}),y.data("per_product_pricing")!==void 0&&(De=y.data("per_product_pricing")),De=n.epoAPI.applyFilter("tcCalculatePerProductPricing",De,{epo:l,alternativeCart:u,cart:B,main_product:p}),re&&s.tm_epo_totals_box_placement==="woocommerce_before_add_to_cart_button"&&(O==="variable"||O==="variable-subscription")&&!m.data("moved_inside")&&m.data("moved_inside",1),i.trigger("tcEpoBeforeOptionPriceCalculation",{epo:l,alternativeCart:l,this_product_type:O,cart:B,totalsHolder:m,fetchOptionPrices:r,epoHolder:f,total:w,original_total:M,floatingBoxData:U,showTotal:D,cart_fee_options_total:$,cart_fee_options_original_total:K}),!l.associated_connect&&!e.noassociated&&s.tm_epo_global_product_element_quantity_sync==="yes"&&!B.is(n.tcAPI().associatedEpoCart)&&B.find(n.tcAPI().associatedEpoCart).filter(":visible").toArray().forEach(function(e){n(e).trigger({type:"tm-epo-update",noassociated:1})}),S=r(l,f,".tmcp-field:not(.tmcp-dynamic,.tc-epo-field-product, .tc-is-math-special, .tc-is-math-cumulative)",w,M,U,D),w=S.total,M=S.original_total,U=S.floatingBoxData,D=S.showTotal,me=S.elementsLength,S=r(l,f,".tc-epo-field-product",Ie,He,U,D),Ie=S.total,He=S.original_total,pt=S.total_taxed,ft=S.original_total_taxed,Ee=S.vat_total,U=S.floatingBoxData,D=S.showTotal,me=me+S.elementsLength,m.data("tm-floating-box-data",U),S=r(l,f,".tmcp-fee-field",$,K,U,D,!1,!0),$=S.total,K=S.original_total,U=S.floatingBoxData,D=S.showTotal,me=me+S.elementsLength,i.trigger("tcEpoAfterNormalOptionPriceCalculation",{epo:l,alternativeCart:l,this_product_type:O,cart:B,totalsHolder:m,fetchOptionPrices:r,epoHolder:f,total:w,original_total:M,floatingBoxData:U,showTotal:D,cart_fee_options_total:$,cart_fee_options_original_total:K}),I=w,V=M,_e=Ve(l,parseFloat(H),parseFloat(ae),parseFloat(I+Ie),parseFloat(V+He),Te,m),S=r(l,f,".tmcp-field.tc-is-math-special:not(.tmcp-dynamic)",w,M,U,D,void 0,void 0,void 0,!0),w=S.total,M=S.original_total,U=S.floatingBoxData,D=S.showTotal,me=me+S.elementsLength,I=w,V=M,I=I+_e.normal[0],V=V+_e.normal[1],$=$+_e.fees[0],K=K+_e.fees[1],w=I,M=V,S=r(l,f,".tmcp-field.tc-is-math-cumulative:not(.tmcp-dynamic)",w,M,U,D,void 0,void 0,void 0,!0,!0),w=S.total,M=S.original_total,U=S.floatingBoxData,D=S.showTotal,me=me+S.elementsLength,I=w,V=M,j=f.find(".tmcp-dynamic.dynamic-product-price.tc-is-math-special"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.dynamic-product-price.tc-is-math-special")),j=j.filter(".tcenabled"),j.length>0&&(S=r(l,f,".tmcp-field.tmcp-dynamic.dynamic-product-price.tc-is-math-special",A+w,A+M,U,D,void 0,void 0,void 0,!0),A=n.epoAPI.math.toFloat(S.total)-n.epoAPI.math.toFloat(w),H=A,ae=n.epoAPI.math.toFloat(S.original_total)-n.epoAPI.math.toFloat(M),x.find(".cpf-dynamic-product-price").val(A),ne.dynamic_product_price=A,m.data("totalsHolder_tc_totals_ob",ne)),j=f.find(".tmcp-dynamic.dynamic-product-price.tc-is-math-cumulative"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.dynamic-product-price.tc-is-math-cumulative")),j=j.filter(".tcenabled"),j.length>0&&(S=r(l,f,".tmcp-field.tmcp-dynamic.dynamic-product-price.tc-is-math-cumulative",A+w,A+M,U,D,void 0,void 0,void 0,!0),A=n.epoAPI.math.toFloat(S.total)-n.epoAPI.math.toFloat(w),H=A,ae=n.epoAPI.math.toFloat(S.original_total)-n.epoAPI.math.toFloat(M),x.find(".cpf-dynamic-product-price").val(A),ne.dynamic_product_price=A,m.data("totalsHolder_tc_totals_ob",ne)),j=f.find(".tmcp-dynamic.dynamic-product-price"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.dynamic-product-price")),j=j.filter(".tcenabled"),!j.length>0&&x.find(".cpf-dynamic-product-price").val(""),A=0,j=f.find(".tmcp-dynamic.calculation:not(.tc-is-math-special, .tc-is-math-cumulative)"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.calculation:not(.tc-is-math-special, .tc-is-math-cumulative)")),j=j.filter(".tcenabled"),j.length>0&&j.toArray().forEach(function(e){var s,o,i;e=n(e),o=e.closest(".tmcp-ul-wrap"),i=r(t,o,".tmcp-dynamic.calculation:not(.tc-is-math-special, .tc-is-math-cumulative)",A,A,[],!0,!0),s=i.total,e.is(".result-as-price")&&(s=d(s,m,!0,!1)),o.find(".tc-result").html(s)}),j=f.find(".tmcp-dynamic.calculation.tc-is-math-special"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.calculation.tc-is-math-special")),j=j.filter(".tcenabled"),j.length>0&&j.toArray().forEach(function(e){var s,o,i;e=n(e),o=e.closest(".tmcp-ul-wrap"),i=r(t,o,".tmcp-field.tmcp-dynamic.calculation.tc-is-math-special",A+w,A+M,[],!0,!0,void 0,void 0,!0),s=n.epoAPI.math.toFloat(i.total)-n.epoAPI.math.toFloat(w),e.is(".result-as-price")&&(s=d(s,m,!0,!1)),o.find(".tc-result").html(s)}),j=f.find(".tmcp-dynamic.calculation.tc-is-math-cumulative"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.calculation.tc-is-math-cumulative")),j=j.filter(".tcenabled"),j.length>0&&j.toArray().forEach(function(e){var s,o,i;e=n(e),o=e.closest(".tmcp-ul-wrap"),i=r(t,o,".tmcp-field.tmcp-dynamic.calculation.tc-is-math-cumulative",A+w,A+M,[],!0,!0,void 0,void 0,!0),s=n.epoAPI.math.toFloat(i.total)-n.epoAPI.math.toFloat(w),e.is(".result-as-price")&&(s=d(s,m,!0,!1)),o.find(".tc-result").html(s)}),A=0,j=f.find(".tmcp-dynamic.change-product-weight:not(.tc-is-math-special, .tc-is-math-cumulative)"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.change-product-weight:not(.tc-is-math-special, .tc-is-math-cumulative)")),j=j.filter(".tcenabled"),j.length>0&&j.toArray().forEach(function(e){var s,o;e=n(e),s=e.closest(".tmcp-ul-wrap"),o=r(t,s,".tmcp-dynamic.change-product-weight:not(.tc-is-math-special, .tc-is-math-cumulative)",A,A,[],!0,!0),s.find(".tc-result").html(o.total)}),j=f.find(".tmcp-dynamic.change-product-weight.tc-is-math-special"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.change-product-weight.tc-is-math-special")),j=j.filter(".tcenabled"),j.length>0&&j.toArray().forEach(function(e){var s,o;e=n(e),s=e.closest(".tmcp-ul-wrap"),o=r(t,s,".tmcp-field.tmcp-dynamic.change-product-weight.tc-is-math-special",A+w,A+M,[],!0,!0,void 0,void 0,!0),s.find(".tc-result").html(n.epoAPI.math.toFloat(o.total)-n.epoAPI.math.toFloat(w))}),j=f.find(".tmcp-dynamic.change-product-weight.tc-is-math-cumulative"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.change-product-weight.tc-is-math-cumulative")),j=j.filter(".tcenabled"),j.length>0&&j.toArray().forEach(function(e){var s,o;e=n(e),s=e.closest(".tmcp-ul-wrap"),o=r(t,s,".tmcp-field.tmcp-dynamic.change-product-weight.tc-is-math-cumulative",A+w,A+M,[],!0,!0,void 0,void 0,!0),s.find(".tc-result").html(n.epoAPI.math.toFloat(o.total)-n.epoAPI.math.toFloat(w))}),A=0,j=f.find(".tmcp-dynamic.override-product-price:not(.tc-is-math-special, .tc-is-math-cumulative)"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.override-product-price:not(.tc-is-math-special, .tc-is-math-cumulative)")),j=j.filter(".tcenabled"),j.length>0&&(S=r(l,f,".tmcp-dynamic.override-product-price:not(.tc-is-math-special, .tc-is-math-cumulative)",A,A,U,D),A=S.total,H=A,ae=S.original_total,I=A,V=A,x.find(".cpf-override-product-price").val(A),ne.override_product_price=A,m.data("totalsHolder_tc_totals_ob",ne)),j=f.find(".tmcp-dynamic.override-product-price.tc-is-math-special"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.override-product-price.tc-is-math-special")),j=j.filter(".tcenabled"),j.length>0&&(S=r(l,f,".tmcp-field.tmcp-dynamic.override-product-price.tc-is-math-special",A+w,A+M,U,D,void 0,void 0,void 0,!0),A=n.epoAPI.math.toFloat(S.total)-n.epoAPI.math.toFloat(w),H=A,ae=n.epoAPI.math.toFloat(S.original_total)-n.epoAPI.math.toFloat(M),I=A,V=A,x.find(".cpf-override-product-price").val(A),ne.override_product_price=A,m.data("totalsHolder_tc_totals_ob",ne)),j=f.find(".tmcp-dynamic.override-product-price.tc-is-math-cumulative"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.override-product-price.tc-is-math-cumulative")),j=j.filter(".tcenabled"),j.length>0&&(S=r(l,f,".tmcp-field.tmcp-dynamic.override-product-price.tc-is-math-cumulative",A+w,A+M,U,D,void 0,void 0,void 0,!0),A=n.epoAPI.math.toFloat(S.total)-n.epoAPI.math.toFloat(w),H=A,ae=n.epoAPI.math.toFloat(S.original_total)-n.epoAPI.math.toFloat(M),I=A,V=A,x.find(".cpf-override-product-price").val(A),ne.override_product_price=A,m.data("totalsHolder_tc_totals_ob",ne)),j=f.find(".tmcp-dynamic.override-product-price"),l.is_associated===!1&&(j=j.not(o.associatedEpoSelector+" .tmcp-dynamic.override-product-price")),j=j.filter(".tcenabled"),!j.length>0?x.find(".cpf-override-product-price").val(""):(I=0,V=0),i.trigger("tcEpoAfterOptionPriceCalculation",{epo:l,alternativeCart:l,this_product_type:O,cart:B,totalsHolder:m,fetchOptionPrices:r,epoHolder:f,total:w,original_total:M,floatingBoxData:U,showTotal:D,cart_fee_options_total:$,cart_fee_options_original_total:K}),setTimeout(function(){f.find("select.tm-epo-field").trigger("tm-select-price-update-html-all")},1),n.tcepo.oneOptionIsSelected[R]=D,l=Oe(l,R,me),we(p,l),$>0&&(D=!0),u&&!De&&(D=!1),(C==="enable"||C==="hideifoptionsiszero"||C==="hideiftotaliszero")&&(D=!0),F>1&&(D=!0),(O==="variable"||O==="variable-subscription")&&!n.epoAPI.math.toFloat(yt)&&(D=!1),C==="disable"&&(D=!1),(s.tm_epo_change_variation_price==="yes"||s.tm_epo_change_original_price==="yes")&&(D=!0),l.is_associated&&!De&&(D=!1),s.tm_epo_total_price_as_unit_price==="yes"&&(F=1),N=parseFloat(H*F),s.extraFee&&(W=parseFloat(s.extraFee),Number.isFinite(W)||(W=0)),Ce=n.epoAPI.applyFilter("tcCalculateFinalProductPrice",!1,{alternativeCart:u,product_price:H,product_total_price:N,v_product_price:ze,tm_set_tax_price:c,main_product:p,totalsHolder:m,cartQty:F}),Ce!==!1&&typeof Ce=="object"&&Object.prototype.hasOwnProperty.call(Ce,"productPrice")&&Object.prototype.hasOwnProperty.call(Ce,"productTotalPrice")&&(H=Ce.productPrice,N=Ce.productTotalPrice),I=n.epoAPI.applyFilter("tc_adjust_options_price_per_unit",I,N),w=parseFloat(I*F*se),w=n.epoAPI.applyFilter("tc_adjust_options_total_price",w,F,se,I,m),s.tm_epo_global_product_element_quantity_sync==="no"?(fe=parseFloat(Ie),pe=parseFloat(pt)):(fe=parseFloat(Ie*F*se),pe=parseFloat(pt*F*se)),fe=n.epoAPI.applyFilter("tc_adjust_options_productfield_total_price",fe,F,se,I,m),pe=n.epoAPI.applyFilter("tc_adjust_options_productfield_total_price_taxed",pe,F,se,I,m),V=n.epoAPI.applyFilter("tc_adjust_options_price_per_unit",V,N),M=parseFloat(V*F*se),M=n.epoAPI.applyFilter("tc_adjust_options_original_total_price",M,F,se,V,m),s.tm_epo_global_product_element_quantity_sync==="no"?(ue=parseFloat(He),he=parseFloat(ft)):(ue=parseFloat(He*F*se),he=parseFloat(ft*F*se)),ue=n.epoAPI.applyFilter("tc_adjust_options_productfield_original_total_price",ue,F,se,V,m),he=n.epoAPI.applyFilter("tc_adjust_options_productfield_original_total_price_taxed",he,F,se,V,m),et==="1"&&parseFloat(w)>0&&(H=0,ze=0,N=0),N=n.epoAPI.applyFilter("tc_adjust_product_total_price_without_options",N),w=n.epoAPI.applyFilter("tcAdjustTotal",w,{epo:l,totalsHolder:m,cart:B,main_product:p}),fe=n.epoAPI.applyFilter("tcAdjustProductFieldTotal",fe,{epo:l,totalsHolder:m,cart:B,main_product:p}),pe=n.epoAPI.applyFilter("tcAdjustProductFieldTotalTaxed",pe,{epo:l,totalsHolder:m,cart:B,main_product:p}),M=n.epoAPI.applyFilter("tcAdjustOriginalTotal",M,{epo:l,totalsHolder:m,cart:B,main_product:p}),ue=n.epoAPI.applyFilter("tcAdjustProductFieldOriginalTotal",ue,{epo:l,totalsHolder:m,cart:B,main_product:p}),he=n.epoAPI.applyFilter("tcAdjustProductFieldOriginalTotalTaxed",he,{epo:l,totalsHolder:m,cart:B,main_product:p}),w=parseFloat(n.epoAPI.applyFilter("tc_adjust_total",w,m)),$=parseFloat(n.epoAPI.applyFilter("tc_adjust_totals_fee",$,m)),M=parseFloat(n.epoAPI.applyFilter("tc_adjust_original_total",M,m)),K=parseFloat(n.epoAPI.applyFilter("tc_adjust_original_total_fee",K,m)),mt=W,Q=w+$,ce=M+K,Ye=w,ot=I,_t=$,$e=Q,ct=M,lt=V,bt=K,Fe=ce,ht=N,Ke=parseFloat(N+Q+mt),nt=parseFloat(ae+ce+mt),H=c(H,m,void 0,void 0,void 0,void 0,!0),Pe=c(Pe,m,void 0,void 0,void 0,void 0,!0),N=c(N,m,void 0,void 0,void 0,void 0,!0),w=c(w,m,void 0,void 0,void 0,void 0,!0),I=c(I,m,void 0,void 0,void 0,void 0,!0),$=c($,m,void 0,void 0,void 0,void 0,!0),Q=parseFloat($)+parseFloat(w),M=c(M,m,void 0,void 0,void 0,void 0,!0),V=c(V,m,void 0,void 0,void 0,void 0,!0),K=c(K,m,void 0,void 0,void 0,void 0,!0),ce=parseFloat(K)+parseFloat(M),W=c(W,m,void 0,void 0,void 0,void 0,!0),le=N,N=n.epoAPI.applyFilter("tc_adjust_product_total_price",parseFloat(N+Q+W),le,Q,W,w,$,m),Ne=n.epoAPI.applyFilter("tc_adjust_product_total_original_price",parseFloat(le+ce+W),le,ce,W,M,K,m),St=m.attr("data-prices-include-tax")||s.prices_include_tax,St==="1"?(dt=Ee+parseFloat(z(w,m)),at=Ee+parseFloat(z(Q,m)),Qe=Ee+parseFloat(z(N,m)),tt=parseFloat(z(le,m))):(dt=Ee+parseFloat(w-Ye),at=Ee+parseFloat(Q-$e),Qe=Ee+parseFloat(N-Ke),tt=parseFloat(le-ht)),Ye=Ye+fe,ot=ot+fe,$e=$e+fe,ct=ct+ue,lt=lt+ue,Fe=Fe+ue,Ke=Ke+fe,nt=nt+ue,w=w+pe,I=I+pe,Q=Q+pe,M=M+he,V=V+he,ce=ce+he,N=N+pe,Ne=Ne+he,Be=parseFloat(H+parseFloat(I)),Re=parseFloat(H+parseFloat(V)),s.tm_epo_fees_on_unit_price==="yes"&&(Be=parseFloat(H+parseFloat(I)+parseFloat(parseFloat($)/F)),Re=parseFloat(H+parseFloat(V)+parseFloat(parseFloat(K)/F))),Le=d(Be,m,!0,!0),st=d(Re,m,!0,!0),W&&(jt=!0,wt=d(W,m,!0,!0)),ge=d(N,m,!0,!0),Je=d(Ne,m,!0,!0),ke=d(w,m,!0,!0),Me=d($,m,!0,!0),rt=d(M,m,!0,!0),ut=d(K,m,!0,!0),Ot=d(dt),xt=d(at),Et=d(Qe),At=d(tt),Le=n.epoAPI.applyFilter("tc_adjust_formatted_unit_price",Le,H,I,$,F),ke=n.epoAPI.applyFilter("tc_adjust_formatted_options_total",ke,w,I,F),Me=n.epoAPI.applyFilter("tc_adjust_formatted_fees_total",Me,$),ge=n.epoAPI.applyFilter("tc_adjust_formatted_final_total",ge,N,le,Q,W,F),Le=n.epoAPI.applyFilter("tcAdjustFormattedUnitPrice",Le,{epo:l,totalsHolder:m,event:e,unit_price:Be,productPrice:H,_total:I,total_plcart_fee_options_totals_fee:$,cartQty:F}),st=n.epoAPI.applyFilter("tcAdjustFormattedUnitOriginalPrice",st,{epo:l,totalsHolder:m,event:e,unit_original_price:Re,productPrice:H,_original_total:V,total_plcart_fee_options_totals_fee:$,cartQty:F}),ke=n.epoAPI.applyFilter("tcAdjustFormattedOptionsTotal",ke,{epo:l,totalsHolder:m,event:e,total:w,_total:I,total_plus_fee:Q,extraFee:W,cartQty:F}),rt=n.epoAPI.applyFilter("tcAdjustFormattedOptionsOriginalTotal",rt,{epo:l,totalsHolder:m,event:e,original_total:M,_original_total:V,original_total_plus_fee:ce,extraFee:W,cartQty:F}),Me=n.epoAPI.applyFilter("tcAdjustFormattedFeesTotal",Me,{epo:l,totalsHolder:m,event:e,cart_fee_options_total:$,extraFee:W,cartQty:F}),ut=n.epoAPI.applyFilter("tcAdjustFormattedFeesOriginalTotal",ut,{epo:l,totalsHolder:m,event:e,cart_fee_options_original_total:K,extraFee:W,cartQty:F}),ge=n.epoAPI.applyFilter("tcAdjustFormattedFinalTotal",ge,{epo:l,totalsHolder:m,event:e,product_total_price:N,product_total_price_without_options:le,total_plus_fee:Q,extraFee:W,cartQty:F}),Je=n.epoAPI.applyFilter("tcAdjustFormattedFinalOriginalTotal",Je,{epo:l,totalsHolder:m,event:e,product_total_original_price:Ne,product_total_price_without_options:le,original_total_plus_fee:ce,extraFee:W,cartQty:F}),(w>0&&ie==="showtgz"||ie==="show")&&(Ct=!0,s.tm_epo_enable_vat_options_total==="yes"&&(Ft=!0)),$!==0&&(kt=!0),ge&&de==="show"&&(Mt=!0),E={qty:F,product_price:H,raw_product_price:ze,product_regular_price:Pe,raw_product_regular_price:ae,formatted_product_price:d(parseFloat(H)*F),late_total_prices:_e,late_total_price:c(_e[0],m),late_total_original_price:c(_e[1],m),raw_options_price_per_unit:ot,raw_options_total_price:Ye,raw_cart_fee_options_total_price:_t,raw_total_plus_fee:$e,raw_options_original_price_per_unit:lt,raw_options_original_total_price:ct,raw_cart_fee_options_original_total_price:bt,raw_original_total_plus_fee:Fe,raw_product_total_price:Ke,raw_product_total_original_price:nt,raw_product_total_price_without_options:ht,options_price_per_unit:I,options_total_price:w,cart_fee_options_total_price:$,total_plus_fee:Q,options_original_price_per_unit:V,options_original_total_price:M,cart_fee_options_total_original_price:K,original_total_plus_fee:ce,vat_options_total:dt,vat_options_total_plus_fee:at,formatted_vat_options_total:Ot,formatted_vat_options_total_plus_fee:xt,vat_total:Qe,formatted_vat_total:Et,vat_product_base:tt,formatted_vat_product_base:At,product_total_price:N,product_total_original_price:Ne,product_total_price_without_options:le,product_unit_price:Be,product_unit_original_price:Re,formatted_unit_price:Le,formatted_options_total:ke,formatted_fees_total:Me,formatted_final_total:ge,formatted_unit_original_price:st,formatted_options_original_total:rt,formatted_fees_original_total:ut,formatted_final_original_total:Je,formatted_extra_fee:wt,show_options_total:Ct,show_fees_total:kt,show_extra_fee:jt,show_final_total:Mt,show_options_vat:Ft,unit_price:s.i18n_unit_price,show_unit_price:s.tm_epo_show_unit_price==="yes",options_total:s.i18n_options_total,fees_total:s.i18n_fees_total,extra_fee:s.i18n_extra_fee,final_total:s.i18n_final_total,options_vat_total:s.i18n_vat_options_total,totals_box_before_unit_price:s.totals_box_before_unit_price,totals_box_after_unit_price:s.totals_box_after_unit_price,totals_box_before_vat_options_totals_price:s.totals_box_before_vat_options_totals_price,totals_box_after_vat_options_totals_price:s.totals_box_after_vat_options_totals_price,totals_box_before_options_totals_price:s.totals_box_before_options_totals_price,totals_box_after_options_totals_price:s.totals_box_after_options_totals_price,totals_box_before_fee_totals_price:s.totals_box_before_fee_totals_price,totals_box_after_fee_totals_price:s.totals_box_after_fee_totals_price,totals_box_before_extra_fee_price:s.totals_box_before_extra_fee_price,totals_box_after_extra_fee_price:s.totals_box_after_extra_fee_price,totals_box_before_final_totals_price:s.totals_box_before_final_totals_price,totals_box_after_final_totals_price:s.totals_box_after_final_totals_price},s.customer_price_format&&(ye=s.customer_price_format_wrap_start,je=s.customer_price_format_wrap_end,Ae=s.customer_price_format),ke&&w>0&&(xe=g(w),Se=g(M),Ae&&(xe=Ae.replace("__PRICE__",xe).replace("__CODE__",s.current_currency),m.data("is-on-sale")||(Se=Ae.replace("__PRICE__",Se).replace("__CODE__",s.current_currency))),xe=n.epoAPI.applyFilter("tcFilterFormattedFTotal",xe,{epo:l,totalsHolder:m,event:e,total:w,_total:I,total_plus_fee:Q,extraFee:W,cartQty:F}),Se=n.epoAPI.applyFilter("tcFilterFormattedFOriginalTotal",Se,{epo:l,totalsHolder:m,event:e,original_total:M,total:M,_total:I,total_plus_fee:Q,extraFee:W,cartQty:F}),s.tm_epo_enable_original_final_total==="yes"&&w!==M?(E.formatted_options_total=n.epoAPI.util.decodeHTML(n.epoAPI.template.html(o.templateEngine.tc_formatted_sale_price,{price:Se,sale_price:xe,customer_price_format_wrap_start:ye,customer_price_format_wrap_end:je})),E._foriginal_total=Se,E._ftotal=xe):E.formatted_options_total=n.epoAPI.util.decodeHTML(n.epoAPI.util.decodeHTML(n.epoAPI.template.html(o.templateEngine.tc_formatted_price,{price:xe,customer_price_format_wrap_start:ye,customer_price_format_wrap_end:je})))),ge&&N>=0&&(oe=g(N),et==="1"&&parseFloat(w)>0?ee=parseFloat(Fe+W):ee=parseFloat(parseFloat(ae*F)+Fe+W),Ae&&(oe=Ae.replace("__PRICE__",oe).replace("__CODE__",s.current_currency),m.data("is-on-sale")||(ee=Ae.replace("__PRICE__",ee).replace("__CODE__",s.current_currency))),oe=n.epoAPI.applyFilter("tc_adjust_native_price",oe,N),ee=c(ee,m,void 0,void 0,void 0,void 0,!0),ee=g(ee),ee=n.epoAPI.applyFilter("tc_adjust_native_regular_price",ee,N),s.tm_epo_enable_original_final_total==="yes"&&(m.data("is-on-sale")&&et!=="1"||ee!==oe)?E.formatted_final_total=n.epoAPI.util.decodeHTML(n.epoAPI.template.html(o.templateEngine.tc_formatted_sale_price,{price:ee,sale_price:oe,customer_price_format_wrap_start:ye,customer_price_format_wrap_end:je})):E.formatted_final_total=n.epoAPI.util.decodeHTML(n.epoAPI.util.decodeHTML(n.epoAPI.template.html(o.templateEngine.tc_formatted_price,{price:oe,customer_price_format_wrap_start:ye,customer_price_format_wrap_end:je}))),E._f_regular_price=ee,E._fprice=oe),E=v("formatted_fees_original_total","cart_fee_options_total_original_price",E,m),E=v("formatted_fees_total","cart_fee_options_total_price",E,m),E=v("formatted_final_original_total","product_total_original_price",E,m),E=v("formatted_final_total","product_total_price",E,m),E=v("formatted_options_original_total","options_original_total_price",E,m),E=v("formatted_options_total","options_total_price",E,m),E=v("formatted_unit_original_price","product_unit_original_price",E,m),E=v("formatted_unit_price","product_unit_price",E,m),n.tcepo.showHideTotal!==void 0&&n.tcepo.showHideTotal[R]!==void 0&&(D=n.tcepo.showHideTotal[R]),E=n.epoAPI.applyFilter("tc_adjust_tc_totals_ob",E,{epo_object:l,showTotal:D,epoHolder:f,totalsHolder:m,tm_set_price:h,tm_set_price_totals:d,product_total_price:N,product_price:H,qty:F}),E.showTotal!==void 0&&(D=E.showTotal),l.tc_totals_ob=E,D=n.epoAPI.applyFilter("tcFinalTotalsBoxVisibility",D,{epo:l,alternativeCart:u,cart:B,main_product:p,totalsHolder:m,this_epo_totals_container:G}),Xe=n.epoAPI.template.html(o.templateEngine.tc_final_totals,E),m.data("tm-html",Xe),m.data("tc_totals_ob",E),l.associated_connect&&l.associated_connect.length===1&&(l.associated_connect.attr("data-no-price")==="1"?(be=0,Ge=0,ve=0,qe=0,Ue="",We="",P(q.closest(".tmcp-field-wrap").find(".tc-price").not(o.associatedEpoSelector+" .tc-price"),be,Ue,ve,We)):(be=E.product_price+E.options_price_per_unit+E.cart_fee_options_total_price/E.qty,Ge=E.raw_product_price+E.raw_options_price_per_unit+E.raw_cart_fee_options_total_price/E.qty,ve=E.product_regular_price+E.options_original_price_per_unit+E.cart_fee_options_total_original_price/E.qty,qe=E.raw_product_regular_price+E.raw_options_original_price_per_unit+E.raw_cart_fee_options_original_total_price/E.qty,Ue=h(be,l.this_epo_totals_containe,!1,!1,q),We=h(ve,l.this_epo_totals_containe,!1,!1,q),P(q.closest(".tmcp-field-wrap").find(".tc-price").not(o.associatedEpoSelector+" .tc-price"),be,Ue,ve,We),l.associated_connect.data("tm-quantity",E.qty),l.associated_connect.data("tm-quantity")&&(be=be*parseFloat(l.associated_connect.data("tm-quantity")),Ge=Ge*parseFloat(l.associated_connect.data("tm-quantity")),ve=ve*parseFloat(l.associated_connect.data("tm-quantity")),qe=qe*parseFloat(l.associated_connect.data("tm-quantity"))),Ue=h(be,l.this_epo_totals_containe,!1,!1,q),We=h(ve,l.this_epo_totals_containe,!1,!1,q)),l.associated_connect.data("price_set",1),q.is(".tcenabled")&&q.data("associated_price_set",1),q.data("price_set",1),q.data("raw_price",Ge),q.data("raw_original_price",qe),q.data("price",c(be,l.this_epo_totals_containe,q)),q.data("original_price",c(ve,l.this_epo_totals_containe,q)),l.associated_connect.data("price-changed",1),setTimeout(function(){l.associated_connect&&e.noassociated||l.mainEpoObject.main_cart.trigger({type:"tm-epo-update",norules:2})},20)),i.trigger("tcEpoAfterCalculateTotals",{epo:l,alternativeCart:u,this_product_type:O,cart:B,bundleid:Te,totalsObject:E,main_product:p,per_product_pricing:De}),gt=n.epoAPI.applyFilter("hide_native_price",!0),F>0?(s.tm_epo_change_variation_price==="yes"&&(gt===!0&&C!=="disable"?k(B).hide():k(B).show()),!D||C==="disable"||C==="hideiftotaliszero"&&N===0||C==="hideifoptionsiszero"&&Q===0?(Xe="",m.html(Xe),m.data("tm-floating-box-data",[])):(m.html(Xe),i.trigger("tc-totals-container",{epo:E,totals_holder:m,data:{epo_object:l,tm_set_price:h,tm_set_price_totals:d,product_total_price:N,product_price:H,qty:F},tm_epo_js:s})),ge&&N>=0&&(vt=k(B),s.tm_epo_change_variation_price==="yes"&&(m.data("is-on-sale")?(T=n.epoAPI.util.decodeHTML(n.epoAPI.template.html(o.templateEngine.tc_formatted_sale_price,{price:ee,sale_price:oe,customer_price_format_wrap_start:ye,customer_price_format_wrap_end:je,before_price_text:s.variation_price_before_price_text,after_price_text:s.variation_price_after_price_text})),T={formatted:T,raw:E.product_total_price},T=v("formatted","raw",T,m),T=T.formatted,vt.html(T).show()):(T=n.epoAPI.util.decodeHTML(n.epoAPI.template.html(o.templateEngine.tc_formatted_price,{price:oe,customer_price_format_wrap_start:ye,customer_price_format_wrap_end:je,before_price_text:s.variation_price_before_price_text,after_price_text:s.variation_price_after_price_text})),T={formatted:T,raw:E.product_total_price},T=v("formatted","raw",T,m),T=T.formatted,vt.html(T).show())),s.tm_epo_change_original_price==="yes"&&((!u||p.find(".cpf-bto-price").length===0)&&(l.associated_connect?te=l.main_product.find(o.associatedNativeProductPriceSelector):te=n(o.nativeProductPriceSelector),te.length===0&&p.is(".tc-after-shop-loop")&&(te=p.closest(".product").find(".price")),te.data("tc-original-html")===void 0&&te.data("tc-original-html",te.html()),N>0?m.data("is-on-sale")?(T=n.epoAPI.util.decodeHTML(n.epoAPI.template.html(o.templateEngine.tc_formatted_sale_price,{price:ee,sale_price:oe,customer_price_format_wrap_start:ye,customer_price_format_wrap_end:je,before_price_text:s.product_price_before_price_text,after_price_text:s.product_price_after_price_text})),T={formatted:T,raw:E.product_total_price},T=v("formatted","raw",T,m),T=T.formatted,te.html(T).show()):(T=n.epoAPI.util.decodeHTML(n.epoAPI.template.html(o.templateEngine.tc_formatted_price,{price:oe,customer_price_format_wrap_start:ye,customer_price_format_wrap_end:je,before_price_text:s.product_price_before_price_text,after_price_text:s.product_price_after_price_text})),T={formatted:T,raw:E.product_total_price},T=v("formatted","raw",T,m),T=T.formatted,te.html(T).show()):O&&O!=="composite"&&(l.associated_connect?l.variations_form.length?(T=l.this_epo_totals_container.data("variationIdElement"),T.length>0&&(T=parseFloat(T.val()),!T||T===0||te.html(n.epoAPI.util.decodeHTML(s.assoc_current_free_text)))):te.html(n.epoAPI.util.decodeHTML(s.assoc_current_free_text)):te.html(n.epoAPI.util.decodeHTML(s.current_free_text)))),i.trigger("tcEpoMaybeChangePriceHtml",{epo:l,alternativeCart:u,this_product_type:O,cart:B,bundleid:Te,totalsObject:E,main_product:p,nativePrice:oe}))),u?_.trigger({type:"tm-epo-update",norules:1}):G.data("is_active",!0)):(l.associated_connect&&(te=l.main_product.find(o.associatedNativeProductPriceSelector),te.html(te.data("tc-original-html"))),k(B).each(function(){var e=n(this);e.data("tm-original-html")?e.html(e.data("tm-original-html")):e.data("tm-original-html",e.html())}),ze===0&&s.tm_epo_remove_free_price_label==="yes"?k(B).hide():s.tm_epo_change_variation_price==="yes"&&(gt!==!0||C==="disable")&&k(B).show(),m.empty(),u&&_.trigger({type:"tm-epo-update",norules:1})),_.trigger("tm-epo-after-update",{container:a}),i.trigger("tc-epo-after-update",{epo:E,totals_holder:m,data:{epo_object:l,add_late_fields_prices:Ve,tm_set_price:h,tm_set_price_totals:d,product_total_price:N,product_price:H,qty:F,bundleid:Te,currentCart:y},tm_epo_js:s})}),(O==="variable"||O==="variable-subscription")&&(T=f.find(".tm-epo-variation-section").first(),T.find(".tm-epo-reset-variation").off("click.cpfv").on("click.cpfv",function(){var e=n(this),t=n.epoAPI.dom.id(e.attr("data-tm-for-variation")),s=e.closest(".cpf-type-variations"),o=e.closest(".cpf-element").find(".tm-epo-variation-element"),i=e.closest(".cpf-element").find(".tmcp-field-wrap");o.prop("checked",!1),i.removeClass("tc-active"),w.find("[data-attribute_name='attribute_"+t+"']").val("").trigger("change"),w.find("[data-attribute_name='attribute_"+t+"']").trigger("focusin"),p.find(".cpf-type-variations").not(s).each(function(e,t){w.find("[data-attribute_name='attribute_"+n.epoAPI.dom.id(n(t).find(".tm-epo-variation-element").first().attr("data-tm-for-variation"))+"']").trigger("focusin")}),e.trigger("blur"),w.trigger("woocommerce_update_variation_values_tmlogic")}),T.find("input.tm-epo-variation-element,input.tm-epo-variation-element + span").off("mouseup.cpfv").on("mouseup.cpfv",function(){var t,e=n(this);e.is("span")&&(e=e.prev("input")),e.attr("disabled")&&w.find(".reset_variations").trigger("click"),t=n.epoAPI.dom.id(e.attr("data-tm-for-variation")),w.find("[data-attribute_name='attribute_"+t+"']").trigger("focusin")}),T.off("click."+le+".tmepo",".reset_variations, .tc-epo-element-variable-reset-variations").on("click."+le+".tmepo",".reset_variations, .tc-epo-element-variable-reset-variations",{_epoObject:t},function(e){var t;s.tm_epo_change_original_price==="yes"&&(!u||p.find(".cpf-bto-price").length===0)&&(e.data._epoObject.associated_connect?t=e.data._epoObject.main_product.find(o.associatedNativeProductPriceSelector):t=n(o.nativeProductPriceSelector),t.data("tc-original-html")&&t.html(t.data("tc-original-html"))),w.find(".variations .reset_variations, .tc-epo-element-variable-reset-variations").first().trigger("click")}),T.find(".tm-epo-variation-element").off("change.cpfv tm_epo_variation_element_change").on("change.cpfv tm_epo_variation_element_change",function(e){var i,t=n(this),a=n.epoAPI.dom.id(t.attr("data-tm-for-variation")),o=t.val(),r=t.closest(".cpf-type-variations"),s=w.find("[data-attribute_name='attribute_"+a+"']");if(t.closest(".tm-epo-variation-section").is(".tm-hidden"))return;e&&e.type&&e.type==="tm_epo_variation_element_change"||(i=!1,s.each(function(){if(this.value===o)return i=!0,!1}),i||s.trigger("focusin"),s.val(o).trigger("change")),o||s.trigger("focusin"),p.find(".cpf-type-variations").not(r).each(function(){w.find("#"+n.epoAPI.dom.id(n(this).find(".tm-epo-variation-element").first().attr("data-tm-for-variation"))).trigger("focusin")}),t.trigger("blur"),w.trigger("woocommerce_update_variation_values_tmlogic")}).off("focusin.cpfv").on("focusin.cpfv",function(){var t,e=n(this);if(!e.is("select"))return;t=n.epoAPI.dom.id(e.attr("data-tm-for-variation")),w.find("[data-attribute_name='attribute_"+t+"']").trigger("focusin"),w.trigger("woocommerce_update_variation_values_tmlogic")}),w.off(S+"found_variation.tmepo tm_fix_stock",".single_variation_wrap").on(S+"found_variation.tmepo tm_fix_stock",".single_variation_wrap",function(){te(n(this),a)}),w.off(S+"found_variation.tmepo").on(S+"found_variation.tmepo",function(e,s){var o=n(this);m.data("is-on-sale",s.tc_is_on_sale),m.data("regular-price",Se(s.display_regular_price,m,s)),i.trigger("tm-epo-found-variation",{epo:t,totalsHolder:m,totalsHolderContainer:x,currentCart:y,variationForm:o,variation:s}),wt({epoHolder:f,totalsHolder:m,totalsHolderContainer:x,currentCart:y,variationForm:o,variation:s}),te(o,a)}).off(S+"hide_variation.tmepo").on(S+"hide_variation.tmepo",{_epoObject:t},function(e){var t;s.tm_epo_change_original_price==="yes"&&(!u||p.find(".cpf-bto-price").length===0)&&(e.data._epoObject.associated_connect?t=e.data._epoObject.main_product.find(o.associatedNativeProductPriceSelector):t=n(o.nativeProductPriceSelector),t.data("tc-original-html")&&t.html(t.data("tc-original-html"))),m.data("price",!1),m.removeData("tcprice"),y.trigger({type:"tm-epo-update",norules:2})}).off(S+"check_variations.tmepo").on(S+"check_variations.tmepo",function(){var s={},t=0,e=T.find(".reset_variations");w.find(".variations select, .tc-epo-variable-product-selector").each(function(){var o=n(this).data("attribute_name")||n(this).attr("name"),e=n(this).val()||"";e.length>0&&t++,s[o]=e}),t>0?e.css("visibility")==="hidden"&&e.css("visibility","visible").hide().fadeIn():e.css("visibility","hidden")}).trigger(S+"check_variations"),nt(t,a,N,p,f)),B.trigger("tm-select-change-html"),H.trigger("change.cpf",{init:1}),V.trigger("showhide.cpfcustom"),K.filter(":checked").trigger("cpfclearbutton"),i.on("tm-do-epo-update",function(){y.trigger({type:"tm-epo-update"})}),i.trigger("tm-epo-init-events",{epo:{epo_id:me,form:t.form,currentCart:y,cart_container:a,epo_holder:f,totals_holder_container:x,totals_holder:m,main_cart:_,main_epo_inside_form:re,product_id_selector:he,epo_id_selector:fe,product_id:ae,this_epo_container:ce,this_totals_container:ue,this_epo_totals_container:G}}),i.trigger("epoEventHandlers",{epo:t,currentCart:y,cartContainer:a,qtyElement:D,epoHolder:f,totalsHolderContainer:x,totalsHolder:m,variationForm:w,variation_id_selector:oe,main_epo_inside_form:re,this_product_type:O,get_price_excluding_tax:He,get_price_including_tax:Ie}),C!=="disable"&&x.addClass("tc-show"),i.trigger("epo_options_before_visible"),s.tm_epo_progressive_display==="yes"?setTimeout(function(){f.css("opacity",0).addClass("tc-show").animate({opacity:1},o.epoAnimationDelay,"easeOutExpo",function(){i.trigger("epo_options_visible"),i.trigger("tmlazy")})},o.epoDelay):(f.addClass("tc-show"),i.trigger("epo_options_visible"),i.trigger("tmlazy")),p.addClass("tc-init")}function _e(e){var t=e.variations_form,a=e.main_cart,s=e.this_epo_container,o=e.is_associated?"tc_variation_form.cpf":"wc_variation_form.cpf";t.off(o).on(o,function(){if(t.data("epo_loaded"))return;ne(s),se(s),n.tcepo.lateFieldsPrices[e.epoEventId]=[],ae(e),Ne(e),Me(e),e.noEpoUpdate=!1,setTimeout(function(){x(s),a.trigger({type:"tm-epo-update",rules:"init"})},10),t.data("epo_loaded",!0)}),xe&&t.trigger(o),i.trigger("epo-after-init",{epo:e})}function ye(e){var n=requestAnimationFrame(function(){ye(e)}),t=e.variations_form,s=t.data("bound"),o=e.is_associated?"tc_variation_form.cpf":"wc_variation_form.cpf";s&&(cancelAnimationFrame(n),_e(e),t.trigger(o))}function At(e,t,s,o,i){var u=n.extend(!0,{},e),l=o.attr("data-product-id"),d=o.attr("data-epo-id"),a=".tm-product-id-"+l,r="[data-epo-id='"+d+"']",c="p"+l+"e"+d,h=n(".tc-extra-product-options"+a+r),m=n(".tc-totals-form"+a+r),f=n(".tc-epo-totals"+a+r);e.isManual=!0,n.tcepo.formSubmitEvents[c]=[],n.tcepo.errorObject[c]=!1,n.tcepo.initialActivation[c]=!1,e.product_id=l,e.product_id_selector=a,e.epo_id=d,e.epo_id_selector=r,e.epoEventId=c,e.noEpoUpdate=!0,e.thisForm=t,e.this_epo_container=h,e.this_totals_container=m,e.this_epo_totals_container=f,$e(),i.find(".tm-collapse").tmtoggle(),i.find(".tm-section-link").tmsectionpoplink(),V(t),oe(t),Ae(),de(t,e),We(t),R(o),Pe(o.find(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio-image")),ne(o),se(o),x(o),n.tcToolTip(t.find(".tm-tooltip")),ae(e,t,s),e.noEpoUpdate=!1,s.trigger({type:"tm-epo-update",norules:2}),setTimeout(function(){e.main_cart.trigger({type:"tm-epo-update",epoObject:u,norules:1})},200),te(s,t)}function _(t,a,r,c,l,d,u){var h,f,p,g,v,b,j,w,O,m=!1,E=!1,A=!1,_=typeof r!="undefined",k=!1,M=n(".variation_form_section .variations-table").length>0,C=!1;if(t=n(t),t.is(".tc-init")&&!u)return!0;if(a?S=t:S=n(e),i.trigger("tm-epo-init-start"),_||t.is(".product")&&(k=!0,_=y.find(o.epoSelector).length),!_&&s.tm_epo_enable_final_total_box_all==="no"&&!t.is(".tm-no-options-composite")){i.trigger("tm-epo-init-end-no-options");return}return k&&(i.trigger("tm-epo-init-no-options"),t.is(".product")&&!t.is(".tm-no-options-pxq")&&!t.is(".tm-no-options-composite")&&(t=y)),r||(j=t.find(o.addToCartSelector).last(),j.length>0?r=j.val():(j=n(".tc-totals-form.tm-totals-form-main"),r=j.attr("data-product-id")),r||(r="")),c||(c=parseInt(t.find("input.tm-epo-counter").last().val(),10),Number.isFinite(c)||(c="")),b=".tm-product-id-"+r,v="[data-epo-id='"+c+"']",f=n(".tc-extra-product-options"+b+v),w=n(".tc-totals-form"+b+v),O=n(".tc-epo-totals"+b+v),g=t.find(".variations_form").not(".composite_component .variations_form").first(),p="p"+r+"e"+c,g&&g.attr("data-product_id")&&g.attr("data-product_id")!==r&&(g=t.find(".variations_form[data-product_id='"+r+"']")),m=ee(t,t,"form",r),m.length===0&&(t.is(".tc-shortcode-wrap")?m=ee(w,w,".tc-totals-form",r):t.is(".tc-epo-element-product-container")&&(m=t.find(o.associatedEpoCart),m.length===0&&(m=f.parent(o.associatedEpoSelector),m.length===0&&(m=t.find(".tc-epo-element-product-container-right"))),C=!0)),C&&g.length===0&&t.is(".variations_form")&&(g=t),n.tcepo.formSubmitEvents[p]=[],n.tcepo.errorObject[p]=!1,n.tcepo.initialActivation[p]=!1,m.find(o.epoSelector).length>0&&(E=!0),m.find(".tc-totals-form").length>0&&(A=!0),A||(n.tcepo.formSubmitEvents[p][n.tcepo.formSubmitEvents[p].length]={trigger:function(){return!0},on_true:function(){var t=n(".tc-totals-form.tm-product-id-"+r+"[data-epo-id='"+c+"']").tcClone(),e=n('<div class="tm-hidden tm-formepo-normal"></div>');return m.find(".tm-formepo-normal").remove(),e.append(t),m.append(e),!0},on_false:function(){setTimeout(function(){n(".tm-formepo-normal").remove()},100)}}),E||(n.tcepo.formSubmitEvents[p][n.tcepo.formSubmitEvents[p].length]={trigger:function(){return!0},on_true:function(){var t=n(o.epoSelector+".tm-product-id-"+r+"[data-epo-id='"+c+"']").tcClone().addClass("formepo"),e=n('<div class="tm-hidden tm-formepo"></div>');return m.find(".tm-formepo").remove(),e.append(t),m.append(e),!0},on_false:function(){setTimeout(function(){n(".tm-formepo").remove()},100)}}),h={main_product:t,main_cart:m,epo_id:c,form:ve(t),main_epo_inside_form:E,product_id_selector:b,epo_id_selector:v,product_id:r,this_epo_container:f,this_totals_container:w,this_epo_totals_container:O,qtySelector:o.qtySelector,manualInitEPO:At,epoEventId:p,variations_form:g,has_epo:_,is_quickview:a,is_associated:C,is_epo_shortcode:f.is(".tc-shortcode"),mainEpoObject:d,associated_connect:l,noEpoUpdate:!0},n(h.form).data("epo_object",h),f.data("epo_object",h),m.data("product_id",r).data("epo_id",c).data("product_id_selector",b).data("epo_id_selector",v),et(h),Je(h),V(f),oe(f),Ae(),de(f,h),kt(),n.tcToolTip(f.find(".tm-tooltip")),f.find(".tm-collapse").tmtoggle(),f.find(".tm-section-link").tmsectionpoplink(),u&&f.addClass("reactivate"),g.length>0?(u&&g.data("epo_loaded",!1),O.data("price",!1),M?ye(h):_e(h)):(setTimeout(function(){ne(f),se(f),x(f),n.tcepo.lateFieldsPrices[p]=[],ae(h),Ne(h),Me(h),i.trigger("epo-after-init-in-timeout",{epo:h}),m.trigger("tm-epo-check-dpd"),h.noEpoUpdate=!1,m.trigger({type:"tm-epo-update",rules:"init"})},20),i.trigger("epo-after-init",{epo:h})),$e(),We(f),R(f),Pe(f.find(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio-image")),tt(h),mt(h),C||(Et(O,a,m),_t(h),h=Oe(h,p,h),we(t,h)),i.trigger("tm-epo-init-end",{epo:h}),h}function Mt(e,t){var o=n(e),i=o.attr("data-product-id"),a=o.attr("data-epo-id"),r=!1,s=o.parent();s.is("form")||(s=o.closest("form"),s.is("form")||(s=o.parent())),s=s.parent(),_(s,r,i,a,void 0,void 0,t)}function ge(){var t,i;s.tm_epo_no_lazy_load==="no"&&n.extend(n.lazyLoadXT,{autoInit:!1,selector:"img.tmlazy",srcAttr:"data-original",visibleOnly:!1,updateEvent:n.lazyLoadXT.updateEvent+" tmlazy"}),t=n(".tm-no-options-pxq, .tm-no-options-composite"),t.length>0&&(t.addClass("initializing"),t.each(function(e,s){var o;s=n(s),o=s.find("input.tm-epo-counter"),o.length>1?o.each(function(){var t=n(this),s=t.closest(".cart"),e=s.parent();e.is("form")&&(e=e.parent()),e.is(".initializing")||_(e,!1,void 0,parseInt(t.val(),10))}):_(s,!1),t.removeClass("initializing")})),setTimeout(function(){try{i=n(o.epoSelector).not(o.associatedEpoSelector+" "+o.epoSelector+", .tm-no-options-pxq, .tm-no-options-composite, .wc-product-table "+o.epoSelector),i.length>0&&(t.addClass("initializing"),i.each(function(){var c,t=n(this),s=t.attr("data-product-id"),i=t.attr("data-epo-id"),a=!1,r=!1,e=t.closest(".tc-after-shop-loop.tm-has-options");e.length===0?(e=n(o.tcAddToCartSelector+"[data-epo-id='"+i+"'][value='"+s+"']").closest("form,.cart").first().parent(),e.length===0&&(e=n(o.addToCartSelector+"[value='"+s+"']").closest("form,.cart").first().parent(),e.length===0&&(e=t.closest("form,.cart").first().parent(".tm-has-options"),e.length===0&&(t.is(".tc-shortcode")&&(e=t.wrap('<div class="tc-shortcode-wrap tc-wrap-'+i+'"></div>'),e=t.parent()),e.length>0&&(r=!0))))):r=!0,e.length>0&&(r&&(a=!0,t.closest("form,.cart").first().append(n('<input name="add-to-cart" value="'+s+'" type="hidden">')),t.closest("form,.cart").first().append(n('<input type="hidden" value="" class="variation_id" name="variation_id">'))),e.is("form")&&(e=e.parent()),c=e.find("input.tm-epo-counter"),c.length>1?c.each(function(){var t=n(this),o=t.closest(".cart"),e=o.parent();e.is("form")&&(e=e.parent()),e.is(".initializing")||_(e,a,s,parseInt(t.val(),10))}):_(e,a,s,i))}),t.removeClass("initializing"))}catch(t){e.console.log(t),N=t}},1)}n.tcepo.tm_init_epo=function(e,t,n,s){_(e,t,n,s)},n.tcepo.tmLazyloadContainer=function(e){p=e},i.on("tc_manual_init",function(e,t){var n;"container"in t&&"reactivate"in t&&(n=t.reactivate,t=t.container),Mt(t,n)});function fe(e){var t,o,i,a,r,c,l,d,u,h;if(m=e,o=m.attr("data-product_id"),void 0===o&&(o=m.val()),void 0!==o){if(i=m.closest(".cart").find(".tm-epo-counter").val(),!i&&(i=m.attr("data-epo-id"),!i))return;if(m.closest(".tm-has-options").length!==1&&m.attr("data-epo-id")===void 0)return;a={},t=n(".tc-extra-product-options.tm-product-id-"+o+'[data-epo-id="'+i+'"]'),t.length>1&&(t.filter(".formepo")?t=t.filter(".formepo"):t=t.first()),t.length===1&&(r=n(".tc-totals-form.tm-product-id-"+o+'[data-epo-id="'+i+'"]'),d=r.find(".cpf-product-price").val(),u=r.find(".cpf-dynamic-product-price").val(),h=r.find(".cpf-override-product-price").val(),l=r.find(".tc_form_prefix").val(),a=n.extend(a,{tcajax:1,tcaddtocart:o,cpf_product_price:d,dynamic_product_price:u,override_product_price:h}),l&&(a.tc_form_prefix=l)),c=m.data(),s.ajaxbuttondata=n.epoAPI.util.deepCopyArray(c),s.ajaxbutton=m,m.removeData(),m.data(n.extend(c,t.tcSerializeObject(),a)),s.ajaxdata={epos:t,_pid:o,data:c}}}function zt(){n(t).on("click.tcajax","body.mfn-ajax-add-to-cart .single_add_to_cart_button:not(.disabled)",function(){var e,t=n(this);fe(t),s.ajaxdata.cart=t.closest(".cart"),s.ajaxdata.cart.find(".tm-formepo").remove(),e=n("<div class='tm-hidden tm-formepo'></div>"),e.append(s.ajaxdata.epos.tcClone().addClass("formepo")),t.after(e)}),y.on("click.tcajax",".ajax_add_to_cart",function(){fe(n(this)),void 0!==s.ajaxdata&&delete s.ajaxdata}),n(t.body).on("added_to_cart",function(){s.ajaxbuttondata&&s.ajaxbutton instanceof n&&(s.ajaxbutton.removeData(),s.ajaxbutton.data(s.ajaxbuttondata))})}zt(),n(function(){o=n.epoAPI.applyFilter("tc_api",o),i.on("lazyLoadXToncomplete",function(){n(".tm-owl-slider").each(function(){n(this).trigger("refresh.owl.carousel")})}),i.on("tc_init_epo_plugin",function(e){ge(e)}),i.on("tcShowLastError",function(){e.console.log(N)}),n.ajaxPrefilter(function(e,t){var o,i,a,r,c,l,d,u,h,f,p,g,v,j,y,_,w,O=!1,b=!1,x={};if(s.tm_epo_enable_in_shop==="yes"&&(c=e.url.split("?"),c&&c.length>=1&&(c=c[1],c))){j=c.split("&");for(r=0;r<j.length;r+=1)l=j[r].split("="),l.length>=1&&l[0]&&l[1]&&l[0]==="wc-ajax"&&l[1]==="add_to_cart"&&(O=!0);O&&(e.originalsuccess=e.success,e.success=function(s){s&&s.error&&s.product_url?(m&&m.length===1&&(f=m),f=n(".ajax_add_to_cart[data-product_id='"+t.data.product_id+"']"),f.removeClass("added"),f.removeClass("loading")):e.originalsuccess.call(null,s)})}FormData&&t.data&&(o=t.data,typeof t.data=="string"&&(o=n.epoAPI.util.parseParams(t.data)),typeof o[0]=="object"&&(o.forEach(function(e){x[e.name]=e.value}),o=x),p=[],t.url&&t.url.indexOf&&(p=n.epoAPI.util.parseParams(t.url.slice(t.url.indexOf("?")+1))),"quantity"in o&&o.tcaddtocart&&(o.product_id||o["add-to-cart"]||p.product_id||p["add-to-cart"])?(b=!0,a=o.tcaddtocart):Array.isArray(o)&&(b=o.some(function(e){return e.name==="quantity"})&&o.some(function(e){return e.name==="add-to-cart"})&&o.some(function(e){return e.name==="tcaddtocart"}),a=o.find(function(e){return e.name==="tcaddtocart"}),a?a=a.value:a=!1),b&&(m&&m.length===1&&m.closest(".tm-has-options").length===1?i=m.closest(".tm-has-options").find(".tc-extra-product-options.tm-product-id-"+a):i=n(".tc-extra-product-options.tm-product-id-"+a),i.length>1&&(i.filter(".formepo")?i=i.filter(".formepo"):i=i.first()),i.length===1&&(d=n(".tc-totals-form.tm-product-id-"+a),y=d.find(".cpf-product-price").val(),_=d.find(".cpf-dynamic-product-price").val(),w=d.find(".cpf-override-product-price").val(),g=d.find(".tc_form_prefix").val(),v={tcajax:1,tcaddtocart:a,cpf_product_price:y,dynamic_product_price:_,override_product_price:w},g&&(v.tc_form_prefix=g),h=n.epoAPI.util.parseParams(e.data,!0),h=n.extend(h,i.tcSerializeObject(),v),u=new FormData,Object.keys(h).forEach(function(e){e&&u.append(e,h[e])}),i.find(":file").toArray().forEach(function(e){for(r=0;r<n(e)[0].files.length;r++)e.multiple||u.delete(n(e).attr("name")),u.append(n(e).attr("name"),n(e)[0].files[r])}),e.data=u,e.contentType=!1,e.cache=!1,e.processData=!1)))}),l.ajaxSuccess(function(e,t,a){var r,c,l,u,m,f,g,v,j,d=s.quickview_array||"null",h=s.quickview_container||"null",y={},b=1;if(void 0!==s.ajaxdata&&(s.ajaxdata.cart.find(".tm-formepo").remove(),delete s.ajaxdata),c=n.epoAPI.util.parseParams(a.data),c.action==="wc_epo_get_associated_product_html")return;n(".tm-formepo-normal").remove(),n(".tm-formepo").remove(),n(".tm-cart-link").tmpoplink(),d=n.epoAPI.util.parseJSON(d),h=n.epoAPI.util.parseJSON(h);for(f in h)Object.prototype.hasOwnProperty.call(h,f)&&(y[h[f][0]]=n(h[f][1]));n.extend(d,y),j=function(){var e=!1;return Object.keys(d).forEach(function(t){n(d[t]).length&&(e=t)}),e},m=function(e){var s,h=requestAnimationFrame(function(){setTimeout(function(){m(e-1)},200)}),t=j();if((t||0===e)&&(cancelAnimationFrame(h),t)){if(u=!1,r=n(d[t]),t==="woothemes_quick_view"&&r.is(".fusion-woocommerce-quick-view-container"))return!0;if(t==="fusion_quick_view_load"&&r.find(o.epoSelector).length===0)return!0;if(t==="woodmart_quick_shop"&&(c=n.epoAPI.util.parseParams(a.url),c.action==="woodmart_quick_shop"&&(l=n(n.epoAPI.util.escapeSelector(d[t]+".post-"+c.id)),l.length&&(r=l,u=!0))),t==="woodmart_quick_view"&&(c=n.epoAPI.util.parseParams(a.url),c.action==="woodmart_quick_view"&&(l=n(n.epoAPI.util.escapeSelector(d[t]+".post-"+c.id)),l.length&&(r=l,u=!0))),t==="quickview_pro"&&(c=a.url.split("/"),c.length&&(l=n(n.epoAPI.util.escapeSelector(d[t]+" .post-"+c[c.length-1])),l.length&&(r=l,u=!0))),(t==="exwoofood_booking_info"||t==="wqv_popup_content"||t==="wp_food"||t==="jet_popup_get_content")&&(u=!0),t==="woofood"&&a.data&&(c=n.epoAPI.util.parseParams(a.data),c.action==="woofood_quickview_ajax"&&(l=l=r.find("form").parent(),l.length&&(r=l,u=!0))),r.find(".product").length===0&&r.is(".product")&&(u=!0),r.find(".product").length>0||u){if(r.removeClass("tc-init"),(t==="fusion_quick_view_load"||t==="jet_popup_get_content"||t==="wp_food"||t==="woodmart_quick_shop"||t==="woodmart_quick_view"||t==="lightboxpro"||t==="jckqv_quick_view"||t==="yith_quick_view"||t==="theme_flatsome")&&(xe=!0),p=r,p.length>1){for(;p.length>1;)if(p=p.filter(function(){return n(this).find(o.epoSelector).length>0}),p.length===0)break;if(p.length===0)return setTimeout(function(){m(10)},1e3),!0}if(s=p.find(o.epoSelector),s.length===0)return delete d[t],m(10),!0;t==="fusion_quick_view_load"&&(b=1400),setTimeout(function(){v=s.attr("data-product-id"),g=s.attr("data-epo-id"),t==="woodmart_quick_shop"&&r.addClass("has-options"),o.getElementFromFieldCache=[],_(p,!0,v,g),i.trigger("tmlazy"),i.trigger("tm_epo_loaded_quickview"),n.jMaskGlobals&&p.find(n.jMaskGlobals.maskElements).each(function(){var e=n(this);e.attr("data-mask")&&e.mask(e.attr("data-mask"))})},b)}}},m(10)}),ge(),n(".tm-cart-link").tmpoplink(),y.on("updated_checkout wc_fragments_loaded wc_fragments_refreshed wc_fragment_refresh",function(){n(".tm-cart-link").tmpoplink()}),i.trigger("tmlazy"),i.trigger("tm_epo_loaded")});function ue(){n(".tc-associated-table-product td.product-name").each(function(){var e=n(this);e.find(".product-name").length===0&&e.wrapInner(n('<div class="tc-associated-table-product-indent"></div>'))})}y.on("updated_checkout updated_cart_totals",function(){ue()}),ue(),n(function(){var t=navigator.userAgent||navigator.vendor||e.opera,t=t.indexOf("FBAN")>-1||t.indexOf("FBAV")>-1||t.indexOf("Instagram")>-1;t&&n(".tmcp-upload").removeAttr("accept"),l.on("click",".quantity .jckqv-qty-spinner, .quantity .ui-spinner-button",function(){n(this).closest(".quantity").find(o.qtySelector).trigger("change")}),n("#wholesale_form").on("submit",function(){var t=n("form.cart").find(o.addToCartSelector).val(),s=n(o.epoSelector+".tm-cart-main[data-product-id='"+t+"']").tcClone(),i=n(".tm-totals-form-main[data-product-id='"+t+"']").tcClone(),e=n("<div class='tm-hidden tm-formepo'></div>");return e.append(s),e.append(i),n(this).append(e),!0}),l.on("click","#add_to_quote",function(e){var t,i,a;s&&s.tm_epo_global_enable_validation==="yes"&&(t=n(this).parents("form"),i=parseInt(t.find(".tm-epo-counter").val(),10),a=n(o.epoSelector+"[data-epo-id='"+i+"']"),s.tm_epo_global_enable_validation==="yes"&&n.tc_validator&&t.length>0&&a.length>0&&!t.tc_validate().form()&&e.stopImmediatePropagation())}),n(".single_add_to_cart_button.paypal_checkout_button").on("click",function(e){var s,t=n(".cart");t.data("tc_validator")&&(s=t.data("tc_validator"),s.errorList&&e.stopImmediatePropagation())}),n(".wc-product-table").on("init.wcpt",function(t,s){s.$table.find(o.epoSelector).addClass("hidden"),s.$table.find("thead tr").append("<th>&nbsp;</th>"),setTimeout(function(){s.$table.find(".cart:not(.cart_group)").each(function(){var t=n(this).find(o.epoSelector),s=t.closest("tr");n("<td class='wc-product-table-epo'></td>").appendTo(s).append(t),n(e).trigger("tc_manual_init",t),t.removeClass("hidden")})},500)})})})(window,document,window.jQuery)