/*! jQuery Timepicker Addon - v1.6.3 - 2016-04-20
 * http://trentrichardson.com/examples/timepicker
 * Modified version of jQuery Timepicker
 * Copyright (c) 2016 Trent Richardson; Licensed MIT */(function(e){"use strict";typeof window.define=="function"&&window.define.amd?window.define(["jquery","jquery-ui"],e):e(window.jQuery)})(function(e){"use strict";var t=function(t,n){var s;e.extend(t,n);for(s in n)(n[s]===null||n[s]===void 0)&&(t[s]=n[s]);return t},r=function(e){var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},c=function(e){var n=e.replace(/'.*?'/g,"").toLowerCase(),t=function(e,t){return e.indexOf(t)!==-1};return{hour:t(n,"h"),minute:t(n,"m"),second:t(n,"s"),millisec:t(n,"l"),microsec:t(n,"c"),timezone:t(n,"z"),ampm:t(n,"t")&&t(e,"h"),iso8601:t(e,"Z")}},n=function(e){return e%=12,e===0&&(e=12),String(e)},s=function(t,n){return t&&t[n]?t[n]:e.tm_timepicker._defaults[n]},l=function(e,t){var n=s(t,"separator"),r=s(t,"timeFormat"),c=r.split(n),i=c.length,o=e.split(n),a=o.length;return a>1?{dateString:o.splice(0,a-i).join(n),timeString:o.splice(0,i).join(n)}:{dateString:e,timeString:""}},o=function(t,n,s,o,i){var r,a=l(s,i),c=e.tm_datepicker._base_parseDate(t,a.dateString,o);if(a.timeString==="")return{date:c};if(r=e.tm_datepicker.parseTime(n,a.timeString,i),!r)throw"Wrong time format";return{date:c,timeObj:r}},i=function(e,t){var n;e&&e.timezone_select&&(n=t||new Date,e.timezone_select.val(-n.getTimezoneOffset()))},a=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,timeOnlyShowDate:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:!0,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",oneLine:!1,defaultValue:null,parse:"strict",afterInject:null},e.extend(this._defaults,this.regional[""])};if(e.ui.tm_timepicker=e.ui.tm_timepicker||{},e.ui.tm_timepicker.version)return;e.extend(e.ui,{tm_timepicker:{version:"1.6.3"}}),e.extend(a.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(e){return t(this._defaults,e||{}),this},_newInst:function(t,n){var o,i,r,l,u,h,s=new a,f={},p={},d=0,m=null;for(l in this._defaults)Object.prototype.hasOwnProperty.call(this._defaults,l)&&(u=t.attr("data-"+l),u&&(f[l]=u));r={beforeShow:function(e,n){if(typeof s._defaults.evnts.beforeShow=="function")return s._defaults.evnts.beforeShow.call(t[0],e,n,s)},onChangeMonthYear:function(e,n,o){typeof s._defaults.evnts.onChangeMonthYear=="function"&&s._defaults.evnts.onChangeMonthYear.call(t[0],e,n,o,s)},onClose:function(e,n){s.timeDefined===!0&&t.val()!==""&&s._updateDateTime(n),typeof s._defaults.evnts.onClose=="function"&&s._defaults.evnts.onClose.call(t[0],e,n,s)}};for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(p[i]=n[i]||this._defaults[i]||null);if(s._defaults=e.extend({},this._defaults,f,n,r,{evnts:p,tm_timepicker:s}),s.amNames=e.map(s._defaults.amNames,function(e){return e.toUpperCase()}),s.pmNames=e.map(s._defaults.pmNames,function(e){return e.toUpperCase()}),s.support=c(s._defaults.timeFormat+(s._defaults.pickerTimeFormat?s._defaults.pickerTimeFormat:"")+(s._defaults.altTimeFormat?s._defaults.altTimeFormat:"")),typeof s._defaults.controlType=="string"?(s._defaults.controlType==="slider"&&typeof e.ui.slider=="undefined"&&(s._defaults.controlType="select"),s.control=s._controls[s._defaults.controlType]):s.control=s._defaults.controlType,o=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840],s._defaults.timezoneList!==null&&(o=s._defaults.timezoneList),h=o.length,h>0&&typeof o[0]!="object")for(;d<h;d+=1)m=o[d],o[d]={value:m,label:e.tm_timepicker.timezoneOffsetString(m,s.support.iso8601)};return s._defaults.timezoneList=o,s.timezone=s._defaults.timezone!==null?e.tm_timepicker.timezoneOffsetNumber(s._defaults.timezone):(new Date).getTimezoneOffset()*-1,s.hour=s._defaults.hour<s._defaults.hourMin?s._defaults.hourMin:s._defaults.hour>s._defaults.hourMax?s._defaults.hourMax:s._defaults.hour,s.minute=s._defaults.minute<s._defaults.minuteMin?s._defaults.minuteMin:s._defaults.minute>s._defaults.minuteMax?s._defaults.minuteMax:s._defaults.minute,s.second=s._defaults.second<s._defaults.secondMin?s._defaults.secondMin:s._defaults.second>s._defaults.secondMax?s._defaults.secondMax:s._defaults.second,s.millisec=s._defaults.millisec<s._defaults.millisecMin?s._defaults.millisecMin:s._defaults.millisec>s._defaults.millisecMax?s._defaults.millisecMax:s._defaults.millisec,s.microsec=s._defaults.microsec<s._defaults.microsecMin?s._defaults.microsecMin:s._defaults.microsec>s._defaults.microsecMax?s._defaults.microsecMax:s._defaults.microsec,s.ampm="",s.$input=t,s._defaults.altField&&(s.$altInput=e(s._defaults.altField),s._defaults.altRedirectFocus===!0&&s.$altInput.css({cursor:"pointer"}).on("focus",function(){t.trigger("focus")})),(s._defaults.minDate===0||s._defaults.minDateTime===0)&&(s._defaults.minDate=new Date),(s._defaults.maxDate===0||s._defaults.maxDateTime===0)&&(s._defaults.maxDate=new Date),s._defaults.minDate!==void 0&&s._defaults.minDate instanceof Date&&(s._defaults.minDateTime=new Date(s._defaults.minDate.getTime())),s._defaults.minDateTime!==void 0&&s._defaults.minDateTime instanceof Date&&(s._defaults.minDate=new Date(s._defaults.minDateTime.getTime())),s._defaults.maxDate!==void 0&&s._defaults.maxDate instanceof Date&&(s._defaults.maxDateTime=new Date(s._defaults.maxDate.getTime())),s._defaults.maxDateTime!==void 0&&s._defaults.maxDateTime instanceof Date&&(s._defaults.maxDate=new Date(s._defaults.maxDateTime.getTime())),s.$input.on("focus",function(){s._onFocus()}),s.$input.next(".ui-tm-timepicker-trigger").on("click",function(){return s._onFocus(),!1}),s},_addTimePicker:function(t){var n=e.epoAPI.util.trim(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(n),this._limitMinMaxDateTime(t,!1),this._injectTimePicker(),this._afterInject()},_parseTime:function(t,n){var s,i,a;if(this.inst||(this.inst=e.tm_datepicker._getInst(this.$input[0])),n||!this._defaults.timeOnly){s=e.tm_datepicker._get(this.inst,"dateFormat");try{if(i=o(s,this._defaults.timeFormat,t,e.tm_datepicker._getFormatConfig(this.inst),this._defaults),!i.timeObj)return!1;e.extend(this,i.timeObj)}catch(n){return e.tm_timepicker.log("Error parsing the date/time string: "+n+`
date/time string = `+t+`
timeFormat = `+this._defaults.timeFormat+`
dateFormat = `+s),!1}return!0}return a=e.tm_datepicker.parseTime(this._defaults.timeFormat,t,this._defaults),!!a&&(e.extend(this,a),!0)},_afterInject:function(){var e=this.inst.settings;typeof e.afterInject=="function"&&e.afterInject.call(this)},_ui_tpicker_onclick:function(t){var s=e(t.target),o=s.html(),n=parseInt(o.replace(/[^0-9]/g),10),i=o.replace(/[^apm]/gi),a=s.data("for");a==="hour"&&(i.indexOf("p")!==-1&&n<12?n+=12:i.indexOf("a")!==-1&&n===12&&(n=0)),t.data.tp_inst.control.value(t.data.tp_inst,t.data.tp_inst[a+"_slider"],t.data.litem,n),t.data.tp_inst._onTimeChange(),t.data.tp_inst._onSelectHandler()},_injectTimePicker:function(){var o,a,r,h,g,b,j,y,_,w,O,x,v=this.inst.dpDiv,n=this.inst.settings,s=this,t="",c="",d=null,m={},u={},p=null,l=0,f=0;if(v.find("div.ui-tm-timepicker-div").length===0&&n.showTimepicker){r=" ui_tpicker_unit_hide",a='<div class="ui-tm-timepicker-div'+(n.isRTL?" ui-tm-timepicker-rtl":"")+(n.oneLine&&n.controlType==="select"?" ui-tm-timepicker-oneLine":"")+'"><dl><dt class="ui_tpicker_time_label'+(n.showTime?"":r)+'">'+n.timeText+'</dt><dd class="ui_tpicker_time '+(n.showTime?"":r)+'"><input class="ui_tpicker_time_input" '+(n.timeInput?"":"disabled")+"></dd>";for(l=0,f=this.units.length;l<f;l+=1){if(t=this.units[l],c=t.substring(0,1).toUpperCase()+t.substring(1),d=n["show"+c]!==null?n["show"+c]:this.support[t],m[t]=parseInt(n[t+"Max"]-(n[t+"Max"]-n[t+"Min"])%n["step"+c],10),u[t]=0,a+='<dt class="ui_tpicker_'+t+"_label"+(d?"":r)+'">'+n[t+"Text"]+'</dt><dd class="ui_tpicker_'+t+(d?"":r)+'"><div class="ui_tpicker_'+t+"_slider"+(d?"":r)+'"></div>',d&&n[t+"Grid"]>0){if(a+='<div><table class="ui-tpicker-grid-label"><tr>',t==="hour")for(g=n[t+"Min"];g<=m[t];g+=parseInt(n[t+"Grid"],10))u[t]+=1,w=e.tm_datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:g},n),a+='<td data-for="'+t+'">'+w+"</td>";else for(h=n[t+"Min"];h<=m[t];h+=parseInt(n[t+"Grid"],10))u[t]+=1,a+='<td data-for="'+t+'">'+(h<10?"0":"")+h+"</td>";a+="</tr></table></div>"}a+="</dd>"}j=n.showTimezone!==null?n.showTimezone:this.support.timezone,a+='<dt class="ui_tpicker_timezone_label'+(j?"":r)+'">'+n.timezoneText+"</dt>",a+='<dd class="ui_tpicker_timezone'+(j?"":r)+'"></dd>',a+="</dl></div>",o=e(a),n.timeOnly===!0&&(o.prepend('<div class="tm-ui-widget-header"><div class="tm-ui-tp-title">'+n.timeOnlyTitle+"</div></div>"),v.find(".tm-ui-dp-inner-container").hide());for(l=0,f=s.units.length;l<f;l+=1)t=s.units[l],c=t.substring(0,1).toUpperCase()+t.substring(1),d=n["show"+c]!==null?n["show"+c]:this.support[t],s[t+"_slider"]=s.control.create(s,o.find(".ui_tpicker_"+t+"_slider"),t,s[t],n[t+"Min"],m[t],n["step"+c]),d&&n[t+"Grid"]>0&&(p=100*u[t]*n[t+"Grid"]/(m[t]-n[t+"Min"]),o.find(".ui_tpicker_"+t+" table").css({width:p+"%",marginLeft:n.isRTL?"0":p/(-2*u[t])+"%",marginRight:n.isRTL?p/(-2*u[t])+"%":"0",borderCollapse:"collapse"}).find("td").on("click",{that:this,tp_inst:s,litem:t},this._ui_tpicker_onclick).css({cursor:"pointer",width:100/u[t]+"%",textAlign:"center",overflow:"hidden"}));this.timezone_select=o.find(".ui_tpicker_timezone").append("<select></select>").find("select"),e.fn.append.apply(this.timezone_select,e.map(n.timezoneList,function(t){return e("<option />").val(typeof t=="object"?t.value:t).text(typeof t=="object"?t.label:t)})),typeof this.timezone!="undefined"&&this.timezone!==null&&this.timezone!==""?(O=new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset()*-1,O===this.timezone?i(s):this.timezone_select.val(this.timezone)):typeof this.hour!="undefined"&&this.hour!==null&&this.hour!==""?this.timezone_select.val(n.timezone):i(s),this.timezone_select.on("change",function(){s._onTimeChange(),s._onSelectHandler(),s._afterInject()}),y=v.find(".tm-ui-dp-buttonpane"),y.length?y.before(o):v.append(o),this.$timeObj=o.find(".ui_tpicker_time_input"),this.$timeObj.on("change",function(){var o=s.inst.settings.timeFormat,t=e.tm_datepicker.parseTime(o,this.value),n=new Date;t?(n.setHours(t.hour),n.setMinutes(t.minute),n.setSeconds(t.second),e.datepicker._setTime(s.inst,n)):(this.value=s.formattedTime,this.trigger("blur"))}),this.inst!==null&&(x=this.timeDefined,this._onTimeChange(),this.timeDefined=x),this._defaults.addSliderAccess&&(_=this._defaults.sliderAccessArgs,b=this._defaults.isRTL,_.isRTL=b,setTimeout(function(){var t;o.find(".ui-slider-access").length===0&&(o.find(".ui-slider:visible").sliderAccess(_),t=o.find(".ui-slider-access:eq(0)").outerWidth(!0),t&&o.find("table:visible").each(function(){var n=e(this),s=n.outerWidth(),a=n.css(b?"marginRight":"marginLeft").toString().replace("%",""),o=s-t,r=a*o/s+"%",i={width:o,marginRight:0,marginLeft:0};i[b?"marginRight":"marginLeft"]=r,n.css(i)}))},10)),s._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(t,n){var s,o,a,r,l,d,u,h,m,f,p,i=this._defaults,c=new Date(t.selectedYear,t.selectedMonth,t.selectedDay);if(!this._defaults.showTimepicker)return;e.tm_datepicker._get(t,"minDateTime")!==null&&e.tm_datepicker._get(t,"minDateTime")!==void 0&&c&&(a=e.tm_datepicker._get(t,"minDateTime"),l=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0),(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null||this.millisecMinOriginal===null||this.microsecMinOriginal===null)&&(this.hourMinOriginal=i.hourMin,this.minuteMinOriginal=i.minuteMin,this.secondMinOriginal=i.secondMin,this.millisecMinOriginal=i.millisecMin,this.microsecMinOriginal=i.microsecMin),t.settings.timeOnly||l.getTime()===c.getTime()?(this._defaults.hourMin=a.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=a.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=a.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=a.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=a.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)),e.tm_datepicker._get(t,"maxDateTime")!==null&&e.tm_datepicker._get(t,"maxDateTime")!==void 0&&c&&(r=e.tm_datepicker._get(t,"maxDateTime"),d=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0),(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null||this.millisecMaxOriginal===null)&&(this.hourMaxOriginal=i.hourMax,this.minuteMaxOriginal=i.minuteMax,this.secondMaxOriginal=i.secondMax,this.millisecMaxOriginal=i.millisecMax,this.microsecMaxOriginal=i.microsecMax),t.settings.timeOnly||d.getTime()===c.getTime()?(this._defaults.hourMax=r.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=r.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=r.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=r.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=r.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)),t.settings.minTime!==null&&(s=new Date("01/01/1970 "+t.settings.minTime),parseFloat(t.settings.minTime).toString()===t.settings.minTime&&(s=new Date(Date.now()+parseFloat(t.settings.minTime))),this.hour<s.getHours()?(this._defaults.hourMin=s.getHours(),this.hour=this._defaults.hourMin,this._defaults.minuteMin=s.getMinutes(),this.minute=this._defaults.minuteMin):this.hour===s.getHours()&&this.minute<s.getMinutes()?(this._defaults.minuteMin=s.getMinutes(),this.minute=this._defaults.minuteMin):this._defaults.hourMin<s.getHours()?(this._defaults.hourMin=s.getHours(),this._defaults.minuteMin=s.getMinutes()):this._defaults.hourMin===s.getHours()===this.hour&&this._defaults.minuteMin<s.getMinutes()?this._defaults.minuteMin=s.getMinutes():this._defaults.minuteMin=0),t.settings.maxTime!==null&&(o=new Date("01/01/1970 "+t.settings.maxTime),this.hour>o.getHours()?(this._defaults.hourMax=o.getHours(),this.hour=this._defaults.hourMax,this._defaults.minuteMax=o.getMinutes(),this.minute=this._defaults.minuteMax):this.hour===o.getHours()&&this.minute>o.getMinutes()?(this._defaults.minuteMax=o.getMinutes(),this.minute=this._defaults.minuteMax):this._defaults.hourMax>o.getHours()?(this._defaults.hourMax=o.getHours(),this._defaults.minuteMax=o.getMinutes()):this._defaults.hourMax===o.getHours()===this.hour&&this._defaults.minuteMax>o.getMinutes()?this._defaults.minuteMax=o.getMinutes():this._defaults.minuteMax=59),n!==void 0&&n===!0&&(u=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),h=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),m=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),f=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),p=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10),this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:u,step:this._defaults.stepHour}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:h,step:this._defaults.stepMinute}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:m,step:this._defaults.stepSecond}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:f,step:this._defaults.stepMillisec}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:p,step:this._defaults.stepMicrosec}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec)))},_onTimeChange:function(){var c,u,h,m,t=!!this.hour_slider&&this.control.value(this,this.hour_slider,"hour"),r=!!this.minute_slider&&this.control.value(this,this.minute_slider,"minute"),o=!!this.second_slider&&this.control.value(this,this.second_slider,"second"),s=!!this.millisec_slider&&this.control.value(this,this.millisec_slider,"millisec"),i=!!this.microsec_slider&&this.control.value(this,this.microsec_slider,"microsec"),a=!!this.timezone_select&&this.timezone_select.val(),n=this._defaults,l=n.pickerTimeFormat||n.timeFormat,d=n.pickerTimeSuffix||n.timeSuffix;if(!this._defaults.showTimepicker)return;typeof t=="object"&&(t=!1),typeof r=="object"&&(r=!1),typeof o=="object"&&(o=!1),typeof s=="object"&&(s=!1),typeof i=="object"&&(i=!1),typeof a=="object"&&(a=!1),t!==!1&&(t=parseInt(t,10)),r!==!1&&(r=parseInt(r,10)),o!==!1&&(o=parseInt(o,10)),s!==!1&&(s=parseInt(s,10)),i!==!1&&(i=parseInt(i,10)),a!==!1&&(a=a.toString()),u=n[t<12?"amNames":"pmNames"][0],c=t!==parseInt(this.hour,10)||r!==parseInt(this.minute,10)||o!==parseInt(this.second,10)||s!==parseInt(this.millisec,10)||i!==parseInt(this.microsec,10)||this.ampm.length>0&&t<12!==(e.inArray(this.ampm.toUpperCase(),this.amNames)!==-1)||this.timezone!==null&&a!==this.timezone.toString(),c&&(t!==!1&&(this.hour=t),r!==!1&&(this.minute=r),o!==!1&&(this.second=o),s!==!1&&(this.millisec=s),i!==!1&&(this.microsec=i),a!==!1&&(this.timezone=a),this.inst||(this.inst=e.tm_datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=u),this.formattedTime=e.tm_datepicker.formatTime(n.timeFormat,this,n),this.$timeObj&&(l===n.timeFormat?this.$timeObj.val(this.formattedTime+d):this.$timeObj.val(e.tm_datepicker.formatTime(l,this,n)+d),this.$timeObj[0].setSelectionRange&&(h=this.$timeObj[0].selectionStart,m=this.$timeObj[0].selectionEnd,this.$timeObj[0].setSelectionRange(h,m))),this.timeDefined=!0,c&&this._updateDateTime()},_onSelectHandler:function(){var e=this._defaults.onSelect||this.inst.settings.onSelect,t=this.$input?this.$input[0]:null;e&&t&&e.apply(t,[this.formattedDateTime,this])},_updateDateTime:function(t){var s,o,i,a,r,c,l,d,n="";t=this.inst||t,r=t.currentYear>0?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(t.selectedYear,t.selectedMonth,t.selectedDay),s=e.tm_datepicker._daylightSavingAdjust(r),c=e.tm_datepicker._get(t,"dateFormat"),i=e.tm_datepicker._getFormatConfig(t),l=s!==null&&this.timeDefined,this.formattedDate=e.tm_datepicker.formatDate(c,s===null?new Date:s,i),o=this.formattedDate,t.lastVal===""&&(t.currentYear=t.selectedYear,t.currentMonth=t.selectedMonth,t.currentDay=t.selectedDay),this._defaults.timeOnly===!0&&this._defaults.timeOnlyShowDate===!1?o=this.formattedTime:(this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||l)||this._defaults.timeOnly===!0&&this._defaults.timeOnlyShowDate===!0)&&(o+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=o,this._defaults.showTimepicker?this.$altInput&&this._defaults.timeOnly===!1&&this._defaults.altFieldTimeOnly===!0?(this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate)):this.$altInput?(this.$input.val(o),n="",d=this._defaults.altSeparator!==null?this._defaults.altSeparator:this._defaults.separator,a=this._defaults.altTimeSuffix!==null?this._defaults.altTimeSuffix:this._defaults.timeSuffix,this._defaults.timeOnly||(this._defaults.altFormat?n=e.tm_datepicker.formatDate(this._defaults.altFormat,s===null?new Date:s,i):n=this.formattedDate,n&&(n+=d)),this._defaults.altTimeFormat!==null?n+=e.tm_datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+a:n+=this.formattedTime+a,this.$altInput.val(n)):this.$input.val(o):this.$input.val(this.formattedDate),this.$input.trigger("change")},_onFocus:function(){var t,n;if(!this.$input.val()&&this._defaults.defaultValue&&(this.$input.val(this._defaults.defaultValue),t=e.tm_datepicker._getInst(this.$input.get(0)),n=e.tm_datepicker._get(t,"tm_timepicker"),n&&n._defaults.timeOnly&&t.input.val()!==t.lastVal))try{e.tm_datepicker._updateDatepicker(t)}catch(t){e.tm_timepicker.log(t)}},_controls:{slider:{create:function(t,n,s,o,i,a,r){var c=t._defaults.isRTL;return n.prop("slide",null).slider({orientation:"horizontal",value:c?o*-1:o,min:c?a*-1:i,max:c?i*-1:a,step:r,slide:function(n,o){t.control.value(t,e(this),s,c?o.value*-1:o.value),t._onTimeChange()},stop:function(){t._onSelectHandler()}})},options:function(e,t,n,s,o){var i,a;return e._defaults.isRTL?typeof s=="string"?s==="min"||s==="max"?o!==void 0?t.slider(s,o*-1):Math.abs(t.slider(s)):t.slider(s):(i=s.min,a=s.max,s.max=null,s.min=null,i!==void 0&&(s.max=i*-1),a!==void 0&&(s.min=a*-1),t.slider(s)):typeof s=="string"&&o!==void 0?t.slider(s,o):t.slider(s)},value:function(e,t,n,s){return e._defaults.isRTL?s!==void 0?t.slider("value",s*-1):Math.abs(t.slider("value")):s!==void 0?t.slider("value",s):t.slider("value")}},select:{create:function(t,n,s,o,i,a,r){var c,l='<select class="ui-tm-timepicker-select ui-state-default ui-corner-all" data-unit="'+s+'" data-min="'+i+'" data-max="'+a+'" data-step="'+r+'">',d=t._defaults.pickerTimeFormat||t._defaults.timeFormat;for(c=i;c<=a;c+=r)l+='<option value="'+c+'"'+(c===o?" selected":"")+">",s==="hour"?l+=e.tm_datepicker.formatTime(e.epoAPI.util.trim(d.replace(/[^ht ]/gi,"")),{hour:c},t._defaults):s==="millisec"||s==="microsec"||c>=10?l+=c:l+="0"+c.toString(),l+="</option>";return l+="</select>",n.children("select").remove(),e(l).appendTo(n).on("change",function(){t._onTimeChange(),t._onSelectHandler(),t._afterInject()}),n},options:function(e,t,n,s,o){var i={},a=t.children("select");if(typeof s=="string"){if(o===void 0)return a.data(s);i[s]=o}else i=s;return e.control.create(e,t,a.data("unit"),a.val(),i.min>=0?i.min:a.data("min"),i.max||a.data("max"),i.step||a.data("step"))},value:function(e,t,n,s){var o=t.children("select");return s!==void 0?o.val(s):o.val()}}}}),e.fn.extend({tm_timepicker:function(t){var n=Array.prototype.slice.call(arguments);return t=t||{},typeof t=="object"&&(n[0]=e.extend(t,{timeOnly:!0})),e(this).each(function(){e.fn.tm_datetimepicker.apply(e(this),n)})},tm_datetimepicker:function(t){var n=arguments;return t=t||{},typeof t=="string"?t==="getDate"||t==="option"&&n.length===2&&typeof n[1]=="string"?e.fn.tm_datepicker.apply(e(this[0]),n):this.each(function(){var t=e(this);t.tm_datepicker.apply(t,n)}):this.each(function(){var n=e(this);n.tm_datepicker(e.tm_timepicker._newInst(n,t)._defaults)})}}),e.tm_datepicker.parseDateTime=function(e,t,n,s,i){var a,r=o(e,t,n,s,i);return r.timeObj&&(a=r.timeObj,r.date.setHours(a.hour,a.minute,a.second,a.millisec),r.date.setMicroseconds(a.microsec)),r.date},e.tm_datepicker.parseTime=function(n,s,o){var i=t(t({},e.tm_timepicker._defaults),o||{}),a=function(t,n,s){var c=function(t,n){var s=[];return t&&e.merge(s,t),n&&e.merge(s,n),s=e.map(s,function(e){return e.replace(/[.*+?|()[\]{}\\]/g,"\\$&")}),"("+s.join("|")+")?"},l=function(e){var t,n=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),s={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(n)for(t=0;t<n.length;t+=1)s[n[t].toString().charAt(0)]===-1&&(s[n[t].toString().charAt(0)]=t+1);return s},d="^"+t.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){var t=e.length;switch(e.charAt(0).toLowerCase()){case"h":return t===1?"(\\d?\\d)":"(\\d{"+t+"})";case"m":return t===1?"(\\d?\\d)":"(\\d{"+t+"})";case"s":return t===1?"(\\d?\\d)":"(\\d{"+t+"})";case"l":return"(\\d?\\d?\\d)";case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return c(s.amNames,s.pmNames);default:return"("+e.replace(/'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(e){return"\\"+e})+")?"}}).replace(/\s/g,"\\s?")+s.timeSuffix+"$",o=l(t),r="",a={hour:0,minute:0,second:0,millisec:0,microsec:0},i=n.match(new RegExp(d,"i"));return!!i&&(o.t!==-1&&(i[o.t]===void 0||i[o.t].length===0?(r="",a.ampm=""):(r=e.inArray(i[o.t].toUpperCase(),e.map(s.amNames,function(e){return e.toUpperCase()}))!==-1?"AM":"PM",a.ampm=s[r==="AM"?"amNames":"pmNames"][0])),o.h!==-1&&(r==="AM"&&i[o.h]==="12"?a.hour=0:r==="PM"&&i[o.h]!=="12"?a.hour=parseInt(i[o.h],10)+12:a.hour=Number(i[o.h])),o.m!==-1&&(a.minute=Number(i[o.m])),o.s!==-1&&(a.second=Number(i[o.s])),o.l!==-1&&(a.millisec=Number(i[o.l])),o.c!==-1&&(a.microsec=Number(i[o.c])),o.z!==-1&&i[o.z]!==void 0&&(a.timezone=e.tm_timepicker.timezoneOffsetNumber(i[o.z])),a)},r=function(t,n,s){var o;try{if(o=new Date("2012-01-01 "+n),isNaN(o.getTime())&&(o=new Date("2012-01-01T"+n),isNaN(o.getTime())&&(o=new Date("01/01/2012 "+n),isNaN(o.getTime()))))throw"Unable to parse time with native Date: "+n;return{hour:o.getHours(),minute:o.getMinutes(),second:o.getSeconds(),millisec:o.getMilliseconds(),microsec:o.getMicroseconds(),timezone:o.getTimezoneOffset()*-1}}catch{try{return a(t,n,s)}catch{e.tm_timepicker.log(`Unable to parse 
timeString: `+n+`
timeFormat: `+t)}}return!1};return typeof i.parse=="function"?i.parse(n,s,i):i.parse==="loose"?r(n,s,i):a(n,s,i)},e.tm_datepicker.formatTime=function(t,s,o){var i,a,r;return o=o||{},o=e.extend({},e.tm_timepicker._defaults,o),s=e.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},s),r=t,i=o.amNames[0],a=parseInt(s.hour,10),a>11&&(i=o.pmNames[0]),r=r.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(t){switch(t){case"HH":return("0"+a).slice(-2);case"H":return a;case"hh":return("0"+n(a)).slice(-2);case"h":return n(a);case"mm":return("0"+s.minute).slice(-2);case"m":return s.minute;case"ss":return("0"+s.second).slice(-2);case"s":return s.second;case"l":return("00"+s.millisec).slice(-3);case"c":return("00"+s.microsec).slice(-3);case"z":return e.tm_timepicker.timezoneOffsetString(s.timezone===null?o.timezone:s.timezone,!1);case"Z":return e.tm_timepicker.timezoneOffsetString(s.timezone===null?o.timezone:s.timezone,!0);case"T":return i.charAt(0).toUpperCase();case"TT":return i.toUpperCase();case"t":return i.charAt(0).toLowerCase();case"tt":return i.toLowerCase();default:return t.replace(/'/g,"")}}),r},e.tm_datepicker._base_selectDate=e.tm_datepicker._selectDate,e.tm_datepicker._selectDate=function(t,n){var i,s=this._getInst(e(t)[0]),o=this._get(s,"tm_timepicker");o&&s.settings.showTimepicker?(o._limitMinMaxDateTime(s,!0),i=s.inline,s.stay_open=!0,s.inline=!0,this._base_selectDate(t,n),s.inline=i,s.stay_open=!1,this._notifyChange(s),this._updateDatepicker(s)):this._base_selectDate(t,n)},e.tm_datepicker._base_updateDatepicker=e.tm_datepicker._updateDatepicker,e.tm_datepicker._updateDatepicker=function(t){var n,s=t.input[0];if(e.tm_datepicker._curInst&&e.tm_datepicker._curInst!==t&&e.tm_datepicker._datepickerShowing&&e.tm_datepicker._lastInput!==s)return;(typeof t.stay_open!="boolean"||t.stay_open===!1)&&(this._base_updateDatepicker(t),n=this._get(t,"tm_timepicker"),n&&n._addTimePicker(t))},e.tm_datepicker._base_doKeyPress=e.tm_datepicker._doKeyPress,e.tm_datepicker._doKeyPress=function(t){var s,i,a,r,c,o=e.tm_datepicker._getInst(t.target),n=e.tm_datepicker._get(o,"tm_timepicker");return n&&e.tm_datepicker._get(o,"constrainInput")?(s=n.support.ampm,r=n._defaults.showTimezone!==null?n._defaults.showTimezone:n.support.timezone,i=e.tm_datepicker._possibleChars(e.tm_datepicker._get(o,"dateFormat")),c=n._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,s?"APM":"").replace(/Tt/g,s?"AaPpMm":"").replace(/tT/g,s?"AaPpMm":"").replace(/T/g,s?"AP":"").replace(/tt/g,s?"apm":"").replace(/t/g,s?"ap":"")+" "+n._defaults.separator+n._defaults.timeSuffix+(r?n._defaults.timezoneList.join(""):"")+n._defaults.amNames.join("")+n._defaults.pmNames.join("")+i,a=String.fromCharCode(t.charCode===void 0?t.keyCode:t.charCode),t.ctrlKey||a<" "||!i||c.indexOf(a)>-1):e.tm_datepicker._base_doKeyPress(t)},e.tm_datepicker._base_updateAlternate=e.tm_datepicker._updateAlternate,e.tm_datepicker._updateAlternate=function(t){var s,o,i,a,r,c,l,n=this._get(t,"tm_timepicker");n?(o=n._defaults.altField,o&&(i=this._getDate(t),r=e.tm_datepicker._getFormatConfig(t),s="",a=n._defaults.altSeparator?n._defaults.altSeparator:n._defaults.separator,c=n._defaults.altTimeSuffix?n._defaults.altTimeSuffix:n._defaults.timeSuffix,l=n._defaults.altTimeFormat!==null?n._defaults.altTimeFormat:n._defaults.timeFormat,s+=e.tm_datepicker.formatTime(l,n,n._defaults)+c,!n._defaults.timeOnly&&!n._defaults.altFieldTimeOnly&&i!==null&&(n._defaults.altFormat?s=e.tm_datepicker.formatDate(n._defaults.altFormat,i,r)+a+s:s=n.formattedDate+a+s),e(o).val(t.input.val()?s:""))):e.tm_datepicker._base_updateAlternate(t)},e.tm_datepicker._base_doKeyUp=e.tm_datepicker._doKeyUp,e.tm_datepicker._doKeyUp=function(t){var n=e.tm_datepicker._getInst(t.target),s=e.tm_datepicker._get(n,"tm_timepicker");if(s&&s._defaults.timeOnly&&n.input.val()!==n.lastVal)try{e.tm_datepicker._updateDatepicker(n)}catch(t){e.tm_timepicker.log(t)}return e.tm_datepicker._base_doKeyUp(t)},e.tm_datepicker._base_gotoToday=e.tm_datepicker._gotoToday,e.tm_datepicker._gotoToday=function(t){var n,s,i,o=this._getInst(e(t)[0]);if(this._base_gotoToday(t),s=this._get(o,"timepicker"),!s)return;i=e.tm_timepicker.timezoneOffsetNumber(s.timezone),n=new Date,n.setMinutes(n.getMinutes()+n.getTimezoneOffset()+parseInt(i,10)),this._setTime(o,n),this._setDate(o,n),s._onSelectHandler()},e.tm_datepicker._disableTimepickerDatepicker=function(t){var s,n=this._getInst(t);if(!n)return;s=this._get(n,"tm_timepicker"),e(t).tm_datepicker("getDate"),s&&(n.settings.showTimepicker=!1,s._defaults.showTimepicker=!1,s._updateDateTime(n))},e.tm_datepicker._enableTimepickerDatepicker=function(t){var s,n=this._getInst(t);if(!n)return;s=this._get(n,"tm_timepicker"),e(t).tm_datepicker("getDate"),s&&(n.settings.showTimepicker=!0,s._defaults.showTimepicker=!0,s._addTimePicker(n),s._updateDateTime(n))},e.tm_datepicker._setTime=function(e,t){var s,n=this._get(e,"tm_timepicker");n&&(s=n._defaults,n.hour=t?t.getHours():s.hour,n.minute=t?t.getMinutes():s.minute,n.second=t?t.getSeconds():s.second,n.millisec=t?t.getMilliseconds():s.millisec,n.microsec=t?t.getMicroseconds():s.microsec,n._limitMinMaxDateTime(e,!0),n._onTimeChange(),n._updateDateTime(e))},e.tm_datepicker._setTimeDatepicker=function(e,t,n){var s,o,i=this._getInst(e);if(!i)return;s=this._get(i,"tm_timepicker"),s&&(this._setDateFromField(i),t&&(typeof t=="string"?(s._parseTime(t,n),o=new Date,o.setHours(s.hour,s.minute,s.second,s.millisec),o.setMicroseconds(s.microsec)):(o=new Date(t.getTime()),o.setMicroseconds(t.getMicroseconds())),o.toString()==="Invalid Date"&&(o=void 0),this._setTime(i,o)))},e.tm_datepicker._base_setDateDatepicker=e.tm_datepicker._setDateDatepicker,e.tm_datepicker._setDateDatepicker=function(t,n){var o,i,a=this._getInst(t),s=n;if(!a)return;typeof n=="string"&&(s=new Date(n),s.getTime()||(this._base_setDateDatepicker.apply(this,arguments),s=e(t).tm_datepicker("getDate"))),i=this._get(a,"tm_timepicker"),s instanceof Date?(o=new Date(s.getTime()),o.setMicroseconds(s.getMicroseconds())):o=s,i&&o&&(!i.support.timezone&&i._defaults.timezone===null&&(i.timezone=o.getTimezoneOffset()*-1),s=e.tm_timepicker.timezoneAdjust(s,e.tm_timepicker.timezoneOffsetString(-s.getTimezoneOffset()),i.timezone),o=e.tm_timepicker.timezoneAdjust(o,e.tm_timepicker.timezoneOffsetString(-o.getTimezoneOffset()),i.timezone)),this._updateDatepicker(a),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(t,o,!0)},e.tm_datepicker._base_getDateDatepicker=e.tm_datepicker._getDateDatepicker,e.tm_datepicker._getDateDatepicker=function(t,n){var s,o,a,i=this._getInst(t);if(!i)return;return s=this._get(i,"tm_timepicker"),s?(i.lastVal===void 0&&this._setDateFromField(i,n),o=this._getDate(i),a=null,s.$altInput&&s._defaults.altFieldTimeOnly?a=s.$input.val()+" "+s.$altInput.val():s.$input.get(0).tagName!=="INPUT"&&s.$altInput?a=s.$altInput.val():a=s.$input.val(),o&&s._parseTime(a,!i.settings.timeOnly)&&(o.setHours(s.hour,s.minute,s.second,s.millisec),o.setMicroseconds(s.microsec),s.timezone!==null&&(!s.support.timezone&&s._defaults.timezone===null&&(s.timezone=o.getTimezoneOffset()*-1),o=e.tm_timepicker.timezoneAdjust(o,s.timezone,e.tm_timepicker.timezoneOffsetString(-o.getTimezoneOffset())))),o):this._base_getDateDatepicker(t,n)},e.tm_datepicker._base_parseDate=e.tm_datepicker.parseDate,e.tm_datepicker.parseDate=function(t,n,s){var o;try{o=this._base_parseDate(t,n,s)}catch(i){if(i.indexOf(":")>=0)o=this._base_parseDate(t,n.substring(0,n.length-(i.length-i.indexOf(":")-2)),s),e.tm_timepicker.log("Error parsing the date string: "+i+`
date string = `+n+`
date format = `+t);else throw i}return o},e.tm_datepicker._base_formatDate=e.tm_datepicker._formatDate,e.tm_datepicker._formatDate=function(e){var t=this._get(e,"tm_timepicker");return t?(t._updateDateTime(e),t.$input.val()):this._base_formatDate(e)},e.tm_datepicker._base_optionDatepicker=e.tm_datepicker._optionDatepicker,e.tm_datepicker._optionDatepicker=function(t,n,s){var o,i,a,c,l,d,u,h,m,p,g,f=this._getInst(t);if(!f)return null;if(l=this._get(f,"tm_timepicker"),l){if(o=null,i=null,h=null,d=l._defaults.evnts,u={},typeof n=="string"){if(n==="minDate"||n==="minDateTime")o=s;else if(n==="maxDate"||n==="maxDateTime")i=s;else if(n==="onSelect")h=s;else if(Object.prototype.hasOwnProperty.call(d,n)){if(typeof s=="undefined")return d[n];u[n]=s,c={}}}else if(typeof n=="object"){n.minDate?o=n.minDate:n.minDateTime?o=n.minDateTime:n.maxDate?i=n.maxDate:n.maxDateTime&&(i=n.maxDateTime);for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&n[a]&&(u[a]=n[a])}for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(d[a]=u[a],c||(c=e.extend({},n)),delete c[a]);if(c&&r(c))return;if(o?(o===0?o=new Date:o=new Date(o),l._defaults.minDate=o,l._defaults.minDateTime=o):i?(i===0?i=new Date:i=new Date(i),l._defaults.maxDate=i,l._defaults.maxDateTime=i):h&&(l._defaults.onSelect=h),o||i)return m=e(t),g=m.tm_datetimepicker("getDate"),p=this._base_optionDatepicker.call(e.tm_datepicker,t,c||n,s),m.tm_datetimepicker("setDate",g),p}return s===void 0?this._base_optionDatepicker.call(e.tm_datepicker,t,n):this._base_optionDatepicker.call(e.tm_datepicker,t,c||n,s)},e.tm_timepicker=new a,e.tm_timepicker.timezoneOffsetString=function(e,t){var n,s,o,i,a;return isNaN(e)||e>840||e<-720?e:(n=e,s=n%60,i=(n-s)/60,a=t?":":"",o=(n>=0?"+":"-")+("0"+Math.abs(i)).slice(-2)+a+("0"+Math.abs(s)).slice(-2),o==="+00:00"?"Z":o)},e.tm_timepicker.timezoneOffsetNumber=function(e){var t=e.toString().replace(":","");return t.toUpperCase()==="Z"?0:/^(-|\+)\d{4}$/.test(t)?(t.substring(0,1)==="-"?-1:1)*(parseInt(t.substring(1,3),10)*60+parseInt(t.substring(3,5),10)):parseInt(e,10)},e.tm_timepicker.timezoneAdjust=function(t,n,s){var i=e.timepicker.timezoneOffsetNumber(n),o=e.tm_timepicker.timezoneOffsetNumber(s);return isNaN(o)||t.setMinutes(t.getMinutes()+-i- -o),t},e.tm_timepicker.timeRange=function(t,n,s){return e.tm_timepicker.handleRange("tm_timepicker",t,n,s)},e.tm_timepicker.datetimeRange=function(t,n,s){e.tm_timepicker.handleRange("tm_datetimepicker",t,n,s)},e.tm_timepicker.dateRange=function(t,n,s){e.tm_timepicker.handleRange("tm_datepicker",t,n,s)},e.tm_timepicker.handleRange=function(t,n,s,o){var a=!1;o=e.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},o),t==="tm_timepicker"&&(a=!0,t="tm_datetimepicker");function r(e,i){var a,r,c=n[t]("getDate"),l=s[t]("getDate"),d=e[t]("getDate");c!==null&&(a=new Date(c.getTime()),r=new Date(c.getTime()),a.setMilliseconds(a.getMilliseconds()+o.minInterval),r.setMilliseconds(r.getMilliseconds()+o.maxInterval),o.minInterval>0&&a>l?s[t]("setDate",a):o.maxInterval>0&&r<l?s[t]("setDate",r):c>l&&i[t]("setDate",d))}function i(e,n,s){var i;if(!e.val())return;i=e[t].call(e,"getDate"),i!==null&&o.minInterval>0&&(s==="minDate"&&i.setMilliseconds(i.getMilliseconds()+o.minInterval),s==="maxDate"&&i.setMilliseconds(i.getMilliseconds()-o.minInterval)),i.getTime&&n[t].call(n,"option",s,i)}return e.fn[t].call(n,e.extend({timeOnly:a,onClose:function(){r(e(this),s)},onSelect:function(){i(e(this),s,"minDate")}},o,o.start)),e.fn[t].call(s,e.extend({timeOnly:a,onClose:function(){r(e(this),n)},onSelect:function(){i(e(this),n,"maxDate")}},o,o.end)),r(n,s),i(n,s,"minDate"),i(s,n,"maxDate"),e([n.get(0),s.get(0)])},e.tm_timepicker.log=function(){window.console&&window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments))},e.tm_timepicker._util={_extendRemove:t,_isEmptyObject:r,_convert24to12:n,_detectSupport:c,_selectLocalTimezone:i,_computeEffectiveSetting:s,_splitDateTime:l,_parseDateTimeInternal:o},Date.prototype.getMicroseconds||(Object.defineProperty(Date.prototype,"microseconds",{value:0,writable:!0}),Object.defineProperty(Date.prototype,"getMicroseconds",{value:function(){return this.microseconds}}),Object.defineProperty(Date.prototype,"setMicroseconds",{value:function(e){return this.setMilliseconds(this.getMilliseconds()+Math.floor(e/1e3)),this.microseconds=e%1e3,this}})),e.tm_timepicker.version="1.6.3"})